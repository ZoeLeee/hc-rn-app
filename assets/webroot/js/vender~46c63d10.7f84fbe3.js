"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[338],{71312:(t,e,s)=>{s(72739),s(93701),s(58095);s(34389),s(69314)},43048:(t,e,s)=>{s.d(e,{RD:()=>o,T:()=>r,c7:()=>i});var r,i,n=s(58095);!function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(r||(r={}));class o{}o.X=new n.P(1,0,0),o.Y=new n.P(0,1,0),o.Z=new n.P(0,0,1),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(i||(i={}))},15631:(t,e,s)=>{s.d(e,{HE:()=>h,Wo:()=>a,zZ:()=>l});var r=s(72739),i=s(48154),n=s(48939),o=s(48620);class a{constructor(t=0,e=0,s=0){this.r=t,this.g=e,this.b=s}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let t=255*this.r|0;return t=397*t^(255*this.g|0),t=397*t^(255*this.b|0),t}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this}fromArray(t,e=0){return a.FromArrayToRef(t,e,this),this}toColor4(t=1){return new h(this.r,this.g,this.b,t)}asArray(){return[this.r,this.g,this.b]}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(t){return new a(this.r*t.r,this.g*t.g,this.b*t.b)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b}equalsFloats(t,e,s){return this.r===t&&this.g===e&&this.b===s}scale(t){return new a(this.r*t,this.g*t,this.b*t)}scaleInPlace(t){return this.r*=t,this.g*=t,this.b*=t,this}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this}clampToRef(t=0,e=1,s){return s.r=r.R.Clamp(this.r,t,e),s.g=r.R.Clamp(this.g,t,e),s.b=r.R.Clamp(this.b,t,e),this}add(t){return new a(this.r+t.r,this.g+t.g,this.b+t.b)}addToRef(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this}subtract(t){return new a(this.r-t.r,this.g-t.g,this.b-t.b)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this}clone(){return new a(this.r,this.g,this.b)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyFromFloats(t,e,s){return this.r=t,this.g=e,this.b=s,this}set(t,e,s){return this.copyFromFloats(t,e,s)}toHexString(){const t=Math.round(255*this.r),e=Math.round(255*this.g),s=Math.round(255*this.b);return"#"+r.R.ToHex(t)+r.R.ToHex(e)+r.R.ToHex(s)}toLinearSpace(){const t=new a;return this.toLinearSpaceToRef(t),t}toHSV(){const t=new a;return this.toHSVToRef(t),t}toHSVToRef(t){const e=this.r,s=this.g,r=this.b,i=Math.max(e,s,r),n=Math.min(e,s,r);let o=0,a=0;const h=i,l=i-n;0!==i&&(a=l/i),i!=n&&(i==e?(o=(s-r)/l,s<r&&(o+=6)):i==s?o=(r-e)/l+2:i==r&&(o=(e-s)/l+4),o*=60),t.r=o,t.g=a,t.b=h}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,i.Nn),t.g=Math.pow(this.g,i.Nn),t.b=Math.pow(this.b,i.Nn),this}toGammaSpace(){const t=new a;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,i.zp),t.g=Math.pow(this.g,i.zp),t.b=Math.pow(this.b,i.zp),this}static HSVtoRGBToRef(t,e,s,r){const i=s*e,n=t/60,o=i*(1-Math.abs(n%2-1));let a=0,h=0,l=0;n>=0&&n<=1?(a=i,h=o):n>=1&&n<=2?(a=o,h=i):n>=2&&n<=3?(h=i,l=o):n>=3&&n<=4?(h=o,l=i):n>=4&&n<=5?(a=o,l=i):n>=5&&n<=6&&(a=i,l=o);const c=s-i;r.set(a+c,h+c,l+c)}static FromHSV(t,e,s){const r=new a(0,0,0);return a.HSVtoRGBToRef(t,e,s,r),r}static FromHexString(t){if("#"!==t.substring(0,1)||7!==t.length)return new a(0,0,0);const e=parseInt(t.substring(1,3),16),s=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return a.FromInts(e,s,r)}static FromArray(t,e=0){return new a(t[e],t[e+1],t[e+2])}static FromArrayToRef(t,e=0,s){s.r=t[e],s.g=t[e+1],s.b=t[e+2]}static FromInts(t,e,s){return new a(t/255,e/255,s/255)}static Lerp(t,e,s){const r=new a(0,0,0);return a.LerpToRef(t,e,s,r),r}static LerpToRef(t,e,s,r){r.r=t.r+(e.r-t.r)*s,r.g=t.g+(e.g-t.g)*s,r.b=t.b+(e.b-t.b)*s}static Hermite(t,e,s,r,i){const n=i*i,o=i*n,h=2*o-3*n+1,l=-2*o+3*n,c=o-2*n+i,u=o-n,d=t.r*h+s.r*l+e.r*c+r.r*u,_=t.g*h+s.g*l+e.g*c+r.g*u,m=t.b*h+s.b*l+e.b*c+r.b*u;return new a(d,_,m)}static Hermite1stDerivative(t,e,s,r,i){const n=a.Black();return this.Hermite1stDerivativeToRef(t,e,s,r,i,n),n}static Hermite1stDerivativeToRef(t,e,s,r,i,n){const o=i*i;n.r=6*(o-i)*t.r+(3*o-4*i+1)*e.r+6*(-o+i)*s.r+(3*o-2*i)*r.r,n.g=6*(o-i)*t.g+(3*o-4*i+1)*e.g+6*(-o+i)*s.g+(3*o-2*i)*r.g,n.b=6*(o-i)*t.b+(3*o-4*i+1)*e.b+6*(-o+i)*s.b+(3*o-2*i)*r.b}static Red(){return new a(1,0,0)}static Green(){return new a(0,1,0)}static Blue(){return new a(0,0,1)}static Black(){return new a(0,0,0)}static get BlackReadOnly(){return a._BlackReadOnly}static White(){return new a(1,1,1)}static Purple(){return new a(.5,0,.5)}static Magenta(){return new a(1,0,1)}static Yellow(){return new a(1,1,0)}static Gray(){return new a(.5,.5,.5)}static Teal(){return new a(0,1,1)}static Random(){return new a(Math.random(),Math.random(),Math.random())}}a._BlackReadOnly=a.Black();class h{constructor(t=0,e=0,s=0,r=1){this.r=t,this.g=e,this.b=s,this.a=r}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}asArray(){return[this.r,this.g,this.b,this.a]}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this}fromArray(t,e=0){return h.FromArrayToRef(t,e,this),this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}add(t){return new h(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new h(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this}scale(t){return new h(this.r*t,this.g*t,this.b*t,this.a*t)}scaleInPlace(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this}clampToRef(t=0,e=1,s){return s.r=r.R.Clamp(this.r,t,e),s.g=r.R.Clamp(this.g,t,e),s.b=r.R.Clamp(this.b,t,e),s.a=r.R.Clamp(this.a,t,e),this}multiply(t){return new h(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let t=255*this.r|0;return t=397*t^(255*this.g|0),t=397*t^(255*this.b|0),t=397*t^(255*this.a|0),t}clone(){return new h(this.r,this.g,this.b,this.a)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}copyFromFloats(t,e,s,r){return this.r=t,this.g=e,this.b=s,this.a=r,this}set(t,e,s,r){return this.copyFromFloats(t,e,s,r)}toHexString(t=!1){const e=Math.round(255*this.r),s=Math.round(255*this.g),i=Math.round(255*this.b);if(t)return"#"+r.R.ToHex(e)+r.R.ToHex(s)+r.R.ToHex(i);const n=Math.round(255*this.a);return"#"+r.R.ToHex(e)+r.R.ToHex(s)+r.R.ToHex(i)+r.R.ToHex(n)}toLinearSpace(){const t=new h;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,i.Nn),t.g=Math.pow(this.g,i.Nn),t.b=Math.pow(this.b,i.Nn),t.a=this.a,this}toGammaSpace(){const t=new h;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,i.zp),t.g=Math.pow(this.g,i.zp),t.b=Math.pow(this.b,i.zp),t.a=this.a,this}static FromHexString(t){if("#"!==t.substring(0,1)||9!==t.length&&7!==t.length)return new h(0,0,0,0);const e=parseInt(t.substring(1,3),16),s=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16),i=9===t.length?parseInt(t.substring(7,9),16):255;return h.FromInts(e,s,r,i)}static Lerp(t,e,s){const r=new h(0,0,0,0);return h.LerpToRef(t,e,s,r),r}static LerpToRef(t,e,s,r){r.r=t.r+(e.r-t.r)*s,r.g=t.g+(e.g-t.g)*s,r.b=t.b+(e.b-t.b)*s,r.a=t.a+(e.a-t.a)*s}static Hermite(t,e,s,r,i){const n=i*i,o=i*n,a=2*o-3*n+1,l=-2*o+3*n,c=o-2*n+i,u=o-n,d=t.r*a+s.r*l+e.r*c+r.r*u,_=t.g*a+s.g*l+e.g*c+r.g*u,m=t.b*a+s.b*l+e.b*c+r.b*u,f=t.a*a+s.a*l+e.a*c+r.a*u;return new h(d,_,m,f)}static Hermite1stDerivative(t,e,s,r,i){const n=new h;return this.Hermite1stDerivativeToRef(t,e,s,r,i,n),n}static Hermite1stDerivativeToRef(t,e,s,r,i,n){const o=i*i;n.r=6*(o-i)*t.r+(3*o-4*i+1)*e.r+6*(-o+i)*s.r+(3*o-2*i)*r.r,n.g=6*(o-i)*t.g+(3*o-4*i+1)*e.g+6*(-o+i)*s.g+(3*o-2*i)*r.g,n.b=6*(o-i)*t.b+(3*o-4*i+1)*e.b+6*(-o+i)*s.b+(3*o-2*i)*r.b,n.a=6*(o-i)*t.a+(3*o-4*i+1)*e.a+6*(-o+i)*s.a+(3*o-2*i)*r.a}static FromColor3(t,e=1){return new h(t.r,t.g,t.b,e)}static FromArray(t,e=0){return new h(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e=0,s){s.r=t[e],s.g=t[e+1],s.b=t[e+2],s.a=t[e+3]}static FromInts(t,e,s,r){return new h(t/255,e/255,s/255,r/255)}static CheckColors4(t,e){if(t.length===3*e){const e=[];for(let s=0;s<t.length;s+=3){const r=s/3*4;e[r]=t[s],e[r+1]=t[s+1],e[r+2]=t[s+2],e[r+3]=1}return e}return t}}class l{}l.Color3=n.B.BuildArray(3,a.Black),l.Color4=n.B.BuildArray(3,(()=>new h(0,0,0,0))),(0,o.H)("BABYLON.Color3",a),(0,o.H)("BABYLON.Color4",h)},48154:(t,e,s)=>{s.d(e,{Nn:()=>i,Q_:()=>n,kn:()=>o,zp:()=>r});const r=1/2.2,i=2.2,n=(1+Math.sqrt(5))/2,o=.001},84319:(t,e,s)=>{s.d(e,{i:()=>i});var r=s(62464);class i{static GetPlanes(t){const e=[];for(let t=0;t<6;t++)e.push(new r.J(0,0,0,0));return i.GetPlanesToRef(t,e),e}static GetNearPlaneToRef(t,e){const s=t.m;e.normal.x=s[3]+s[2],e.normal.y=s[7]+s[6],e.normal.z=s[11]+s[10],e.d=s[15]+s[14],e.normalize()}static GetFarPlaneToRef(t,e){const s=t.m;e.normal.x=s[3]-s[2],e.normal.y=s[7]-s[6],e.normal.z=s[11]-s[10],e.d=s[15]-s[14],e.normalize()}static GetLeftPlaneToRef(t,e){const s=t.m;e.normal.x=s[3]+s[0],e.normal.y=s[7]+s[4],e.normal.z=s[11]+s[8],e.d=s[15]+s[12],e.normalize()}static GetRightPlaneToRef(t,e){const s=t.m;e.normal.x=s[3]-s[0],e.normal.y=s[7]-s[4],e.normal.z=s[11]-s[8],e.d=s[15]-s[12],e.normalize()}static GetTopPlaneToRef(t,e){const s=t.m;e.normal.x=s[3]-s[1],e.normal.y=s[7]-s[5],e.normal.z=s[11]-s[9],e.d=s[15]-s[13],e.normalize()}static GetBottomPlaneToRef(t,e){const s=t.m;e.normal.x=s[3]+s[1],e.normal.y=s[7]+s[5],e.normal.z=s[11]+s[9],e.d=s[15]+s[13],e.normalize()}static GetPlanesToRef(t,e){i.GetNearPlaneToRef(t,e[0]),i.GetFarPlaneToRef(t,e[1]),i.GetLeftPlaneToRef(t,e[2]),i.GetRightPlaneToRef(t,e[3]),i.GetTopPlaneToRef(t,e[4]),i.GetBottomPlaneToRef(t,e[5])}}},93701:(t,e,s)=>{s.d(e,{k:()=>h,y:()=>a});var r=s(72433),i=s(58095),n=s(96969);class o{static extractMinAndMaxIndexed(t,e,s,r,i,n){for(let o=s;o<s+r;o++){const s=3*e[o],r=t[s],a=t[s+1],h=t[s+2];i.minimizeInPlaceFromFloats(r,a,h),n.maximizeInPlaceFromFloats(r,a,h)}}static extractMinAndMax(t,e,s,r,i,n){for(let o=e,a=e*r;o<e+s;o++,a+=r){const e=t[a],s=t[a+1],r=t[a+2];i.minimizeInPlaceFromFloats(e,s,r),n.maximizeInPlaceFromFloats(e,s,r)}}}function a(t,e,s,r,n=null){const a=new i.P(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),h=new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return o.extractMinAndMaxIndexed(t,e,s,r,a,h),n&&(a.x-=a.x*n.x+n.y,a.y-=a.y*n.x+n.y,a.z-=a.z*n.x+n.y,h.x+=h.x*n.x+n.y,h.y+=h.y*n.x+n.y,h.z+=h.z*n.x+n.y),{minimum:a,maximum:h}}function h(t,e,s,r=null,n){const a=new i.P(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),h=new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return n||(n=3),o.extractMinAndMax(t,e,s,n,a,h),r&&(a.x-=a.x*r.x+r.y,a.y-=a.y*r.x+r.y,a.z-=a.z*r.x+r.y,h.x+=h.x*r.x+r.y,h.y+=h.y*r.x+r.y,h.z+=h.z*r.x+r.y),{minimum:a,maximum:h}}(0,r.gn)([n.G6.filter(((...[t,e])=>!Array.isArray(t)&&!Array.isArray(e)))],o,"extractMinAndMaxIndexed",null),(0,r.gn)([n.G6.filter(((...[t])=>!Array.isArray(t)))],o,"extractMinAndMax",null)},89223:(t,e,s)=>{s.d(e,{a:()=>n});var r=s(84318),i=s(58095);class n{constructor(t=0,e=0){this.x=t,this.y=e,t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("x is not an integer, floor(x) used")),e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("y is not an integer, floor(y) used"))}clone(){return new n(this.x,this.y)}rotate60About(t){const e=this.x;return this.x=t.x+t.y-this.y,this.y=e+this.y-t.x,this}rotateNeg60About(t){const e=this.x;return this.x=e+this.y-t.y,this.y=t.x+t.y-e,this}rotate120(t,e){t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("m not an integer only floor(m) used")),e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("n not an integer only floor(n) used"));const s=this.x;return this.x=t-s-this.y,this.y=e+s,this}rotateNeg120(t,e){t!==Math.floor(t)&&(Math.floor(t),r.Y.Warn("m is not an integer, floor(m) used")),e!==Math.floor(e)&&(Math.floor(e),r.Y.Warn("n is not an integer,   floor(n) used"));const s=this.x;return this.x=this.y-e,this.y=t+e-s-this.y,this}toCartesianOrigin(t,e){const s=i.P.Zero();return s.x=t.x+2*this.x*e+this.y*e,s.y=t.y+Math.sqrt(3)*this.y*e,s}static Zero(){return new n(0,0)}}},34389:(t,e,s)=>{s.d(e,{RD:()=>r.RD,Wo:()=>i.Wo,HE:()=>i.HE,c7:()=>r.c7,y3:()=>n.y3,_f:()=>n._f,zZ:()=>i.zZ,jp:()=>n.jp,FM:()=>n.FM,P:()=>n.P});var r=s(43048),i=s(15631),n=(s(48154),s(84319),s(74742),s(62464),s(76144),s(58095));s(66513)},74742:(t,e,s)=>{s.d(e,{$B:()=>c,ZZ:()=>l,j_:()=>u});var r,i=s(72739),n=s(58095),o=s(48154);!function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(r||(r={}));class a{constructor(t){this._radians=t,this._radians<0&&(this._radians+=2*Math.PI)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}static BetweenTwoPoints(t,e){const s=e.subtract(t),r=Math.atan2(s.y,s.x);return new a(r)}static FromRadians(t){return new a(t)}static FromDegrees(t){return new a(t*Math.PI/180)}}class h{constructor(t,e,s){this.startPoint=t,this.midPoint=e,this.endPoint=s;const i=Math.pow(e.x,2)+Math.pow(e.y,2),o=(Math.pow(t.x,2)+Math.pow(t.y,2)-i)/2,h=(i-Math.pow(s.x,2)-Math.pow(s.y,2))/2,l=(t.x-e.x)*(e.y-s.y)-(e.x-s.x)*(t.y-e.y);this.centerPoint=new n.FM((o*(e.y-s.y)-h*(t.y-e.y))/l,((t.x-e.x)*h-(e.x-s.x)*o)/l),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=a.BetweenTwoPoints(this.centerPoint,this.startPoint);const c=this.startAngle.degrees();let u=a.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),d=a.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();u-c>180&&(u-=360),u-c<-180&&(u+=360),d-u>180&&(d-=360),d-u<-180&&(d+=360),this.orientation=u-c<0?r.CW:r.CCW,this.angle=a.FromDegrees(this.orientation===r.CW?c-d:d-c)}}class l{constructor(t,e){this._points=new Array,this._length=0,this.closed=!1,this._points.push(new n.FM(t,e))}addLineTo(t,e){if(this.closed)return this;const s=new n.FM(t,e),r=this._points[this._points.length-1];return this._points.push(s),this._length+=s.subtract(r).length(),this}addArcTo(t,e,s,i,o=36){if(this.closed)return this;const a=this._points[this._points.length-1],l=new n.FM(t,e),c=new n.FM(s,i),u=new h(a,l,c);let d=u.angle.radians()/o;u.orientation===r.CW&&(d*=-1);let _=u.startAngle.radians()+d;for(let t=0;t<o;t++){const t=Math.cos(_)*u.radius+u.centerPoint.x,e=Math.sin(_)*u.radius+u.centerPoint.y;this.addLineTo(t,e),_+=d}return this}close(){return this.closed=!0,this}length(){let t=this._length;if(this.closed){const e=this._points[this._points.length-1];t+=this._points[0].subtract(e).length()}return t}getPoints(){return this._points}getPointAtLengthPosition(t){if(t<0||t>1)return n.FM.Zero();const e=t*this.length();let s=0;for(let t=0;t<this._points.length;t++){const r=(t+1)%this._points.length,i=this._points[t],o=this._points[r].subtract(i),a=o.length()+s;if(e>=s&&e<=a){const t=o.normalize(),r=e-s;return new n.FM(i.x+t.x*r,i.y+t.y*r)}s=a}return n.FM.Zero()}static StartingAt(t,e){return new l(t,e)}}class c{constructor(t,e=null,s,r=!1){this.path=t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array,this._pointAtData={id:0,point:n.P.Zero(),previousPointArrayIndex:0,position:0,subPosition:0,interpolateReady:!1,interpolationMatrix:n.y3.Identity()};for(let e=0;e<t.length;e++)this._curve[e]=t[e].clone();this._raw=s||!1,this._alignTangentsWithPath=r,this._compute(e,r)}getCurve(){return this._curve}getPoints(){return this._curve}length(){return this._distances[this._distances.length-1]}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}getPointAt(t){return this._updatePointAtData(t).point}getTangentAt(t,e=!1){return this._updatePointAtData(t,e),e?n.P.TransformCoordinates(n.P.Forward(),this._pointAtData.interpolationMatrix):this._tangents[this._pointAtData.previousPointArrayIndex]}getNormalAt(t,e=!1){return this._updatePointAtData(t,e),e?n.P.TransformCoordinates(n.P.Right(),this._pointAtData.interpolationMatrix):this._normals[this._pointAtData.previousPointArrayIndex]}getBinormalAt(t,e=!1){return this._updatePointAtData(t,e),e?n.P.TransformCoordinates(n.P.UpReadOnly,this._pointAtData.interpolationMatrix):this._binormals[this._pointAtData.previousPointArrayIndex]}getDistanceAt(t){return this.length()*t}getPreviousPointIndexAt(t){return this._updatePointAtData(t),this._pointAtData.previousPointArrayIndex}getSubPositionAt(t){return this._updatePointAtData(t),this._pointAtData.subPosition}getClosestPositionTo(t){let e=Number.MAX_VALUE,s=0;for(let r=0;r<this._curve.length-1;r++){const i=this._curve[r+0],o=this._curve[r+1].subtract(i).normalize(),a=this._distances[r+1]-this._distances[r+0],h=Math.min(Math.max(n.P.Dot(o,t.subtract(i).normalize()),0)*n.P.Distance(i,t)/a,1),l=n.P.Distance(i.add(o.scale(h*a)),t);l<e&&(e=l,s=(this._distances[r+0]+a*h)/this.length())}return s}slice(t=0,e=1){if(t<0&&(t=1- -1*t%1),e<0&&(e=1- -1*e%1),t>e){const s=t;t=e,e=s}const s=this.getCurve(),r=this.getPointAt(t);let i=this.getPreviousPointIndexAt(t);const n=this.getPointAt(e),o=this.getPreviousPointIndexAt(e)+1,a=[];return 0!==t&&(i++,a.push(r)),a.push(...s.slice(i,o)),1===e&&1!==t||a.push(n),new c(a,this.getNormalAt(t),this._raw,this._alignTangentsWithPath)}update(t,e=null,s=!1){for(let e=0;e<t.length;e++)this._curve[e].x=t[e].x,this._curve[e].y=t[e].y,this._curve[e].z=t[e].z;return this._compute(e,s),this}_compute(t,e=!1){const s=this._curve.length;if(s<2)return;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[s-1]=this._curve[s-1].subtract(this._curve[s-2]),this._raw||this._tangents[s-1].normalize();const r=this._tangents[0],i=this._normalVector(r,t);let o,a,h,l,c;this._normals[0]=i,this._raw||this._normals[0].normalize(),this._binormals[0]=n.P.Cross(r,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let t=1;t<s;t++)o=this._getLastNonNullVector(t),t<s-1&&(a=this._getFirstNonNullVector(t),this._tangents[t]=e?a:o.add(a),this._tangents[t].normalize()),this._distances[t]=this._distances[t-1]+this._curve[t].subtract(this._curve[t-1]).length(),h=this._tangents[t],c=this._binormals[t-1],this._normals[t]=n.P.Cross(c,h),this._raw||(0===this._normals[t].length()?(l=this._normals[t-1],this._normals[t]=l.clone()):this._normals[t].normalize()),this._binormals[t]=n.P.Cross(h,this._normals[t]),this._raw||this._binormals[t].normalize();this._pointAtData.id=NaN}_getFirstNonNullVector(t){let e=1,s=this._curve[t+e].subtract(this._curve[t]);for(;0===s.length()&&t+e+1<this._curve.length;)e++,s=this._curve[t+e].subtract(this._curve[t]);return s}_getLastNonNullVector(t){let e=1,s=this._curve[t].subtract(this._curve[t-e]);for(;0===s.length()&&t>e+1;)e++,s=this._curve[t].subtract(this._curve[t-e]);return s}_normalVector(t,e){let s,r=t.length();if(0===r&&(r=1),null==e){let e;e=i.R.WithinEpsilon(Math.abs(t.y)/r,1,o.kn)?i.R.WithinEpsilon(Math.abs(t.x)/r,1,o.kn)?i.R.WithinEpsilon(Math.abs(t.z)/r,1,o.kn)?n.P.Zero():new n.P(0,0,1):new n.P(1,0,0):new n.P(0,-1,0),s=n.P.Cross(t,e)}else s=n.P.Cross(t,e),n.P.CrossToRef(s,t,s);return s.normalize(),s}_updatePointAtData(t,e=!1){if(this._pointAtData.id===t)return this._pointAtData.interpolateReady||this._updateInterpolationMatrix(),this._pointAtData;this._pointAtData.id=t;const s=this.getPoints();if(t<=0)return this._setPointAtData(0,0,s[0],0,e);if(t>=1)return this._setPointAtData(1,1,s[s.length-1],s.length-1,e);let r,i=s[0],o=0;const a=t*this.length();for(let h=1;h<s.length;h++){r=s[h];const l=n.P.Distance(i,r);if(o+=l,o===a)return this._setPointAtData(t,1,r,h,e);if(o>a){const s=(o-a)/l,n=i.subtract(r),c=r.add(n.scaleInPlace(s));return this._setPointAtData(t,1-s,c,h-1,e)}i=r}return this._pointAtData}_setPointAtData(t,e,s,r,i){return this._pointAtData.point=s,this._pointAtData.position=t,this._pointAtData.subPosition=e,this._pointAtData.previousPointArrayIndex=r,this._pointAtData.interpolateReady=i,i&&this._updateInterpolationMatrix(),this._pointAtData}_updateInterpolationMatrix(){this._pointAtData.interpolationMatrix=n.y3.Identity();const t=this._pointAtData.previousPointArrayIndex;if(t!==this._tangents.length-1){const e=t+1,s=this._tangents[t].clone(),r=this._normals[t].clone(),i=this._binormals[t].clone(),o=this._tangents[e].clone(),a=this._normals[e].clone(),h=this._binormals[e].clone(),l=n._f.RotationQuaternionFromAxis(r,i,s),c=n._f.RotationQuaternionFromAxis(a,h,o);n._f.Slerp(l,c,this._pointAtData.subPosition).toRotationMatrix(this._pointAtData.interpolationMatrix)}}}class u{static CreateQuadraticBezier(t,e,s,r){r=r>2?r:3;const i=new Array,o=(t,e,s,r)=>(1-t)*(1-t)*e+2*t*(1-t)*s+t*t*r;for(let a=0;a<=r;a++)i.push(new n.P(o(a/r,t.x,e.x,s.x),o(a/r,t.y,e.y,s.y),o(a/r,t.z,e.z,s.z)));return new u(i)}static CreateCubicBezier(t,e,s,r,i){i=i>3?i:4;const o=new Array,a=(t,e,s,r,i)=>(1-t)*(1-t)*(1-t)*e+3*t*(1-t)*(1-t)*s+3*t*t*(1-t)*r+t*t*t*i;for(let h=0;h<=i;h++)o.push(new n.P(a(h/i,t.x,e.x,s.x,r.x),a(h/i,t.y,e.y,s.y,r.y),a(h/i,t.z,e.z,s.z,r.z)));return new u(o)}static CreateHermiteSpline(t,e,s,r,i){const o=new Array,a=1/i;for(let h=0;h<=i;h++)o.push(n.P.Hermite(t,e,s,r,h*a));return new u(o)}static CreateCatmullRomSpline(t,e,s){const r=new Array,i=1/e;let o=0;if(s){const s=t.length;for(let a=0;a<s;a++){o=0;for(let h=0;h<e;h++)r.push(n.P.CatmullRom(t[a%s],t[(a+1)%s],t[(a+2)%s],t[(a+3)%s],o)),o+=i}r.push(r[0])}else{const s=new Array;s.push(t[0].clone()),Array.prototype.push.apply(s,t),s.push(t[t.length-1].clone());let a=0;for(;a<s.length-3;a++){o=0;for(let t=0;t<e;t++)r.push(n.P.CatmullRom(s[a],s[a+1],s[a+2],s[a+3],o)),o+=i}a--,r.push(n.P.CatmullRom(s[a],s[a+1],s[a+2],s[a+3],o))}return new u(r)}static ArcThru3Points(t,e,s,r=32,i=!1,o=!1){const a=new Array,h=e.subtract(t),l=s.subtract(e),c=t.subtract(s),d=n.P.Cross(h,l),_=d.length();if(_<Math.pow(10,-8))return new u(a);const m=h.lengthSquared(),f=l.lengthSquared(),p=c.lengthSquared(),y=d.lengthSquared(),x=.5*h.length()*l.length()*c.length()/_,g=-.5*f*n.P.Dot(h,c)/y,b=-.5*p*n.P.Dot(h,l)/y,R=-.5*m*n.P.Dot(l,c)/y,P=t.scale(g).add(e.scale(b)).add(s.scale(R)),M=t.subtract(P).normalize(),T=n.P.Cross(d,M).normalize();if(o){const e=2*Math.PI/r;for(let t=0;t<=2*Math.PI;t+=e)a.push(P.add(M.scale(x*Math.cos(t)).add(T.scale(x*Math.sin(t)))));a.push(t)}else{const e=1/r;let o=0,h=n.P.Zero();do{h=P.add(M.scale(x*Math.cos(o)).add(T.scale(x*Math.sin(o)))),a.push(h),o+=e}while(!h.equalsWithEpsilon(s,x*e*1.1));a.push(s),i&&a.push(t)}return new u(a)}constructor(t){this._length=0,this._points=t,this._length=this._computeLength(t)}getPoints(){return this._points}length(){return this._length}continue(t){const e=this._points[this._points.length-1],s=this._points.slice(),r=t.getPoints();for(let t=1;t<r.length;t++)s.push(r[t].subtract(r[0]).add(e));return new u(s)}_computeLength(t){let e=0;for(let s=1;s<t.length;s++)e+=t[s].subtract(t[s-1]).length();return e}}},62464:(t,e,s)=>{s.d(e,{J:()=>i});var r=s(58095);class i{constructor(t,e,s,i){this.normal=new r.P(t,e,s),this.d=i}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new i(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let t=this.normal.getHashCode();return t=397*t^(0|this.d),t}normalize(){const t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let e=0;return 0!==t&&(e=1/t),this.normal.x*=e,this.normal.y*=e,this.normal.z*=e,this.d*=e,this}transform(t){const e=i._TmpMatrix;t.invertToRef(e);const s=e.m,r=this.normal.x,n=this.normal.y,o=this.normal.z,a=this.d,h=r*s[0]+n*s[1]+o*s[2]+a*s[3],l=r*s[4]+n*s[5]+o*s[6]+a*s[7],c=r*s[8]+n*s[9]+o*s[10]+a*s[11],u=r*s[12]+n*s[13]+o*s[14]+a*s[15];return new i(h,l,c,u)}dotCoordinate(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d}copyFromPoints(t,e,s){const r=e.x-t.x,i=e.y-t.y,n=e.z-t.z,o=s.x-t.x,a=s.y-t.y,h=s.z-t.z,l=i*h-n*a,c=n*o-r*h,u=r*a-i*o,d=Math.sqrt(l*l+c*c+u*u);let _;return _=0!==d?1/d:0,this.normal.x=l*_,this.normal.y=c*_,this.normal.z=u*_,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this}isFrontFacingTo(t,e){return r.P.Dot(this.normal,t)<=e}signedDistanceTo(t){return r.P.Dot(t,this.normal)+this.d}static FromArray(t){return new i(t[0],t[1],t[2],t[3])}static FromPoints(t,e,s){const r=new i(0,0,0,0);return r.copyFromPoints(t,e,s),r}static FromPositionAndNormal(t,e){const s=new i(0,0,0,0);return e.normalize(),s.normal=e,s.d=-(e.x*t.x+e.y*t.y+e.z*t.z),s}static SignedDistanceToPlaneFromPositionAndNormal(t,e,s){const i=-(e.x*t.x+e.y*t.y+e.z*t.z);return r.P.Dot(s,e)+i}}i._TmpMatrix=r.y3.Identity()},72739:(t,e,s)=>{s.d(e,{R:()=>r});class r{static WithinEpsilon(t,e,s=1401298e-51){return Math.abs(t-e)<=s}static ToHex(t){const e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()}static Sign(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}static Clamp(t,e=0,s=1){return Math.min(s,Math.max(e,t))}static Log2(t){return Math.log(t)*Math.LOG2E}static ILog2(t){if(Math.log2)return Math.floor(Math.log2(t));if(t<0)return NaN;if(0===t)return-1/0;let e=0;if(t<1){for(;t<1;)e++,t*=2;e=-e}else if(t>1)for(;t>1;)e++,t=Math.floor(t/2);return e}static Repeat(t,e){return t-Math.floor(t/e)*e}static Normalize(t,e,s){return(t-e)/(s-e)}static Denormalize(t,e,s){return t*(s-e)+e}static DeltaAngle(t,e){let s=r.Repeat(e-t,360);return s>180&&(s-=360),s}static PingPong(t,e){const s=r.Repeat(t,2*e);return e-Math.abs(s-e)}static SmoothStep(t,e,s){let i=r.Clamp(s);return i=-2*i*i*i+3*i*i,e*i+t*(1-i)}static MoveTowards(t,e,s){let i=0;return i=Math.abs(e-t)<=s?e:t+r.Sign(e-t)*s,i}static MoveTowardsAngle(t,e,s){const i=r.DeltaAngle(t,e);let n=0;return-s<i&&i<s?n=e:(e=t+i,n=r.MoveTowards(t,e,s)),n}static Lerp(t,e,s){return t+(e-t)*s}static LerpAngle(t,e,s){let i=r.Repeat(e-t,360);return i>180&&(i-=360),t+i*r.Clamp(s)}static InverseLerp(t,e,s){let i=0;return i=t!=e?r.Clamp((s-t)/(e-t)):0,i}static Hermite(t,e,s,r,i){const n=i*i,o=i*n;return t*(2*o-3*n+1)+s*(-2*o+3*n)+e*(o-2*n+i)+r*(o-n)}static Hermite1stDerivative(t,e,s,r,i){const n=i*i;return 6*(n-i)*t+(3*n-4*i+1)*e+6*(-n+i)*s+(3*n-2*i)*r}static RandomRange(t,e){return t===e?t:Math.random()*(e-t)+t}static RangeToPercent(t,e,s){return(t-e)/(s-e)}static PercentToRange(t,e,s){return(s-e)*t+e}static NormalizeRadians(t){return t-=r.TwoPi*Math.floor((t+Math.PI)/r.TwoPi)}static HCF(t,e){const s=t%e;return 0===s?e:r.HCF(e,s)}}r.TwoPi=2*Math.PI},76144:(t,e,s)=>{s.d(e,{$:()=>r});class r{constructor(t,e){this.width=t,this.height=e}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let t=0|this.width;return t=397*t^(0|this.height),t}copyFrom(t){this.width=t.width,this.height=t.height}copyFromFloats(t,e){return this.width=t,this.height=e,this}set(t,e){return this.copyFromFloats(t,e)}multiplyByFloats(t,e){return new r(this.width*t,this.height*e)}clone(){return new r(this.width,this.height)}equals(t){return!!t&&(this.width===t.width&&this.height===t.height)}get surface(){return this.width*this.height}static Zero(){return new r(0,0)}add(t){return new r(this.width+t.width,this.height+t.height)}subtract(t){return new r(this.width-t.width,this.height-t.height)}static Lerp(t,e,s){const i=t.width+(e.width-t.width)*s,n=t.height+(e.height-t.height)*s;return new r(i,n)}}},58095:(t,e,s)=>{s.d(e,{FM:()=>c,Lt:()=>d,P:()=>u,_f:()=>_,jp:()=>p,y3:()=>m});var r=s(72739),i=s(48154),n=s(48939),o=s(48620),a=s(20298),h=s(15210);const l=t=>parseInt(t.toString().replace(/\W/g,""));class c{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return`{X: ${this.x} Y: ${this.y}}`}getClassName(){return"Vector2"}getHashCode(){let t=l(this.x);return t=397*t^l(this.y),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,this}fromArray(t,e=0){return c.FromArrayToRef(t,e,this),this}asArray(){const t=new Array;return this.toArray(t,0),t}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,e){return this.x=t,this.y=e,this}set(t,e){return this.copyFromFloats(t,e)}add(t){return new this.constructor(this.x+t.x,this.y+t.y)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addVector3(t){return new this.constructor(this.x+t.x,this.y+t.y)}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e}multiplyByFloats(t,e){return new this.constructor(this.x*t,this.y*e)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e}divideInPlace(t){return this.divideToRef(t,this)}negate(){return new this.constructor(-this.x,-this.y)}negateInPlace(){return this.x*=-1,this.y*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y)}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){const e=new this.constructor(0,0);return this.scaleToRef(t,e),e}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,e=i.kn){return t&&r.R.WithinEpsilon(this.x,t.x,e)&&r.R.WithinEpsilon(this.y,t.y,e)}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}rotateToRef(t,e){const s=Math.cos(t),r=Math.sin(t);return e.x=s*this.x-r*this.y,e.y=r*this.x+s*this.y,e}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return c.NormalizeToRef(this,this),this}clone(){return new this.constructor(this.x,this.y)}static Zero(){return new c(0,0)}static One(){return new c(1,1)}static Random(t=0,e=1){return new c(r.R.RandomRange(t,e),r.R.RandomRange(t,e))}static get ZeroReadOnly(){return c._ZeroReadOnly}static FromArray(t,e=0){return new c(t[e],t[e+1])}static FromArrayToRef(t,e,s){return s.x=t[e],s.y=t[e+1],s}static CatmullRom(t,e,s,r,i){const n=i*i,o=i*n,a=.5*(2*e.x+(-t.x+s.x)*i+(2*t.x-5*e.x+4*s.x-r.x)*n+(-t.x+3*e.x-3*s.x+r.x)*o),h=.5*(2*e.y+(-t.y+s.y)*i+(2*t.y-5*e.y+4*s.y-r.y)*n+(-t.y+3*e.y-3*s.y+r.y)*o);return new t.constructor(a,h)}static Clamp(t,e,s){let r=t.x;r=r>s.x?s.x:r,r=r<e.x?e.x:r;let i=t.y;return i=i>s.y?s.y:i,i=i<e.y?e.y:i,new t.constructor(r,i)}static Hermite(t,e,s,r,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,l=o-2*n+i,c=o-n,u=t.x*a+s.x*h+e.x*l+r.x*c,d=t.y*a+s.y*h+e.y*l+r.y*c;return new t.constructor(u,d)}static Hermite1stDerivative(t,e,s,r,i){const n=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,s,r,i,n),n}static Hermite1stDerivativeToRef(t,e,s,r,i,n){const o=i*i;return n.x=6*(o-i)*t.x+(3*o-4*i+1)*e.x+6*(-o+i)*s.x+(3*o-2*i)*r.x,n.y=6*(o-i)*t.y+(3*o-4*i+1)*e.y+6*(-o+i)*s.y+(3*o-2*i)*r.y,n}static Lerp(t,e,s){const r=t.x+(e.x-t.x)*s,i=t.y+(e.y-t.y)*s;return new t.constructor(r,i)}static Dot(t,e){return t.x*e.x+t.y*e.y}static Normalize(t){const e=new t.constructor;return this.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){const s=t.length();return 0===s||(e.x=t.x/s,e.y=t.y/s),e}static Minimize(t,e){const s=t.x<e.x?t.x:e.x,r=t.y<e.y?t.y:e.y;return new t.constructor(s,r)}static Maximize(t,e){const s=t.x>e.x?t.x:e.x,r=t.y>e.y?t.y:e.y;return new t.constructor(s,r)}static Transform(t,e){const s=new t.constructor;return c.TransformToRef(t,e,s),s}static TransformToRef(t,e,s){const r=e.m,i=t.x*r[0]+t.y*r[4]+r[12],n=t.x*r[1]+t.y*r[5]+r[13];return s.x=i,s.y=n,s}static PointInTriangle(t,e,s,r){const i=.5*(-s.y*r.x+e.y*(-s.x+r.x)+e.x*(s.y-r.y)+s.x*r.y),n=i<0?-1:1,o=(e.y*r.x-e.x*r.y+(r.y-e.y)*t.x+(e.x-r.x)*t.y)*n,a=(e.x*s.y-e.y*s.x+(e.y-s.y)*t.x+(s.x-e.x)*t.y)*n;return o>0&&a>0&&o+a<2*i*n}static Distance(t,e){return Math.sqrt(c.DistanceSquared(t,e))}static DistanceSquared(t,e){const s=t.x-e.x,r=t.y-e.y;return s*s+r*r}static Center(t,e){const s=new t.constructor;return c.CenterToRef(t,e,s)}static CenterToRef(t,e,s){return s.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}static DistanceOfPointFromSegment(t,e,s){const r=c.DistanceSquared(e,s);if(0===r)return c.Distance(t,e);const i=s.subtract(e),n=Math.max(0,Math.min(1,c.Dot(t.subtract(e),i)/r)),o=e.add(i.multiplyByFloats(n,n));return c.Distance(t,o)}}c._ZeroReadOnly=c.Zero();class u{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}constructor(t=0,e=0,s=0){this._isDirty=!0,this._x=t,this._y=e,this._z=s}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z}}`}getClassName(){return"Vector3"}getHashCode(){let t=l(this._x);return t=397*t^l(this._y),t=397*t^l(this._z),t}asArray(){const t=[];return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}fromArray(t,e=0){return u.FromArrayToRef(t,e,this),this}toQuaternion(){return _.RotationYawPitchRoll(this._y,this._x,this._z)}addInPlace(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}addInPlaceFromFloats(t,e,s){return this._x+=t,this._y+=e,this._z+=s,this._isDirty=!0,this}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z)}addToRef(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}subtractFromFloats(t,e,s){return new this.constructor(this._x-t,this._y-e,this._z-s)}subtractFromFloatsToRef(t,e,s,r){return r.copyFromFloats(this._x-t,this._y-e,this._z-s)}negate(){return new this.constructor(-this._x,-this._y,-this._z)}negateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}negateToRef(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t)}scaleToRef(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)}getNormalToRef(t){const e=this.length();let s=Math.acos(this.y/e);const r=Math.atan2(this.z,this.x);s>Math.PI/2?s-=Math.PI/2:s+=Math.PI/2;const i=e*Math.sin(s)*Math.cos(r),n=e*Math.cos(s),o=e*Math.sin(s)*Math.sin(r);return t.set(i,n,o),t}applyRotationQuaternionToRef(t,e){const s=t._w*this._x+t._y*this._z-t._z*this._y,r=t._w*this._y+t._z*this._x-t._x*this._z,i=t._w*this._z+t._x*this._y-t._y*this._x,n=-t._x*this._x-t._y*this._y-t._z*this._z;return e._x=s*t._w+n*-t._x+r*-t._z-i*-t._y,e._y=r*t._w+n*-t._y+i*-t._x-s*-t._z,e._z=i*t._w+n*-t._z+s*-t._y-r*-t._x,e._isDirty=!0,e}applyRotationQuaternionInPlace(t){return this.applyRotationQuaternionToRef(t,this)}applyRotationQuaternion(t){return this.applyRotationQuaternionToRef(t,new this.constructor)}scaleAndAddToRef(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}projectOnPlane(t,e){const s=new this.constructor;return this.projectOnPlaneToRef(t,e,s),s}projectOnPlaneToRef(t,e,s){const r=t.normal,i=t.d,n=f.Vector3[0];this.subtractToRef(e,n),n.normalize();const o=u.Dot(n,r);if(Math.abs(o)<Math.pow(10,-10))s.setAll(1/0);else{const t=-(u.Dot(e,r)+i)/o,a=n.scaleInPlace(t);e.addToRef(a,s)}return s}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}equalsWithEpsilon(t,e=i.kn){return t&&r.R.WithinEpsilon(this._x,t._x,e)&&r.R.WithinEpsilon(this._y,t._y,e)&&r.R.WithinEpsilon(this._z,t._z,e)}equalsToFloats(t,e,s){return this._x===t&&this._y===e&&this._z===s}multiplyInPlace(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._isDirty=!0,this}multiply(t){return this.multiplyByFloats(t._x,t._y,t._z)}multiplyToRef(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}multiplyByFloats(t,e,s){return new this.constructor(this._x*t,this._y*e,this._z*s)}divide(t){return new this.constructor(this._x/t._x,this._y/t._y,this._z/t._z)}divideToRef(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}minimizeInPlaceFromFloats(t,e,s){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),s<this._z&&(this.z=s),this}maximizeInPlaceFromFloats(t,e,s){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),s>this._z&&(this.z=s),this}isNonUniformWithinEpsilon(t){const e=Math.abs(this._x),s=Math.abs(this._y);if(!r.R.WithinEpsilon(e,s,t))return!0;const i=Math.abs(this._z);return!r.R.WithinEpsilon(e,i,t)||!r.R.WithinEpsilon(s,i,t)}get isNonUniform(){const t=Math.abs(this._x);if(t!==Math.abs(this._y))return!0;return t!==Math.abs(this._z)}floor(){return new this.constructor(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}fract(){return new this.constructor(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z}get hasAZeroComponent(){return this._x*this._y*this._z==0}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){return"xyz"===(t=t.toLowerCase())||(f.Vector3[0].copyFrom(this),["x","y","z"].forEach(((e,s)=>{this[e]=f.Vector3[0][t[s]]}))),this}rotateByQuaternionToRef(t,e){return t.toRotationMatrix(f.Matrix[0]),u.TransformCoordinatesToRef(this,f.Matrix[0],e),e}rotateByQuaternionAroundPointToRef(t,e,s){return this.subtractToRef(e,f.Vector3[0]),f.Vector3[0].rotateByQuaternionToRef(t,f.Vector3[0]),e.addToRef(f.Vector3[0],s),s}cross(t){const e=new this.constructor;return u.CrossToRef(this,t,e)}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new this.constructor(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){const e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)}clone(){return new this.constructor(this._x,this._y,this._z)}copyFrom(t){return this.copyFromFloats(t._x,t._y,t._z)}copyFromFloats(t,e,s){return this._x=t,this._y=e,this._z=s,this._isDirty=!0,this}set(t,e,s){return this.copyFromFloats(t,e,s)}setAll(t){return this._x=this._y=this._z=t,this._isDirty=!0,this}static GetClipFactor(t,e,s,r){const i=u.Dot(t,s)-r;return i/(i-(u.Dot(e,s)-r))}static GetAngleBetweenVectors(t,e,s){const i=t.normalizeToRef(f.Vector3[1]),n=e.normalizeToRef(f.Vector3[2]);let o=u.Dot(i,n);o=r.R.Clamp(o,-1,1);const a=Math.acos(o),h=f.Vector3[3];return u.CrossToRef(i,n,h),u.Dot(h,s)>0?isNaN(a)?0:a:isNaN(a)?-Math.PI:-Math.acos(o)}static GetAngleBetweenVectorsOnPlane(t,e,s){f.Vector3[0].copyFrom(t);const i=f.Vector3[0];f.Vector3[1].copyFrom(e);const n=f.Vector3[1];f.Vector3[2].copyFrom(s);const o=f.Vector3[2],a=f.Vector3[3],h=f.Vector3[4];i.normalize(),n.normalize(),o.normalize(),u.CrossToRef(o,i,a),u.CrossToRef(a,o,h);const l=Math.atan2(u.Dot(n,a),u.Dot(n,h));return r.R.NormalizeRadians(l)}static PitchYawRollToMoveBetweenPointsToRef(t,e,s){const r=p.Vector3[0];return e.subtractToRef(t,r),s._y=Math.atan2(r.x,r.z)||0,s._x=Math.atan2(Math.sqrt(r.x**2+r.z**2),r.y)||0,s._z=0,s._isDirty=!0,s}static PitchYawRollToMoveBetweenPoints(t,e){const s=u.Zero();return u.PitchYawRollToMoveBetweenPointsToRef(t,e,s)}static SlerpToRef(t,e,s,n){s=r.R.Clamp(s,0,1);const o=f.Vector3[0],a=f.Vector3[1];o.copyFrom(t);const h=o.length();o.normalizeFromLength(h),a.copyFrom(e);const l=a.length();a.normalizeFromLength(l);const c=u.Dot(o,a);let d,_;if(c<1-i.kn){const t=Math.acos(c),e=1/Math.sin(t);d=Math.sin((1-s)*t)*e,_=Math.sin(s*t)*e}else d=1-s,_=s;return o.scaleInPlace(d),a.scaleInPlace(_),n.copyFrom(o).addInPlace(a),n.scaleInPlace(r.R.Lerp(h,l,s)),n}static SmoothToRef(t,e,s,r,i){return u.SlerpToRef(t,e,0===r?1:s/r,i),i}static FromArray(t,e=0){return new u(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return u.FromArray(t,e)}static FromArrayToRef(t,e,s){return s._x=t[e],s._y=t[e+1],s._z=t[e+2],s._isDirty=!0,s}static FromFloatArrayToRef(t,e,s){return u.FromArrayToRef(t,e,s)}static FromFloatsToRef(t,e,s,r){return r.copyFromFloats(t,e,s),r}static Zero(){return new u(0,0,0)}static One(){return new u(1,1,1)}static Up(){return new u(0,1,0)}static get UpReadOnly(){return u._UpReadOnly}static get DownReadOnly(){return u._DownReadOnly}static get RightReadOnly(){return u._RightReadOnly}static get LeftReadOnly(){return u._LeftReadOnly}static get LeftHandedForwardReadOnly(){return u._LeftHandedForwardReadOnly}static get RightHandedForwardReadOnly(){return u._RightHandedForwardReadOnly}static get ZeroReadOnly(){return u._ZeroReadOnly}static Down(){return new u(0,-1,0)}static Forward(t=!1){return new u(0,0,t?-1:1)}static Backward(t=!1){return new u(0,0,t?1:-1)}static Right(){return new u(1,0,0)}static Left(){return new u(-1,0,0)}static Random(t=0,e=1){return new u(r.R.RandomRange(t,e),r.R.RandomRange(t,e),r.R.RandomRange(t,e))}static TransformCoordinates(t,e){const s=u.Zero();return u.TransformCoordinatesToRef(t,e,s),s}static TransformCoordinatesToRef(t,e,s){return u.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,s),s}static TransformCoordinatesFromFloatsToRef(t,e,s,r,i){const n=r.m,o=t*n[0]+e*n[4]+s*n[8]+n[12],a=t*n[1]+e*n[5]+s*n[9]+n[13],h=t*n[2]+e*n[6]+s*n[10]+n[14],l=1/(t*n[3]+e*n[7]+s*n[11]+n[15]);return i._x=o*l,i._y=a*l,i._z=h*l,i._isDirty=!0,i}static TransformNormal(t,e){const s=u.Zero();return u.TransformNormalToRef(t,e,s),s}static TransformNormalToRef(t,e,s){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,s),s}static TransformNormalFromFloatsToRef(t,e,s,r,i){const n=r.m;return i._x=t*n[0]+e*n[4]+s*n[8],i._y=t*n[1]+e*n[5]+s*n[9],i._z=t*n[2]+e*n[6]+s*n[10],i._isDirty=!0,i}static CatmullRom(t,e,s,r,i){const n=i*i,o=i*n,a=.5*(2*e._x+(-t._x+s._x)*i+(2*t._x-5*e._x+4*s._x-r._x)*n+(-t._x+3*e._x-3*s._x+r._x)*o),h=.5*(2*e._y+(-t._y+s._y)*i+(2*t._y-5*e._y+4*s._y-r._y)*n+(-t._y+3*e._y-3*s._y+r._y)*o),l=.5*(2*e._z+(-t._z+s._z)*i+(2*t._z-5*e._z+4*s._z-r._z)*n+(-t._z+3*e._z-3*s._z+r._z)*o);return new t.constructor(a,h,l)}static Clamp(t,e,s){const r=new t.constructor;return u.ClampToRef(t,e,s,r),r}static ClampToRef(t,e,s,r){let i=t._x;i=i>s._x?s._x:i,i=i<e._x?e._x:i;let n=t._y;n=n>s._y?s._y:n,n=n<e._y?e._y:n;let o=t._z;return o=o>s._z?s._z:o,o=o<e._z?e._z:o,r.copyFromFloats(i,n,o),r}static CheckExtends(t,e,s){e.minimizeInPlace(t),s.maximizeInPlace(t)}static Hermite(t,e,s,r,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,l=o-2*n+i,c=o-n,u=t._x*a+s._x*h+e._x*l+r._x*c,d=t._y*a+s._y*h+e._y*l+r._y*c,_=t._z*a+s._z*h+e._z*l+r._z*c;return new t.constructor(u,d,_)}static Hermite1stDerivative(t,e,s,r,i){const n=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,s,r,i,n),n}static Hermite1stDerivativeToRef(t,e,s,r,i,n){const o=i*i;return n._x=6*(o-i)*t._x+(3*o-4*i+1)*e._x+6*(-o+i)*s._x+(3*o-2*i)*r._x,n._y=6*(o-i)*t._y+(3*o-4*i+1)*e._y+6*(-o+i)*s._y+(3*o-2*i)*r._y,n._z=6*(o-i)*t._z+(3*o-4*i+1)*e._z+6*(-o+i)*s._z+(3*o-2*i)*r._z,n._isDirty=!0,n}static Lerp(t,e,s){const r=new t.constructor(0,0,0);return u.LerpToRef(t,e,s,r),r}static LerpToRef(t,e,s,r){return r._x=t._x+(e._x-t._x)*s,r._y=t._y+(e._y-t._y)*s,r._z=t._z+(e._z-t._z)*s,r._isDirty=!0,r}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}static Cross(t,e){const s=new t.constructor;return u.CrossToRef(t,e,s),s}static CrossToRef(t,e,s){const r=t._y*e._z-t._z*e._y,i=t._z*e._x-t._x*e._z,n=t._x*e._y-t._y*e._x;return s.copyFromFloats(r,i,n),s}static Normalize(t){const e=u.Zero();return u.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){return t.normalizeToRef(e),e}static Project(t,e,s,r){const i=new t.constructor;return u.ProjectToRef(t,e,s,r,i),i}static ProjectToRef(t,e,s,r,i){const n=r.width,o=r.height,a=r.x,h=r.y,l=f.Matrix[1];m.FromValuesToRef(n/2,0,0,0,0,-o/2,0,0,0,0,.5,0,a+n/2,o/2+h,.5,1,l);const c=f.Matrix[0];return e.multiplyToRef(s,c),c.multiplyToRef(l,c),u.TransformCoordinatesToRef(t,c,i),i}static Reflect(t,e){return this.ReflectToRef(t,e,new u)}static ReflectToRef(t,e,s){const r=p.Vector3[0];return r.copyFrom(e).scaleInPlace(2*u.Dot(t,e)),s.copyFrom(t).subtractInPlace(r)}static _UnprojectFromInvertedMatrixToRef(t,e,s){u.TransformCoordinatesToRef(t,e,s);const i=e.m,n=t._x*i[3]+t._y*i[7]+t._z*i[11]+i[15];return r.R.WithinEpsilon(n,1)&&s.scaleInPlace(1/n),s}static UnprojectFromTransform(t,e,s,r,i){return this.Unproject(t,e,s,r,i,m.IdentityReadOnly)}static Unproject(t,e,s,r,i,n){const o=new t.constructor;return u.UnprojectToRef(t,e,s,r,i,n,o),o}static UnprojectToRef(t,e,s,r,i,n,o){return u.UnprojectFloatsToRef(t._x,t._y,t._z,e,s,r,i,n,o),o}static UnprojectFloatsToRef(t,e,s,r,i,n,o,a,l){var c;const d=f.Matrix[0];n.multiplyToRef(o,d),d.multiplyToRef(a,d),d.invert();const _=f.Vector3[0];return _.x=t/r*2-1,_.y=-(e/i*2-1),(null===(c=h.l.LastCreatedEngine)||void 0===c?void 0:c.isNDCHalfZRange)?_.z=s:_.z=2*s-1,u._UnprojectFromInvertedMatrixToRef(_,d,l),l}static Minimize(t,e){const s=new t.constructor;return s.copyFrom(t),s.minimizeInPlace(e),s}static Maximize(t,e){const s=new t.constructor;return s.copyFrom(t),s.maximizeInPlace(e),s}static Distance(t,e){return Math.sqrt(u.DistanceSquared(t,e))}static DistanceSquared(t,e){const s=t._x-e._x,r=t._y-e._y,i=t._z-e._z;return s*s+r*r+i*i}static ProjectOnTriangleToRef(t,e,s,n,o){const a=f.Vector3[0],h=f.Vector3[1],l=f.Vector3[2],c=f.Vector3[3],d=f.Vector3[4];s.subtractToRef(e,a),n.subtractToRef(e,h),n.subtractToRef(s,l);const _=a.length(),m=h.length(),p=l.length();if(_<i.kn||m<i.kn||p<i.kn)return o.copyFrom(e),u.Distance(t,e);t.subtractToRef(e,d),u.CrossToRef(a,h,c);const y=c.length();if(y<i.kn)return o.copyFrom(e),u.Distance(t,e);c.normalizeFromLength(y);let x=d.length();if(x<i.kn)return o.copyFrom(e),0;d.normalizeFromLength(x);const g=u.Dot(c,d),b=f.Vector3[5],R=f.Vector3[6];b.copyFrom(c).scaleInPlace(-x*g),R.copyFrom(t).addInPlace(b);const P=f.Vector3[4],M=f.Vector3[5],T=f.Vector3[7],w=f.Vector3[8];P.copyFrom(a).scaleInPlace(1/_),w.copyFrom(h).scaleInPlace(1/m),P.addInPlace(w).scaleInPlace(-1),M.copyFrom(a).scaleInPlace(-1/_),w.copyFrom(l).scaleInPlace(1/p),M.addInPlace(w).scaleInPlace(-1),T.copyFrom(l).scaleInPlace(-1/p),w.copyFrom(h).scaleInPlace(-1/m),T.addInPlace(w).scaleInPlace(-1);const I=f.Vector3[9];let A;I.copyFrom(R).subtractInPlace(e),u.CrossToRef(P,I,w),A=u.Dot(w,c);const z=A;I.copyFrom(R).subtractInPlace(s),u.CrossToRef(M,I,w),A=u.Dot(w,c);const F=A;I.copyFrom(R).subtractInPlace(n),u.CrossToRef(T,I,w),A=u.Dot(w,c);const D=A,v=f.Vector3[10];let O,C;z>0&&F<0?(v.copyFrom(a),O=e,C=s):F>0&&D<0?(v.copyFrom(l),O=s,C=n):(v.copyFrom(h).scaleInPlace(-1),O=n,C=e);const S=f.Vector3[9],L=f.Vector3[4];O.subtractToRef(R,w),C.subtractToRef(R,S),u.CrossToRef(w,S,L);if(!(u.Dot(L,c)<0))return o.copyFrom(R),Math.abs(x*g);const V=f.Vector3[5];u.CrossToRef(v,L,V),V.normalize();const E=f.Vector3[9];E.copyFrom(O).subtractInPlace(R);const N=E.length();if(N<i.kn)return o.copyFrom(O),u.Distance(t,O);E.normalizeFromLength(N);const U=u.Dot(V,E),B=f.Vector3[7];B.copyFrom(R).addInPlace(V.scaleInPlace(N*U)),w.copyFrom(B).subtractInPlace(O),x=v.length(),v.normalizeFromLength(x);let j=u.Dot(w,v)/Math.max(x,i.kn);return j=r.R.Clamp(j,0,1),B.copyFrom(O).addInPlace(v.scaleInPlace(j*x)),o.copyFrom(B),u.Distance(t,B)}static Center(t,e){return u.CenterToRef(t,e,u.Zero())}static CenterToRef(t,e,s){return s.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}static RotationFromAxis(t,e,s){const r=new t.constructor;return u.RotationFromAxisToRef(t,e,s,r),r}static RotationFromAxisToRef(t,e,s,r){const i=f.Quaternion[0];return _.RotationQuaternionFromAxisToRef(t,e,s,i),i.toEulerAnglesToRef(r),r}}u._UpReadOnly=u.Up(),u._DownReadOnly=u.Down(),u._LeftHandedForwardReadOnly=u.Forward(!1),u._RightHandedForwardReadOnly=u.Forward(!0),u._RightReadOnly=u.Right(),u._LeftReadOnly=u.Left(),u._ZeroReadOnly=u.Zero();class d{constructor(t=0,e=0,s=0,r=0){this.x=t,this.y=e,this.z=s,this.w=r}toString(){return`{X: ${this.x} Y: ${this.y} Z: ${this.z} W: ${this.w}}`}getClassName(){return"Vector4"}getHashCode(){let t=l(this.x);return t=397*t^l(this.y),t=397*t^l(this.z),t=397*t^l(this.w),t}asArray(){const t=new Array;return this.toArray(t,0),t}toArray(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}fromArray(t,e=0){return d.FromArrayToRef(t,e,this),this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new this.constructor(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,e}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,e}subtractFromFloats(t,e,s,r){return new this.constructor(this.x-t,this.y-e,this.z-s,this.w-r)}subtractFromFloatsToRef(t,e,s,r,i){return i.x=this.x-t,i.y=this.y-e,i.z=this.z-s,i.w=this.w-r,i}negate(){return new this.constructor(-this.x,-this.y,-this.z,-this.w)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new this.constructor(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,e}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,e}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,e=i.kn){return t&&r.R.WithinEpsilon(this.x,t.x,e)&&r.R.WithinEpsilon(this.y,t.y,e)&&r.R.WithinEpsilon(this.z,t.z,e)&&r.R.WithinEpsilon(this.w,t.w,e)}equalsToFloats(t,e,s,r){return this.x===t&&this.y===e&&this.z===s&&this.w===r}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,e}multiplyByFloats(t,e,s,r){return new this.constructor(this.x*t,this.y*e,this.z*s,this.w*r)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,e}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new u(this.x,this.y,this.z)}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,s,r){return this.x=t,this.y=e,this.z=s,this.w=r,this}set(t,e,s,r){return this.copyFromFloats(t,e,s,r)}setAll(t){return this.x=this.y=this.z=this.w=t,this}static FromArray(t,e){return e||(e=0),new d(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,s){return s.x=t[e],s.y=t[e+1],s.z=t[e+2],s.w=t[e+3],s}static FromFloatArrayToRef(t,e,s){return d.FromArrayToRef(t,e,s),s}static FromFloatsToRef(t,e,s,r,i){return i.x=t,i.y=e,i.z=s,i.w=r,i}static Zero(){return new d(0,0,0,0)}static One(){return new d(1,1,1,1)}static Random(t=0,e=1){return new d(r.R.RandomRange(t,e),r.R.RandomRange(t,e),r.R.RandomRange(t,e),r.R.RandomRange(t,e))}static get ZeroReadOnly(){return d._ZeroReadOnly}static Normalize(t){const e=d.Zero();return d.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){return e.copyFrom(t),e.normalize(),e}static Minimize(t,e){const s=new t.constructor;return s.copyFrom(t),s.minimizeInPlace(e),s}static Maximize(t,e){const s=new t.constructor;return s.copyFrom(t),s.maximizeInPlace(e),s}static Distance(t,e){return Math.sqrt(d.DistanceSquared(t,e))}static DistanceSquared(t,e){const s=t.x-e.x,r=t.y-e.y,i=t.z-e.z,n=t.w-e.w;return s*s+r*r+i*i+n*n}static Center(t,e){return d.CenterToRef(t,e,d.Zero())}static CenterToRef(t,e,s){return s.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}static TransformCoordinates(t,e){const s=d.Zero();return d.TransformCoordinatesToRef(t,e,s),s}static TransformCoordinatesToRef(t,e,s){return d.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,s),s}static TransformCoordinatesFromFloatsToRef(t,e,s,r,i){const n=r.m,o=t*n[0]+e*n[4]+s*n[8]+n[12],a=t*n[1]+e*n[5]+s*n[9]+n[13],h=t*n[2]+e*n[6]+s*n[10]+n[14],l=t*n[3]+e*n[7]+s*n[11]+n[15];return i.x=o,i.y=a,i.z=h,i.w=l,i}static TransformNormal(t,e){const s=new t.constructor;return d.TransformNormalToRef(t,e,s),s}static TransformNormalToRef(t,e,s){const r=e.m,i=t.x*r[0]+t.y*r[4]+t.z*r[8],n=t.x*r[1]+t.y*r[5]+t.z*r[9],o=t.x*r[2]+t.y*r[6]+t.z*r[10];return s.x=i,s.y=n,s.z=o,s.w=t.w,s}static TransformNormalFromFloatsToRef(t,e,s,r,i,n){const o=i.m;return n.x=t*o[0]+e*o[4]+s*o[8],n.y=t*o[1]+e*o[5]+s*o[9],n.z=t*o[2]+e*o[6]+s*o[10],n.w=r,n}static FromVector3(t,e=0){return new d(t._x,t._y,t._z,e)}}d._ZeroReadOnly=d.Zero();class _{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}constructor(t=0,e=0,s=0,r=1){this._isDirty=!0,this._x=t,this._y=e,this._z=s,this._w=r}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Quaternion"}getHashCode(){let t=l(this._x);return t=397*t^l(this._y),t=397*t^l(this._z),t=397*t^l(this._w),t}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,this}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}equalsWithEpsilon(t,e=i.kn){return t&&r.R.WithinEpsilon(this._x,t._x,e)&&r.R.WithinEpsilon(this._y,t._y,e)&&r.R.WithinEpsilon(this._z,t._z,e)&&r.R.WithinEpsilon(this._w,t._w,e)}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copyFrom(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._isDirty=!0,this}copyFromFloats(t,e,s,r){return this._x=t,this._y=e,this._z=s,this._w=r,this._isDirty=!0,this}set(t,e,s,r){return this.copyFromFloats(t,e,s,r)}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,e){return e._x=this._x*t,e._y=this._y*t,e._z=this._z*t,e._w=this._w*t,e._isDirty=!0,e}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._isDirty=!0,this}scaleAndAddToRef(t,e){return e._x+=this._x*t,e._y+=this._y*t,e._z+=this._z*t,e._w+=this._w*t,e._isDirty=!0,e}multiply(t){const e=new this.constructor(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){const s=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,r=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,i=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,n=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(s,r,i,n),e}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}conjugateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}conjugate(){return new this.constructor(-this._x,-this._y,-this._z,this._w)}invert(){const t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}invertInPlace(){this.conjugateInPlace();const t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSquared())}normalize(){const t=this.length();if(0===t)return this;const e=1/t;return this.scaleInPlace(e),this}normalizeToNew(){const t=this.length();if(0===t)return this.clone();const e=1/t;return this.scale(e)}toEulerAngles(){const t=u.Zero();return this.toEulerAnglesToRef(t),t}toEulerAnglesToRef(t){const e=this._z,s=this._x,r=this._y,i=this._w,n=r*e-s*i,o=.4999999;if(n<-o)t._y=2*Math.atan2(r,i),t._x=Math.PI/2,t._z=0,t._isDirty=!0;else if(n>o)t._y=2*Math.atan2(r,i),t._x=-Math.PI/2,t._z=0,t._isDirty=!0;else{const o=i*i,a=e*e,h=s*s,l=r*r;t._z=Math.atan2(2*(s*r+e*i),-a-h+l+o),t._x=Math.asin(-2*n),t._y=Math.atan2(2*(e*s+r*i),a-h-l+o),t._isDirty=!0}return t}toRotationMatrix(t){return m.FromQuaternionToRef(this,t),t}fromRotationMatrix(t){return _.FromRotationMatrixToRef(t,this),this}static FromRotationMatrix(t){const e=new _;return _.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){const s=t.m,r=s[0],i=s[4],n=s[8],o=s[1],a=s[5],h=s[9],l=s[2],c=s[6],u=s[10],d=r+a+u;let _;return d>0?(_=.5/Math.sqrt(d+1),e._w=.25/_,e._x=(c-h)*_,e._y=(n-l)*_,e._z=(o-i)*_,e._isDirty=!0):r>a&&r>u?(_=2*Math.sqrt(1+r-a-u),e._w=(c-h)/_,e._x=.25*_,e._y=(i+o)/_,e._z=(n+l)/_,e._isDirty=!0):a>u?(_=2*Math.sqrt(1+a-r-u),e._w=(n-l)/_,e._x=(i+o)/_,e._y=.25*_,e._z=(h+c)/_,e._isDirty=!0):(_=2*Math.sqrt(1+u-r-a),e._w=(o-i)/_,e._x=(n+l)/_,e._y=(h+c)/_,e._z=.25*_,e._isDirty=!0),e}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}static AreClose(t,e,s=.1){const r=_.Dot(t,e);return 1-r*r<=s}static SmoothToRef(t,e,s,i,n){let o=0===i?1:s/i;return o=r.R.Clamp(o,0,1),_.SlerpToRef(t,e,o,n),n}static Zero(){return new _(0,0,0,0)}static Inverse(t){return new t.constructor(-t._x,-t._y,-t._z,t._w)}static InverseToRef(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}static Identity(){return new _(0,0,0,1)}static IsIdentity(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}static RotationAxis(t,e){return _.RotationAxisToRef(t,e,new _)}static RotationAxisToRef(t,e,s){const r=Math.sin(e/2);return t.normalize(),s._w=Math.cos(e/2),s._x=t._x*r,s._y=t._y*r,s._z=t._z*r,s._isDirty=!0,s}static FromArray(t,e){return e||(e=0),new _(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,s){return s._x=t[e],s._y=t[e+1],s._z=t[e+2],s._w=t[e+3],s._isDirty=!0,s}static FromEulerAngles(t,e,s){const r=new _;return _.RotationYawPitchRollToRef(e,t,s,r),r}static FromEulerAnglesToRef(t,e,s,r){return _.RotationYawPitchRollToRef(e,t,s,r),r}static FromEulerVector(t){const e=new _;return _.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromEulerVectorToRef(t,e){return _.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromUnitVectorsToRef(t,e,s){const r=u.Dot(t,e)+1;return r<i.kn?Math.abs(t.x)>Math.abs(t.z)?s.set(-t.y,t.x,0,0):s.set(0,-t.z,t.y,0):(u.CrossToRef(t,e,p.Vector3[0]),s.set(p.Vector3[0].x,p.Vector3[0].y,p.Vector3[0].z,r)),s.normalize()}static RotationYawPitchRoll(t,e,s){const r=new _;return _.RotationYawPitchRollToRef(t,e,s,r),r}static RotationYawPitchRollToRef(t,e,s,r){const i=.5*s,n=.5*e,o=.5*t,a=Math.sin(i),h=Math.cos(i),l=Math.sin(n),c=Math.cos(n),u=Math.sin(o),d=Math.cos(o);return r._x=d*l*h+u*c*a,r._y=u*c*h-d*l*a,r._z=d*c*a-u*l*h,r._w=d*c*h+u*l*a,r._isDirty=!0,r}static RotationAlphaBetaGamma(t,e,s){const r=new _;return _.RotationAlphaBetaGammaToRef(t,e,s,r),r}static RotationAlphaBetaGammaToRef(t,e,s,r){const i=.5*(s+t),n=.5*(s-t),o=.5*e;return r._x=Math.cos(n)*Math.sin(o),r._y=Math.sin(n)*Math.sin(o),r._z=Math.sin(i)*Math.cos(o),r._w=Math.cos(i)*Math.cos(o),r._isDirty=!0,r}static RotationQuaternionFromAxis(t,e,s){const r=new _(0,0,0,0);return _.RotationQuaternionFromAxisToRef(t,e,s,r),r}static RotationQuaternionFromAxisToRef(t,e,s,r){const i=f.Matrix[0];return m.FromXYZAxesToRef(t.normalize(),e.normalize(),s.normalize(),i),_.FromRotationMatrixToRef(i,r),r}static FromLookDirectionLH(t,e){const s=new _;return _.FromLookDirectionLHToRef(t,e,s),s}static FromLookDirectionLHToRef(t,e,s){const r=f.Matrix[0];return m.LookDirectionLHToRef(t,e,r),_.FromRotationMatrixToRef(r,s),s}static FromLookDirectionRH(t,e){const s=new _;return _.FromLookDirectionRHToRef(t,e,s),s}static FromLookDirectionRHToRef(t,e,s){const r=f.Matrix[0];return m.LookDirectionRHToRef(t,e,r),_.FromRotationMatrixToRef(r,s)}static Slerp(t,e,s){const r=_.Identity();return _.SlerpToRef(t,e,s,r),r}static SlerpToRef(t,e,s,r){let i,n,o=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,a=!1;if(o<0&&(a=!0,o=-o),o>.999999)n=1-s,i=a?-s:s;else{const t=Math.acos(o),e=1/Math.sin(t);n=Math.sin((1-s)*t)*e,i=a?-Math.sin(s*t)*e:Math.sin(s*t)*e}return r._x=n*t._x+i*e._x,r._y=n*t._y+i*e._y,r._z=n*t._z+i*e._z,r._w=n*t._w+i*e._w,r._isDirty=!0,r}static Hermite(t,e,s,r,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,l=o-2*n+i,c=o-n,u=t._x*a+s._x*h+e._x*l+r._x*c,d=t._y*a+s._y*h+e._y*l+r._y*c,_=t._z*a+s._z*h+e._z*l+r._z*c,m=t._w*a+s._w*h+e._w*l+r._w*c;return new t.constructor(u,d,_,m)}static Hermite1stDerivative(t,e,s,r,i){const n=new t.constructor;return this.Hermite1stDerivativeToRef(t,e,s,r,i,n),n}static Hermite1stDerivativeToRef(t,e,s,r,i,n){const o=i*i;return n._x=6*(o-i)*t._x+(3*o-4*i+1)*e._x+6*(-o+i)*s._x+(3*o-2*i)*r._x,n._y=6*(o-i)*t._y+(3*o-4*i+1)*e._y+6*(-o+i)*s._y+(3*o-2*i)*r._y,n._z=6*(o-i)*t._z+(3*o-4*i+1)*e._z+6*(-o+i)*s._z+(3*o-2*i)*r._z,n._w=6*(o-i)*t._w+(3*o-4*i+1)*e._w+6*(-o+i)*s._w+(3*o-2*i)*r._w,n._isDirty=!0,n}}class m{static get Use64Bits(){return a.Z.MatrixUse64Bits}get m(){return this._m}markAsUpdated(){this.updateFlag=m._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,e=!1,s=!1,r=!0){this._isIdentity=t,this._isIdentity3x2=t||s,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&r}constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,a.Z.MatrixTrackPrecisionChange&&a.Z.MatrixTrackedMatrices.push(this),this._m=new a.Z.MatrixCurrentType(16),this.markAsUpdated()}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],_=t[12],m=t[13],f=t[14],p=t[15],y=u*p-f*d,x=c*p-m*d,g=c*f-m*u,b=l*p-_*d,R=l*f-u*_,P=l*m-_*c;return e*+(o*y-a*x+h*g)+s*-(n*y-a*b+h*R)+r*+(n*x-o*b+h*P)+i*-(n*g-o*R+a*P)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return m.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){const e=new this.constructor;return this.addToRef(t,e),e}addToRef(t,e){const s=this._m,r=e._m,i=t.m;for(let t=0;t<16;t++)r[t]=s[t]+i[t];return e.markAsUpdated(),e}addToSelf(t){const e=this._m,s=t.m;for(let t=0;t<16;t++)e[t]+=s[t];return this.markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return m.IdentityToRef(t),t;const e=this._m,s=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],_=e[11],f=e[12],p=e[13],y=e[14],x=e[15],g=d*x-y*_,b=u*x-p*_,R=u*y-p*d,P=c*x-f*_,M=c*y-d*f,T=c*p-f*u,w=+(a*g-h*b+l*R),I=-(o*g-h*P+l*M),A=+(o*b-a*P+l*T),z=-(o*R-a*M+h*T),F=s*w+r*I+i*A+n*z;if(0===F)return t.copyFrom(this),t;const D=1/F,v=h*x-y*l,O=a*x-p*l,C=a*y-p*h,S=o*x-f*l,L=o*y-f*h,V=o*p-f*a,E=h*_-d*l,N=a*_-u*l,U=a*d-u*h,B=o*_-c*l,j=o*d-c*h,k=o*u-c*a,K=-(r*g-i*b+n*R),W=+(s*g-i*P+n*M),H=-(s*b-r*P+n*T),G=+(s*R-r*M+i*T),Z=+(r*v-i*O+n*C),Y=-(s*v-i*S+n*L),q=+(s*O-r*S+n*V),X=-(s*C-r*L+i*V),Q=-(r*E-i*N+n*U),$=+(s*E-i*B+n*j),J=-(s*N-r*B+n*k),tt=+(s*U-r*j+i*k);return m.FromValuesToRef(w*D,K*D,Z*D,Q*D,I*D,W*D,Y*D,$*D,A*D,H*D,q*D,J*D,z*D,G*D,X*D,tt*D,t),t}addAtIndex(t,e){return this._m[t]+=e,this.markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this.markAsUpdated(),this}setTranslationFromFloats(t,e,s){return this._m[12]=t,this._m[13]=e,this._m[14]=s,this.markAsUpdated(),this}addTranslationFromFloats(t,e,s){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=s,this.markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}getTranslation(){return new u(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}removeRotationAndScaling(){const t=this.m;return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){const e=new this.constructor;return this.multiplyToRef(t,e),e}copyFrom(t){t.copyToArray(this._m);const e=t;return this.updateFlag=e.updateFlag,this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}copyToArray(t,e=0){const s=this._m;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],this}multiplyToRef(t,e){return this._isIdentity?(e.copyFrom(t),e):t._isIdentity?(e.copyFrom(this),e):(this.multiplyToArray(t,e._m,0),e.markAsUpdated(),e)}multiplyToArray(t,e,s){const r=this._m,i=t.m,n=r[0],o=r[1],a=r[2],h=r[3],l=r[4],c=r[5],u=r[6],d=r[7],_=r[8],m=r[9],f=r[10],p=r[11],y=r[12],x=r[13],g=r[14],b=r[15],R=i[0],P=i[1],M=i[2],T=i[3],w=i[4],I=i[5],A=i[6],z=i[7],F=i[8],D=i[9],v=i[10],O=i[11],C=i[12],S=i[13],L=i[14],V=i[15];return e[s]=n*R+o*w+a*F+h*C,e[s+1]=n*P+o*I+a*D+h*S,e[s+2]=n*M+o*A+a*v+h*L,e[s+3]=n*T+o*z+a*O+h*V,e[s+4]=l*R+c*w+u*F+d*C,e[s+5]=l*P+c*I+u*D+d*S,e[s+6]=l*M+c*A+u*v+d*L,e[s+7]=l*T+c*z+u*O+d*V,e[s+8]=_*R+m*w+f*F+p*C,e[s+9]=_*P+m*I+f*D+p*S,e[s+10]=_*M+m*A+f*v+p*L,e[s+11]=_*T+m*z+f*O+p*V,e[s+12]=y*R+x*w+g*F+b*C,e[s+13]=y*P+x*I+g*D+b*S,e[s+14]=y*M+x*A+g*v+b*L,e[s+15]=y*T+x*z+g*O+b*V,this}equals(t){const e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;const s=this.m,r=e.m;return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&s[3]===r[3]&&s[4]===r[4]&&s[5]===r[5]&&s[6]===r[6]&&s[7]===r[7]&&s[8]===r[8]&&s[9]===r[9]&&s[10]===r[10]&&s[11]===r[11]&&s[12]===r[12]&&s[13]===r[13]&&s[14]===r[14]&&s[15]===r[15]}clone(){const t=new this.constructor;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=l(this._m[0]);for(let e=1;e<16;e++)t=397*t^l(this._m[e]);return t}decomposeToTransformNode(t){return t.rotationQuaternion=t.rotationQuaternion||new _,this.decompose(t.scaling,t.rotationQuaternion,t.position)}decompose(t,e,s,r){if(this._isIdentity)return s&&s.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;const i=this._m;if(s&&s.copyFromFloats(i[12],i[13],i[14]),(t=t||f.Vector3[0]).x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),t.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),t.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),r){const e=r.scaling.x<0?-1:1,s=r.scaling.y<0?-1:1,i=r.scaling.z<0?-1:1;t.x*=e,t.y*=s,t.z*=i}else this.determinant()<=0&&(t.y*=-1);if(0===t._x||0===t._y||0===t._z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){const s=1/t._x,r=1/t._y,n=1/t._z;m.FromValuesToRef(i[0]*s,i[1]*s,i[2]*s,0,i[4]*r,i[5]*r,i[6]*r,0,i[8]*n,i[9]*n,i[10]*n,0,0,0,0,1,f.Matrix[0]),_.FromRotationMatrixToRef(f.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;const e=4*t;return new d(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}getRowToRef(t,e){if(t>=0&&t<3){const s=4*t;e.x=this._m[s+0],e.y=this._m[s+1],e.z=this._m[s+2],e.w=this._m[s+3]}return e}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){const t=new this.constructor;return m.TransposeToRef(this,t),t}transposeToRef(t){return m.TransposeToRef(this,t),t}setRowFromFloats(t,e,s,r,i){if(t<0||t>3)return this;const n=4*t;return this._m[n+0]=e,this._m[n+1]=s,this._m[n+2]=r,this._m[n+3]=i,this.markAsUpdated(),this}scale(t){const e=new this.constructor;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(let s=0;s<16;s++)e._m[s]=this._m[s]*t;return e.markAsUpdated(),e}scaleAndAddToRef(t,e){for(let s=0;s<16;s++)e._m[s]+=this._m[s]*t;return e.markAsUpdated(),e}toNormalMatrix(t){const e=f.Matrix[0];this.invertToRef(e),e.transposeToRef(t);const s=t._m;return m.FromValuesToRef(s[0],s[1],s[2],0,s[4],s[5],s[6],0,s[8],s[9],s[10],0,0,0,0,1,t),t}getRotationMatrix(){const t=new this.constructor;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const e=f.Vector3[0];if(!this.decompose(e))return m.IdentityToRef(t),t;const s=this._m,r=1/e._x,i=1/e._y,n=1/e._z;return m.FromValuesToRef(s[0]*r,s[1]*r,s[2]*r,0,s[4]*i,s[5]*i,s[6]*i,0,s[8]*n,s[9]*n,s[10]*n,0,0,0,0,1,t),t}toggleModelMatrixHandInPlace(){const t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}toggleProjectionMatrixHandInPlace(){const t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}static FromArray(t,e=0){const s=new m;return m.FromArrayToRef(t,e,s),s}static FromArrayToRef(t,e,s){for(let r=0;r<16;r++)s._m[r]=t[r+e];return s.markAsUpdated(),s}static FromFloat32ArrayToRefScaled(t,e,s,r){for(let i=0;i<16;i++)r._m[i]=t[i+e]*s;return r.markAsUpdated(),r}static get IdentityReadOnly(){return m._IdentityReadOnly}static FromValuesToRef(t,e,s,r,i,n,o,a,h,l,c,u,d,_,m,f,p){const y=p._m;y[0]=t,y[1]=e,y[2]=s,y[3]=r,y[4]=i,y[5]=n,y[6]=o,y[7]=a,y[8]=h,y[9]=l,y[10]=c,y[11]=u,y[12]=d,y[13]=_,y[14]=m,y[15]=f,p.markAsUpdated()}static FromValues(t,e,s,r,i,n,o,a,h,l,c,u,d,_,f,p){const y=new m,x=y._m;return x[0]=t,x[1]=e,x[2]=s,x[3]=r,x[4]=i,x[5]=n,x[6]=o,x[7]=a,x[8]=h,x[9]=l,x[10]=c,x[11]=u,x[12]=d,x[13]=_,x[14]=f,x[15]=p,y.markAsUpdated(),y}static Compose(t,e,s){const r=new m;return m.ComposeToRef(t,e,s,r),r}static ComposeToRef(t,e,s,r){const i=r._m,n=e._x,o=e._y,a=e._z,h=e._w,l=n+n,c=o+o,u=a+a,d=n*l,_=n*c,m=n*u,f=o*c,p=o*u,y=a*u,x=h*l,g=h*c,b=h*u,R=t._x,P=t._y,M=t._z;return i[0]=(1-(f+y))*R,i[1]=(_+b)*R,i[2]=(m-g)*R,i[3]=0,i[4]=(_-b)*P,i[5]=(1-(d+y))*P,i[6]=(p+x)*P,i[7]=0,i[8]=(m+g)*M,i[9]=(p-x)*M,i[10]=(1-(d+f))*M,i[11]=0,i[12]=s._x,i[13]=s._y,i[14]=s._z,i[15]=1,r.markAsUpdated(),r}static Identity(){const t=m.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0),t}static Zero(){const t=m.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){const e=new m;return m.RotationXToRef(t,e),e}static Invert(t){const e=new t.constructor;return t.invertToRef(e),e}static RotationXToRef(t,e){const s=Math.sin(t),r=Math.cos(t);return m.FromValuesToRef(1,0,0,0,0,r,s,0,0,-s,r,0,0,0,0,1,e),e._updateIdentityStatus(1===r&&0===s),e}static RotationY(t){const e=new m;return m.RotationYToRef(t,e),e}static RotationYToRef(t,e){const s=Math.sin(t),r=Math.cos(t);return m.FromValuesToRef(r,0,-s,0,0,1,0,0,s,0,r,0,0,0,0,1,e),e._updateIdentityStatus(1===r&&0===s),e}static RotationZ(t){const e=new m;return m.RotationZToRef(t,e),e}static RotationZToRef(t,e){const s=Math.sin(t),r=Math.cos(t);return m.FromValuesToRef(r,s,0,0,-s,r,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===r&&0===s),e}static RotationAxis(t,e){const s=new m;return m.RotationAxisToRef(t,e,s),s}static RotationAxisToRef(t,e,s){const r=Math.sin(-e),i=Math.cos(-e),n=1-i;t.normalize();const o=s._m;return o[0]=t._x*t._x*n+i,o[1]=t._x*t._y*n-t._z*r,o[2]=t._x*t._z*n+t._y*r,o[3]=0,o[4]=t._y*t._x*n+t._z*r,o[5]=t._y*t._y*n+i,o[6]=t._y*t._z*n-t._x*r,o[7]=0,o[8]=t._z*t._x*n-t._y*r,o[9]=t._z*t._y*n+t._x*r,o[10]=t._z*t._z*n+i,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,s.markAsUpdated(),s}static RotationAlignToRef(t,e,s){const r=u.Dot(e,t),n=s._m;if(r<-1+i.kn)n[0]=-1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0;else{const s=u.Cross(e,t),i=1/(1+r);n[0]=s._x*s._x*i+r,n[1]=s._y*s._x*i-s._z,n[2]=s._z*s._x*i+s._y,n[3]=0,n[4]=s._x*s._y*i+s._z,n[5]=s._y*s._y*i+r,n[6]=s._z*s._y*i-s._x,n[7]=0,n[8]=s._x*s._z*i-s._y,n[9]=s._y*s._z*i+s._x,n[10]=s._z*s._z*i+r,n[11]=0}return n[12]=0,n[13]=0,n[14]=0,n[15]=1,s.markAsUpdated(),s}static RotationYawPitchRoll(t,e,s){const r=new m;return m.RotationYawPitchRollToRef(t,e,s,r),r}static RotationYawPitchRollToRef(t,e,s,r){return _.RotationYawPitchRollToRef(t,e,s,f.Quaternion[0]),f.Quaternion[0].toRotationMatrix(r),r}static Scaling(t,e,s){const r=new m;return m.ScalingToRef(t,e,s,r),r}static ScalingToRef(t,e,s,r){return m.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1,r),r._updateIdentityStatus(1===t&&1===e&&1===s),r}static Translation(t,e,s){const r=new m;return m.TranslationToRef(t,e,s,r),r}static TranslationToRef(t,e,s,r){return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1,r),r._updateIdentityStatus(0===t&&0===e&&0===s),r}static Lerp(t,e,s){const r=new t.constructor;return m.LerpToRef(t,e,s,r),r}static LerpToRef(t,e,s,r){const i=r._m,n=t.m,o=e.m;for(let t=0;t<16;t++)i[t]=n[t]*(1-s)+o[t]*s;return r.markAsUpdated(),r}static DecomposeLerp(t,e,s){const r=new t.constructor;return m.DecomposeLerpToRef(t,e,s,r),r}static DecomposeLerpToRef(t,e,s,r){const i=f.Vector3[0],n=f.Quaternion[0],o=f.Vector3[1];t.decompose(i,n,o);const a=f.Vector3[2],h=f.Quaternion[1],l=f.Vector3[3];e.decompose(a,h,l);const c=f.Vector3[4];u.LerpToRef(i,a,s,c);const d=f.Quaternion[2];_.SlerpToRef(n,h,s,d);const p=f.Vector3[5];return u.LerpToRef(o,l,s,p),m.ComposeToRef(c,d,p,r),r}static LookAtLH(t,e,s){const r=new m;return m.LookAtLHToRef(t,e,s,r),r}static LookAtLHToRef(t,e,s,r){const i=f.Vector3[0],n=f.Vector3[1],o=f.Vector3[2];e.subtractToRef(t,o),o.normalize(),u.CrossToRef(s,o,i);const a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),u.CrossToRef(o,i,n),n.normalize();const h=-u.Dot(i,t),l=-u.Dot(n,t),c=-u.Dot(o,t);m.FromValuesToRef(i._x,n._x,o._x,0,i._y,n._y,o._y,0,i._z,n._z,o._z,0,h,l,c,1,r)}static LookAtRH(t,e,s){const r=new m;return m.LookAtRHToRef(t,e,s,r),r}static LookAtRHToRef(t,e,s,r){const i=f.Vector3[0],n=f.Vector3[1],o=f.Vector3[2];t.subtractToRef(e,o),o.normalize(),u.CrossToRef(s,o,i);const a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),u.CrossToRef(o,i,n),n.normalize();const h=-u.Dot(i,t),l=-u.Dot(n,t),c=-u.Dot(o,t);return m.FromValuesToRef(i._x,n._x,o._x,0,i._y,n._y,o._y,0,i._z,n._z,o._z,0,h,l,c,1,r),r}static LookDirectionLH(t,e){const s=new m;return m.LookDirectionLHToRef(t,e,s),s}static LookDirectionLHToRef(t,e,s){const r=f.Vector3[0];r.copyFrom(t),r.scaleInPlace(-1);const i=f.Vector3[1];return u.CrossToRef(e,r,i),m.FromValuesToRef(i._x,i._y,i._z,0,e._x,e._y,e._z,0,r._x,r._y,r._z,0,0,0,0,1,s),s}static LookDirectionRH(t,e){const s=new m;return m.LookDirectionRHToRef(t,e,s),s}static LookDirectionRHToRef(t,e,s){const r=f.Vector3[2];return u.CrossToRef(e,t,r),m.FromValuesToRef(r._x,r._y,r._z,0,e._x,e._y,e._z,0,t._x,t._y,t._z,0,0,0,0,1,s),s}static OrthoLH(t,e,s,r,i){const n=new m;return m.OrthoLHToRef(t,e,s,r,n,i),n}static OrthoLHToRef(t,e,s,r,i,n){const o=2/t,a=2/e,h=2/(r-s),l=-(r+s)/(r-s);return m.FromValuesToRef(o,0,0,0,0,a,0,0,0,0,h,0,0,0,l,1,i),n&&i.multiplyToRef(y,i),i._updateIdentityStatus(1===o&&1===a&&1===h&&0===l),i}static OrthoOffCenterLH(t,e,s,r,i,n,o){const a=new m;return m.OrthoOffCenterLHToRef(t,e,s,r,i,n,a,o),a}static OrthoOffCenterLHToRef(t,e,s,r,i,n,o,a){const h=2/(e-t),l=2/(r-s),c=2/(n-i),u=-(n+i)/(n-i),d=(t+e)/(t-e),_=(r+s)/(s-r);return m.FromValuesToRef(h,0,0,0,0,l,0,0,0,0,c,0,d,_,u,1,o),a&&o.multiplyToRef(y,o),o.markAsUpdated(),o}static OrthoOffCenterRH(t,e,s,r,i,n,o){const a=new m;return m.OrthoOffCenterRHToRef(t,e,s,r,i,n,a,o),a}static OrthoOffCenterRHToRef(t,e,s,r,i,n,o,a){return m.OrthoOffCenterLHToRef(t,e,s,r,i,n,o,a),o._m[10]*=-1,o}static PerspectiveLH(t,e,s,r,i,n=0){const o=new m,a=2*s/t,h=2*s/e,l=(r+s)/(r-s),c=-2*r*s/(r-s),u=Math.tan(n);return m.FromValuesToRef(a,0,0,0,0,h,0,u,0,0,l,1,0,0,c,0,o),i&&o.multiplyToRef(y,o),o._updateIdentityStatus(!1),o}static PerspectiveFovLH(t,e,s,r,i,n=0,o=!1){const a=new m;return m.PerspectiveFovLHToRef(t,e,s,r,a,!0,i,n,o),a}static PerspectiveFovLHToRef(t,e,s,r,i,n=!0,o,a=0,h=!1){const l=s,c=r,u=1/Math.tan(.5*t),d=n?u/e:u,_=n?u:u*e,f=h&&0===l?-1:0!==c?(c+l)/(c-l):1,p=h&&0===l?2*c:0!==c?-2*c*l/(c-l):-2*l,x=Math.tan(a);return m.FromValuesToRef(d,0,0,0,0,_,0,x,0,0,f,1,0,0,p,0,i),o&&i.multiplyToRef(y,i),i._updateIdentityStatus(!1),i}static PerspectiveFovReverseLHToRef(t,e,s,r,i,n=!0,o,a=0){const h=1/Math.tan(.5*t),l=n?h/e:h,c=n?h:h*e,u=Math.tan(a);return m.FromValuesToRef(l,0,0,0,0,c,0,u,0,0,-s,1,0,0,1,0,i),o&&i.multiplyToRef(y,i),i._updateIdentityStatus(!1),i}static PerspectiveFovRH(t,e,s,r,i,n=0,o=!1){const a=new m;return m.PerspectiveFovRHToRef(t,e,s,r,a,!0,i,n,o),a}static PerspectiveFovRHToRef(t,e,s,r,i,n=!0,o,a=0,h=!1){const l=s,c=r,u=1/Math.tan(.5*t),d=n?u/e:u,_=n?u:u*e,f=h&&0===l?1:0!==c?-(c+l)/(c-l):-1,p=h&&0===l?2*c:0!==c?-2*c*l/(c-l):-2*l,x=Math.tan(a);return m.FromValuesToRef(d,0,0,0,0,_,0,x,0,0,f,-1,0,0,p,0,i),o&&i.multiplyToRef(y,i),i._updateIdentityStatus(!1),i}static PerspectiveFovReverseRHToRef(t,e,s,r,i,n=!0,o,a=0){const h=1/Math.tan(.5*t),l=n?h/e:h,c=n?h:h*e,u=Math.tan(a);return m.FromValuesToRef(l,0,0,0,0,c,0,u,0,0,-s,-1,0,0,-1,0,i),o&&i.multiplyToRef(y,i),i._updateIdentityStatus(!1),i}static PerspectiveFovWebVRToRef(t,e,s,r,i=!1,n,o=0){const a=i?-1:1,h=Math.tan(t.upDegrees*Math.PI/180),l=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),d=2/(c+u),_=2/(h+l),m=Math.tan(o),f=r._m;return f[0]=d,f[1]=f[2]=f[3]=f[4]=0,f[5]=_,f[6]=0,f[7]=m,f[8]=(c-u)*d*.5,f[9]=-(h-l)*_*.5,f[10]=-s/(e-s),f[11]=1*a,f[12]=f[13]=f[15]=0,f[14]=-2*s*e/(s-e),n&&r.multiplyToRef(y,r),r.markAsUpdated(),r}static GetFinalMatrix(t,e,s,r,i,n){const o=t.width,a=t.height,h=t.x,l=t.y,c=m.FromValues(o/2,0,0,0,0,-a/2,0,0,0,0,n-i,0,h+o/2,a/2+l,i,1),u=new e.constructor;return e.multiplyToRef(s,u),u.multiplyToRef(r,u),u.multiplyToRef(c,u)}static GetAsMatrix2x2(t){const e=t.m,s=[e[0],e[1],e[4],e[5]];return a.Z.MatrixUse64Bits?s:new Float32Array(s)}static GetAsMatrix3x3(t){const e=t.m,s=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return a.Z.MatrixUse64Bits?s:new Float32Array(s)}static Transpose(t){const e=new t.constructor;return m.TransposeToRef(t,e),e}static TransposeToRef(t,e){const s=e._m,r=t.m;return s[0]=r[0],s[1]=r[4],s[2]=r[8],s[3]=r[12],s[4]=r[1],s[5]=r[5],s[6]=r[9],s[7]=r[13],s[8]=r[2],s[9]=r[6],s[10]=r[10],s[11]=r[14],s[12]=r[3],s[13]=r[7],s[14]=r[11],s[15]=r[15],e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),e}static Reflection(t){const e=new m;return m.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();const s=t.normal.x,r=t.normal.y,i=t.normal.z,n=-2*s,o=-2*r,a=-2*i;return m.FromValuesToRef(n*s+1,o*s,a*s,0,n*r,o*r+1,a*r,0,n*i,o*i,a*i+1,0,n*t.d,o*t.d,a*t.d,1,e),e}static FromXYZAxesToRef(t,e,s,r){return m.FromValuesToRef(t._x,t._y,t._z,0,e._x,e._y,e._z,0,s._x,s._y,s._z,0,0,0,0,1,r),r}static FromQuaternionToRef(t,e){const s=t._x*t._x,r=t._y*t._y,i=t._z*t._z,n=t._x*t._y,o=t._z*t._w,a=t._z*t._x,h=t._y*t._w,l=t._y*t._z,c=t._x*t._w;return e._m[0]=1-2*(r+i),e._m[1]=2*(n+o),e._m[2]=2*(a-h),e._m[3]=0,e._m[4]=2*(n-o),e._m[5]=1-2*(i+s),e._m[6]=2*(l+c),e._m[7]=0,e._m[8]=2*(a+h),e._m[9]=2*(l-c),e._m[10]=1-2*(r+s),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated(),e}}m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity();class f{}f.Vector3=n.B.BuildTuple(11,u.Zero),f.Matrix=n.B.BuildTuple(2,m.Identity),f.Quaternion=n.B.BuildTuple(3,_.Zero);class p{}p.Vector2=n.B.BuildTuple(3,c.Zero),p.Vector3=n.B.BuildTuple(13,u.Zero),p.Vector4=n.B.BuildTuple(3,d.Zero),p.Quaternion=n.B.BuildTuple(2,_.Zero),p.Matrix=n.B.BuildTuple(8,m.Identity),(0,o.H)("BABYLON.Vector2",c),(0,o.H)("BABYLON.Vector3",u),(0,o.H)("BABYLON.Vector4",d),(0,o.H)("BABYLON.Matrix",m);const y=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)},66513:(t,e,s)=>{s.d(e,{l:()=>r});class r{constructor(t,e,s,r){this.x=t,this.y=e,this.width=s,this.height=r}toGlobal(t,e){return new r(this.x*t,this.y*e,this.width*t,this.height*e)}toGlobalToRef(t,e,s){return s.x=this.x*t,s.y=this.y*e,s.width=this.width*t,s.height=this.height*e,this}clone(){return new r(this.x,this.y,this.width,this.height)}}},69314:(t,e,s)=>{s.d(e,{_:()=>l,i:()=>c});var r=s(58095),i=s(34389);const n=[Math.sqrt(1/(4*Math.PI)),-Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),-Math.sqrt(3/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),-Math.sqrt(15/(4*Math.PI)),Math.sqrt(5/(16*Math.PI)),-Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(16*Math.PI))],o=[()=>1,t=>t.y,t=>t.z,t=>t.x,t=>t.x*t.y,t=>t.y*t.z,t=>3*t.z*t.z-1,t=>t.x*t.z,t=>t.x*t.x-t.y*t.y],a=(t,e)=>n[t]*o[t](e),h=[Math.PI,2*Math.PI/3,2*Math.PI/3,2*Math.PI/3,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4];class l{constructor(){this.preScaled=!1,this.l00=r.P.Zero(),this.l1_1=r.P.Zero(),this.l10=r.P.Zero(),this.l11=r.P.Zero(),this.l2_2=r.P.Zero(),this.l2_1=r.P.Zero(),this.l20=r.P.Zero(),this.l21=r.P.Zero(),this.l22=r.P.Zero()}addLight(t,e,s){i.jp.Vector3[0].set(e.r,e.g,e.b);const r=i.jp.Vector3[0],n=i.jp.Vector3[1];r.scaleToRef(s,n),n.scaleToRef(a(0,t),i.jp.Vector3[2]),this.l00.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(1,t),i.jp.Vector3[2]),this.l1_1.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(2,t),i.jp.Vector3[2]),this.l10.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(3,t),i.jp.Vector3[2]),this.l11.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(4,t),i.jp.Vector3[2]),this.l2_2.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(5,t),i.jp.Vector3[2]),this.l2_1.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(6,t),i.jp.Vector3[2]),this.l20.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(7,t),i.jp.Vector3[2]),this.l21.addInPlace(i.jp.Vector3[2]),n.scaleToRef(a(8,t),i.jp.Vector3[2]),this.l22.addInPlace(i.jp.Vector3[2])}scaleInPlace(t){this.l00.scaleInPlace(t),this.l1_1.scaleInPlace(t),this.l10.scaleInPlace(t),this.l11.scaleInPlace(t),this.l2_2.scaleInPlace(t),this.l2_1.scaleInPlace(t),this.l20.scaleInPlace(t),this.l21.scaleInPlace(t),this.l22.scaleInPlace(t)}convertIncidentRadianceToIrradiance(){this.l00.scaleInPlace(h[0]),this.l1_1.scaleInPlace(h[1]),this.l10.scaleInPlace(h[2]),this.l11.scaleInPlace(h[3]),this.l2_2.scaleInPlace(h[4]),this.l2_1.scaleInPlace(h[5]),this.l20.scaleInPlace(h[6]),this.l21.scaleInPlace(h[7]),this.l22.scaleInPlace(h[8])}convertIrradianceToLambertianRadiance(){this.scaleInPlace(1/Math.PI)}preScaleForRendering(){this.preScaled=!0,this.l00.scaleInPlace(n[0]),this.l1_1.scaleInPlace(n[1]),this.l10.scaleInPlace(n[2]),this.l11.scaleInPlace(n[3]),this.l2_2.scaleInPlace(n[4]),this.l2_1.scaleInPlace(n[5]),this.l20.scaleInPlace(n[6]),this.l21.scaleInPlace(n[7]),this.l22.scaleInPlace(n[8])}updateFromArray(t){return r.P.FromArrayToRef(t[0],0,this.l00),r.P.FromArrayToRef(t[1],0,this.l1_1),r.P.FromArrayToRef(t[2],0,this.l10),r.P.FromArrayToRef(t[3],0,this.l11),r.P.FromArrayToRef(t[4],0,this.l2_2),r.P.FromArrayToRef(t[5],0,this.l2_1),r.P.FromArrayToRef(t[6],0,this.l20),r.P.FromArrayToRef(t[7],0,this.l21),r.P.FromArrayToRef(t[8],0,this.l22),this}updateFromFloatsArray(t){return r.P.FromFloatsToRef(t[0],t[1],t[2],this.l00),r.P.FromFloatsToRef(t[3],t[4],t[5],this.l1_1),r.P.FromFloatsToRef(t[6],t[7],t[8],this.l10),r.P.FromFloatsToRef(t[9],t[10],t[11],this.l11),r.P.FromFloatsToRef(t[12],t[13],t[14],this.l2_2),r.P.FromFloatsToRef(t[15],t[16],t[17],this.l2_1),r.P.FromFloatsToRef(t[18],t[19],t[20],this.l20),r.P.FromFloatsToRef(t[21],t[22],t[23],this.l21),r.P.FromFloatsToRef(t[24],t[25],t[26],this.l22),this}static FromArray(t){return(new l).updateFromArray(t)}static FromPolynomial(t){const e=new l;return e.l00=t.xx.scale(.376127).add(t.yy.scale(.376127)).add(t.zz.scale(.376126)),e.l1_1=t.y.scale(.977204),e.l10=t.z.scale(.977204),e.l11=t.x.scale(.977204),e.l2_2=t.xy.scale(1.16538),e.l2_1=t.yz.scale(1.16538),e.l20=t.zz.scale(1.34567).subtract(t.xx.scale(.672834)).subtract(t.yy.scale(.672834)),e.l21=t.zx.scale(1.16538),e.l22=t.xx.scale(1.16538).subtract(t.yy.scale(1.16538)),e.l1_1.scaleInPlace(-1),e.l11.scaleInPlace(-1),e.l2_1.scaleInPlace(-1),e.l21.scaleInPlace(-1),e.scaleInPlace(Math.PI),e}}class c{constructor(){this.x=r.P.Zero(),this.y=r.P.Zero(),this.z=r.P.Zero(),this.xx=r.P.Zero(),this.yy=r.P.Zero(),this.zz=r.P.Zero(),this.xy=r.P.Zero(),this.yz=r.P.Zero(),this.zx=r.P.Zero()}get preScaledHarmonics(){return this._harmonics||(this._harmonics=l.FromPolynomial(this)),this._harmonics.preScaled||this._harmonics.preScaleForRendering(),this._harmonics}addAmbient(t){i.jp.Vector3[0].copyFromFloats(t.r,t.g,t.b);const e=i.jp.Vector3[0];this.xx.addInPlace(e),this.yy.addInPlace(e),this.zz.addInPlace(e)}scaleInPlace(t){this.x.scaleInPlace(t),this.y.scaleInPlace(t),this.z.scaleInPlace(t),this.xx.scaleInPlace(t),this.yy.scaleInPlace(t),this.zz.scaleInPlace(t),this.yz.scaleInPlace(t),this.zx.scaleInPlace(t),this.xy.scaleInPlace(t)}updateFromHarmonics(t){return this._harmonics=t,this.x.copyFrom(t.l11),this.x.scaleInPlace(1.02333).scaleInPlace(-1),this.y.copyFrom(t.l1_1),this.y.scaleInPlace(1.02333).scaleInPlace(-1),this.z.copyFrom(t.l10),this.z.scaleInPlace(1.02333),this.xx.copyFrom(t.l00),i.jp.Vector3[0].copyFrom(t.l20).scaleInPlace(.247708),i.jp.Vector3[1].copyFrom(t.l22).scaleInPlace(.429043),this.xx.scaleInPlace(.886277).subtractInPlace(i.jp.Vector3[0]).addInPlace(i.jp.Vector3[1]),this.yy.copyFrom(t.l00),this.yy.scaleInPlace(.886277).subtractInPlace(i.jp.Vector3[0]).subtractInPlace(i.jp.Vector3[1]),this.zz.copyFrom(t.l00),i.jp.Vector3[0].copyFrom(t.l20).scaleInPlace(.495417),this.zz.scaleInPlace(.886277).addInPlace(i.jp.Vector3[0]),this.yz.copyFrom(t.l2_1),this.yz.scaleInPlace(.858086).scaleInPlace(-1),this.zx.copyFrom(t.l21),this.zx.scaleInPlace(.858086).scaleInPlace(-1),this.xy.copyFrom(t.l2_2),this.xy.scaleInPlace(.858086),this.scaleInPlace(1/Math.PI),this}static FromHarmonics(t){return(new c).updateFromHarmonics(t)}static FromArray(t){const e=new c;return r.P.FromArrayToRef(t[0],0,e.x),r.P.FromArrayToRef(t[1],0,e.y),r.P.FromArrayToRef(t[2],0,e.z),r.P.FromArrayToRef(t[3],0,e.xx),r.P.FromArrayToRef(t[4],0,e.yy),r.P.FromArrayToRef(t[5],0,e.zz),r.P.FromArrayToRef(t[6],0,e.yz),r.P.FromArrayToRef(t[7],0,e.zx),r.P.FromArrayToRef(t[8],0,e.xy),e}}},8451:(t,e,s)=>{s.d(e,{NR:()=>l,aR:()=>h});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(47884);function h(t){let e=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];const s=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],n=[];let h=[];const l=t.width||t.size||1,c=t.height||t.size||1,u=t.depth||t.size||1,d=t.wrap||!1;let _=void 0===t.topBaseAt?1:t.topBaseAt,m=void 0===t.bottomBaseAt?0:t.bottomBaseAt;_=(_+4)%4,m=(m+4)%4;let f=[2,0,3,1][_],p=[2,0,1,3][m],y=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1];if(d){e=[2,3,0,2,0,1,4,5,6,4,6,7,9,10,11,9,11,8,12,14,15,12,13,14],y=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1];let t=[[1,1,1],[-1,1,1],[-1,1,-1],[1,1,-1]],s=[[-1,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1]];const r=[17,18,19,16],i=[22,23,20,21];for(;f>0;)t.unshift(t.pop()),r.unshift(r.pop()),f--;for(;p>0;)s.unshift(s.pop()),i.unshift(i.pop()),p--;t=t.flat(),s=s.flat(),y=y.concat(t).concat(s),e.push(r[0],r[2],r[3],r[0],r[1],r[2]),e.push(i[0],i[2],i[3],i[0],i[1],i[2])}const x=[l/2,c/2,u/2];h=y.reduce(((t,e,s)=>t.concat(e*x[s%3])),[]);const g=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,b=t.faceUV||new Array(6),R=t.faceColors,P=[];for(let t=0;t<6;t++)void 0===b[t]&&(b[t]=new r.Lt(0,0,1,1)),R&&void 0===R[t]&&(R[t]=new i.HE(1,1,1,1));for(let t=0;t<6;t++)if(n.push(b[t].z,a.e.UseOpenGLOrientationForUV?1-b[t].w:b[t].w),n.push(b[t].x,a.e.UseOpenGLOrientationForUV?1-b[t].w:b[t].w),n.push(b[t].x,a.e.UseOpenGLOrientationForUV?1-b[t].y:b[t].y),n.push(b[t].z,a.e.UseOpenGLOrientationForUV?1-b[t].y:b[t].y),R)for(let e=0;e<4;e++)P.push(R[t].r,R[t].g,R[t].b,R[t].a);o.x._ComputeSides(g,h,e,s,n,t.frontUVs,t.backUVs);const M=new o.x;if(M.indices=e,M.positions=h,M.normals=s,M.uvs=n,R){const t=g===o.x.DOUBLESIDE?P.concat(P):P;M.colors=t}return M}function l(t,e={},s=null){const r=new n.Kj(t,s);e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return h(e).applyToMesh(r,e.updatable),r}o.x.CreateBox=h,n.Kj.CreateBox=(t,e,s=null,r,i)=>l(t,{size:e,sideOrientation:i,updatable:r},s)},6588:(t,e,s)=>{s.d(e,{VF:()=>a,iz:()=>h});var r=s(89209),i=s(58095),n=s(91243),o=s(47884);function a(t={subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6}){const e=Math.max(t.subdivisions?t.subdivisions:2,1),s=Math.max(t.tessellation?t.tessellation:16,3),n=Math.max(t.height?t.height:1,0),a=Math.max(t.radius?t.radius:.25,0),h=Math.max(t.capSubdivisions?t.capSubdivisions:6,1),l=s,c=e,u=Math.max(t.radiusTop?t.radiusTop:a,0),d=Math.max(t.radiusBottom?t.radiusBottom:a,0),_=n-(u+d),m=2*Math.PI,f=Math.max(t.topCapSubdivisions?t.topCapSubdivisions:h,1),p=Math.max(t.bottomCapSubdivisions?t.bottomCapSubdivisions:h,1),y=Math.acos((d-u)/n);let x=[];const g=[],b=[],R=[];let P=0;const M=[],T=.5*_,w=.5*Math.PI;let I,A;const z=i.P.Zero(),F=i.P.Zero(),D=Math.cos(y),v=Math.sin(y),O=new i.FM(u*v,T+u*D).subtract(new i.FM(d*v,d*D-T)).length(),C=u*y+O+d*(w-y);let S=0;for(A=0;A<=f;A++){const t=[],e=w-y*(A/f);S+=u*y/f;const s=Math.cos(e),r=Math.sin(e),i=s*u;for(I=0;I<=l;I++){const e=I/l,n=e*m+0,a=Math.sin(n),h=Math.cos(n);F.x=i*a,F.y=T+r*u,F.z=i*h,g.push(F.x,F.y,F.z),z.set(s*a,r,s*h),b.push(z.x,z.y,z.z),R.push(e,o.e.UseOpenGLOrientationForUV?S/C:1-S/C),t.push(P),P++}M.push(t)}const L=n-u-d+D*u-D*d,V=v*(d-u)/L;for(A=1;A<=c;A++){const t=[];S+=O/c;const e=v*(A*(d-u)/c+u);for(I=0;I<=l;I++){const s=I/l,r=s*m+0,i=Math.sin(r),n=Math.cos(r);F.x=e*i,F.y=T+D*u-A*L/c,F.z=e*n,g.push(F.x,F.y,F.z),z.set(i,V,n).normalize(),b.push(z.x,z.y,z.z),R.push(s,o.e.UseOpenGLOrientationForUV?S/C:1-S/C),t.push(P),P++}M.push(t)}for(A=1;A<=p;A++){const t=[],e=w-y-(Math.PI-y)*(A/p);S+=d*y/p;const s=Math.cos(e),r=Math.sin(e),i=s*d;for(I=0;I<=l;I++){const e=I/l,n=e*m+0,a=Math.sin(n),h=Math.cos(n);F.x=i*a,F.y=r*d-T,F.z=i*h,g.push(F.x,F.y,F.z),z.set(s*a,r,s*h),b.push(z.x,z.y,z.z),R.push(e,o.e.UseOpenGLOrientationForUV?S/C:1-S/C),t.push(P),P++}M.push(t)}for(I=0;I<l;I++)for(A=0;A<f+c+p;A++){const t=M[A][I],e=M[A+1][I],s=M[A+1][I+1],r=M[A][I+1];x.push(t),x.push(e),x.push(r),x.push(e),x.push(s),x.push(r)}if(x=x.reverse(),t.orientation&&!t.orientation.equals(i.P.Up())){const e=new i.y3;t.orientation.clone().scale(.5*Math.PI).cross(i.P.Up()).toQuaternion().toRotationMatrix(e);const s=i.P.Zero();for(let t=0;t<g.length;t+=3)s.set(g[t],g[t+1],g[t+2]),i.P.TransformCoordinatesToRef(s.clone(),e,s),g[t]=s.x,g[t+1]=s.y,g[t+2]=s.z}const E=new r.x;return E.positions=g,E.normals=b,E.uvs=R,E.indices=x,E}function h(t,e={orientation:i.P.Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6,updatable:!1},s=null){const r=new n.Kj(t,s);return a(e).applyToMesh(r,e.updatable),r}n.Kj.CreateCapsule=(t,e,s)=>h(t,e,s),r.x.CreateCapsule=a},62845:(t,e,s)=>{s.d(e,{wf:()=>u,zD:()=>c});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(65273),h=s(43048),l=s(47884);function c(t){const e=t.height||2;let s=0===t.diameterTop?0:t.diameterTop||t.diameter||1,a=0===t.diameterBottom?0:t.diameterBottom||t.diameter||1;s=s||1e-5,a=a||1e-5;const c=t.tessellation||24,u=t.subdivisions||1,d=!!t.hasRings,_=!!t.enclose,m=0===t.cap?0:t.cap||n.Kj.CAP_ALL,f=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1,p=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,y=t.faceUV||new Array(3),x=t.faceColors,g=2+(1+(1!==f&&_?2:0))*(d?u:1);let b;for(b=0;b<g;b++)x&&void 0===x[b]&&(x[b]=new i.HE(1,1,1,1));for(b=0;b<g;b++)y&&void 0===y[b]&&(y[b]=new r.Lt(0,0,1,1));const R=new Array,P=new Array,M=new Array,T=new Array,w=new Array,I=2*Math.PI*f/c;let A,z,F;const D=(a-s)/2/e,v=r.P.Zero(),O=r.P.Zero(),C=r.P.Zero(),S=r.P.Zero(),L=r.P.Zero(),V=h.RD.Y;let E,N,U,B=1,j=1,k=0,K=0;for(E=0;E<=u;E++)for(z=E/u,F=(z*(s-a)+a)/2,B=d&&0!==E&&E!==u?2:1,U=0;U<B;U++){for(d&&(j+=U),_&&(j+=2*U),N=0;N<=c;N++)A=N*I,v.x=Math.cos(-A)*F,v.y=-e/2+z*e,v.z=Math.sin(-A)*F,0===s&&E===u?(O.x=M[M.length-3*(c+1)],O.y=M[M.length-3*(c+1)+1],O.z=M[M.length-3*(c+1)+2]):(O.x=v.x,O.z=v.z,O.y=Math.sqrt(O.x*O.x+O.z*O.z)*D,O.normalize()),0===N&&(C.copyFrom(v),S.copyFrom(O)),P.push(v.x,v.y,v.z),M.push(O.x,O.y,O.z),K=d?k!==j?y[j].y:y[j].w:y[j].y+(y[j].w-y[j].y)*z,T.push(y[j].x+(y[j].z-y[j].x)*N/c,l.e.UseOpenGLOrientationForUV?1-K:K),x&&w.push(x[j].r,x[j].g,x[j].b,x[j].a);1!==f&&_&&(P.push(v.x,v.y,v.z),P.push(0,v.y,0),P.push(0,v.y,0),P.push(C.x,C.y,C.z),r.P.CrossToRef(V,O,L),L.normalize(),M.push(L.x,L.y,L.z,L.x,L.y,L.z),r.P.CrossToRef(S,V,L),L.normalize(),M.push(L.x,L.y,L.z,L.x,L.y,L.z),K=d?k!==j?y[j+1].y:y[j+1].w:y[j+1].y+(y[j+1].w-y[j+1].y)*z,T.push(y[j+1].x,l.e.UseOpenGLOrientationForUV?1-K:K),T.push(y[j+1].z,l.e.UseOpenGLOrientationForUV?1-K:K),K=d?k!==j?y[j+2].y:y[j+2].w:y[j+2].y+(y[j+2].w-y[j+2].y)*z,T.push(y[j+2].x,l.e.UseOpenGLOrientationForUV?1-K:K),T.push(y[j+2].z,l.e.UseOpenGLOrientationForUV?1-K:K),x&&(w.push(x[j+1].r,x[j+1].g,x[j+1].b,x[j+1].a),w.push(x[j+1].r,x[j+1].g,x[j+1].b,x[j+1].a),w.push(x[j+2].r,x[j+2].g,x[j+2].b,x[j+2].a),w.push(x[j+2].r,x[j+2].g,x[j+2].b,x[j+2].a))),k!==j&&(k=j)}const W=1!==f&&_?c+4:c;for(E=0,j=0;j<u;j++){let t=0,e=0,s=0,r=0;for(N=0;N<c;N++)t=E*(W+1)+N,e=(E+1)*(W+1)+N,s=E*(W+1)+(N+1),r=(E+1)*(W+1)+(N+1),R.push(t,e,s),R.push(r,s,e);1!==f&&_&&(R.push(t+2,e+2,s+2),R.push(r+2,s+2,e+2),R.push(t+4,e+4,s+4),R.push(r+4,s+4,e+4)),E=d?E+2:E+1}const H=t=>{const i=t?s/2:a/2;if(0===i)return;let n,o,h;const u=t?y[g-1]:y[0];let d=null;x&&(d=t?x[g-1]:x[0]);const _=P.length/3,m=t?e/2:-e/2,p=new r.P(0,m,0);P.push(p.x,p.y,p.z),M.push(0,t?1:-1,0);const b=u.y+.5*(u.w-u.y);T.push(u.x+.5*(u.z-u.x),l.e.UseOpenGLOrientationForUV?1-b:b),d&&w.push(d.r,d.g,d.b,d.a);const I=new r.FM(.5,.5);for(h=0;h<=c;h++){n=2*Math.PI*h*f/c;const e=Math.cos(-n),s=Math.sin(-n);o=new r.P(e*i,m,s*i);const a=new r.FM(e*I.x+.5,s*I.y+.5);P.push(o.x,o.y,o.z),M.push(0,t?1:-1,0);const _=u.y+(u.w-u.y)*a.y;T.push(u.x+(u.z-u.x)*a.x,l.e.UseOpenGLOrientationForUV?1-_:_),d&&w.push(d.r,d.g,d.b,d.a)}for(h=0;h<c;h++)t?(R.push(_),R.push(_+(h+2)),R.push(_+(h+1))):(R.push(_),R.push(_+(h+1)),R.push(_+(h+2)))};m!==n.Kj.CAP_START&&m!==n.Kj.CAP_ALL||H(!1),m!==n.Kj.CAP_END&&m!==n.Kj.CAP_ALL||H(!0),o.x._ComputeSides(p,P,R,M,T,t.frontUVs,t.backUVs);const G=new o.x;return G.indices=R,G.positions=P,G.normals=M,G.uvs=T,x&&(G.colors=w),G}function u(t,e={},s){const r=new n.Kj(t,s);e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return c(e).applyToMesh(r,e.updatable),r}o.x.CreateCylinder=c,n.Kj.CreateCylinder=(t,e,s,r,i,o,h,l,c)=>{void 0!==h&&h instanceof a.x||(void 0!==h&&(c=l||n.Kj.DEFAULTSIDE,l=h),h=o,o=1);return u(t,{height:e,diameterTop:s,diameterBottom:r,tessellation:i,subdivisions:o,sideOrientation:c,updatable:l},h)}},96907:(t,e,s)=>{s.d(e,{t:()=>p});var r=s(58095),i=s(72739),n=s(91243),o=s(72208),a=s(89209),h=s(47884);const l=new r.P(1,0,0),c=new r.P(-1,0,0),u=new r.P(0,1,0),d=new r.P(0,-1,0),_=new r.P(0,0,1),m=new r.P(0,0,-1);class f{constructor(t=r.P.Zero(),e=r.P.Up(),s=r.FM.Zero(),i=0,n=0,o=null,a=null,h=null,l=null){this.position=t,this.normal=e,this.uv=s,this.vertexIdx=i,this.vertexIdxForBones=n,this.localPositionOverride=o,this.localNormalOverride=a,this.matrixIndicesOverride=h,this.matrixWeightsOverride=l}clone(){var t,e,s,r;return new f(this.position.clone(),this.normal.clone(),this.uv.clone(),this.vertexIdx,this.vertexIdxForBones,null===(t=this.localPositionOverride)||void 0===t?void 0:t.slice(),null===(e=this.localNormalOverride)||void 0===e?void 0:e.slice(),null===(s=this.matrixIndicesOverride)||void 0===s?void 0:s.slice(),null===(r=this.matrixWeightsOverride)||void 0===r?void 0:r.slice())}}function p(t,e,s){const p=!!e.skeleton,y=s.localMode||p,x=null!==e.overrideMaterialSideOrientation&&void 0!==e.overrideMaterialSideOrientation,g=e.getIndices(),b=p?e.getPositionData(!0,!0):e.getVerticesData(o.o.PositionKind),R=p?e.getNormalsData(!0,!0):e.getVerticesData(o.o.NormalKind),P=y?p?e.getVerticesData(o.o.PositionKind):b:null,M=y?p?e.getVerticesData(o.o.NormalKind):R:null,T=e.getVerticesData(o.o.UVKind),w=p?e.getVerticesData(o.o.MatricesIndicesKind):null,I=p?e.getVerticesData(o.o.MatricesWeightsKind):null,A=p?e.getVerticesData(o.o.MatricesIndicesExtraKind):null,z=p?e.getVerticesData(o.o.MatricesWeightsExtraKind):null,F=s.position||r.P.Zero();let D=s.normal||r.P.Up();const v=s.size||r.P.One(),O=s.angle||0;if(!D){const t=new r.P(0,0,1),s=e.getScene().activeCamera,i=r.P.TransformCoordinates(t,s.getWorldMatrix());D=s.globalPosition.subtract(i)}const C=-Math.atan2(D.z,D.x)-Math.PI/2,S=Math.sqrt(D.x*D.x+D.z*D.z),L=Math.atan2(D.y,S),V=r.y3.RotationYawPitchRoll(C,L,O).multiply(r.y3.Translation(F.x,F.y,F.z)),E=r.y3.Invert(V),N=e.getWorldMatrix().multiply(E),U=new a.x;U.indices=[],U.positions=[],U.normals=[],U.uvs=[],U.matricesIndices=p?[]:null,U.matricesWeights=p?[]:null,U.matricesIndicesExtra=A?[]:null,U.matricesWeightsExtra=z?[]:null;let B=0;const j=t=>{const e=new f;if(!g||!b||!R)return e;const i=g[t];if(e.vertexIdx=3*i,e.vertexIdxForBones=4*i,e.position=new r.P(b[3*i],b[3*i+1],b[3*i+2]),r.P.TransformCoordinatesToRef(e.position,N,e.position),e.normal=new r.P(R[3*i],R[3*i+1],R[3*i+2]),r.P.TransformNormalToRef(e.normal,N,e.normal),s.captureUVS&&T){const t=T[2*i+1];e.uv=new r.FM(T[2*i],h.e.UseOpenGLOrientationForUV?1-t:t)}return e},k=[0,0,0,0],K=(t,e)=>{if(0===t.length)return t;const s=.5*Math.abs(r.P.Dot(v,e)),n=(t,e,s,r)=>{for(let i=0;i<r;++i)if(t[s+i]===e)return s+i;return-1},o=(t,o)=>{var a,h,l,c,u,d,_,m,p,y,x,g,b,R,T,A;const z=r.P.GetClipFactor(t.position,o.position,e,s);let F=k,D=k;if(w&&I){const e=t.matrixIndicesOverride?0:t.vertexIdxForBones,s=null!==(a=t.matrixIndicesOverride)&&void 0!==a?a:w,r=null!==(h=t.matrixWeightsOverride)&&void 0!==h?h:I,u=o.matrixIndicesOverride?0:o.vertexIdxForBones,d=null!==(l=o.matrixIndicesOverride)&&void 0!==l?l:w,_=null!==(c=o.matrixWeightsOverride)&&void 0!==c?c:I;F=[0,0,0,0],D=[0,0,0,0];let m=0;for(let t=0;t<4;++t)if(r[e+t]>0){const o=n(d,s[e+t],u,4);F[m]=s[e+t],D[m]=i.R.Lerp(r[e+t],o>=0?_[o]:0,z),m++}for(let t=0;t<4&&m<4;++t){const r=d[u+t];-1===n(s,r,e,4)&&(F[m]=r,D[m]=i.R.Lerp(0,_[u+t],z),m++)}const f=D[0]+D[1]+D[2]+D[3];D[0]/=f,D[1]/=f,D[2]/=f,D[3]/=f}const v=t.localPositionOverride?t.localPositionOverride[0]:null!==(u=null==P?void 0:P[t.vertexIdx])&&void 0!==u?u:0,O=t.localPositionOverride?t.localPositionOverride[1]:null!==(d=null==P?void 0:P[t.vertexIdx+1])&&void 0!==d?d:0,C=t.localPositionOverride?t.localPositionOverride[2]:null!==(_=null==P?void 0:P[t.vertexIdx+2])&&void 0!==_?_:0,S=o.localPositionOverride?o.localPositionOverride[0]:null!==(m=null==P?void 0:P[o.vertexIdx])&&void 0!==m?m:0,L=o.localPositionOverride?o.localPositionOverride[1]:null!==(p=null==P?void 0:P[o.vertexIdx+1])&&void 0!==p?p:0,V=o.localPositionOverride?o.localPositionOverride[2]:null!==(y=null==P?void 0:P[o.vertexIdx+2])&&void 0!==y?y:0,E=t.localNormalOverride?t.localNormalOverride[0]:null!==(x=null==M?void 0:M[t.vertexIdx])&&void 0!==x?x:0,N=t.localNormalOverride?t.localNormalOverride[1]:null!==(g=null==M?void 0:M[t.vertexIdx+1])&&void 0!==g?g:0,U=t.localNormalOverride?t.localNormalOverride[2]:null!==(b=null==M?void 0:M[t.vertexIdx+2])&&void 0!==b?b:0,B=E+((o.localNormalOverride?o.localNormalOverride[0]:null!==(R=null==M?void 0:M[o.vertexIdx])&&void 0!==R?R:0)-E)*z,j=N+((o.localNormalOverride?o.localNormalOverride[1]:null!==(T=null==M?void 0:M[o.vertexIdx+1])&&void 0!==T?T:0)-N)*z,K=U+((o.localNormalOverride?o.localNormalOverride[2]:null!==(A=null==M?void 0:M[o.vertexIdx+2])&&void 0!==A?A:0)-U)*z,W=Math.sqrt(B*B+j*j+K*K);return new f(r.P.Lerp(t.position,o.position,z),r.P.Lerp(t.normal,o.normal,z).normalize(),r.FM.Lerp(t.uv,o.uv,z),-1,-1,P?[v+(S-v)*z,O+(L-O)*z,C+(V-C)*z]:null,M?[B/W,j/W,K/W]:null,F,D)};let a=null;t.length>3&&(a=new Array);for(let i=0;i<t.length;i+=3){let n=0,h=null,l=null,c=null,u=null;const d=r.P.Dot(t[i].position,e)-s>0,_=r.P.Dot(t[i+1].position,e)-s>0,m=r.P.Dot(t[i+2].position,e)-s>0;switch(n=(d?1:0)+(_?1:0)+(m?1:0),n){case 0:t.length>3?(a.push(t[i]),a.push(t[i+1]),a.push(t[i+2])):a=t;break;case 1:if(a=null!=a?a:new Array,d&&(h=t[i+1],l=t[i+2],c=o(t[i],h),u=o(t[i],l)),_){h=t[i],l=t[i+2],c=o(t[i+1],h),u=o(t[i+1],l),a.push(c),a.push(l.clone()),a.push(h.clone()),a.push(l.clone()),a.push(c.clone()),a.push(u);break}m&&(h=t[i],l=t[i+1],c=o(t[i+2],h),u=o(t[i+2],l)),h&&l&&c&&u&&(a.push(h.clone()),a.push(l.clone()),a.push(c),a.push(u),a.push(c.clone()),a.push(l.clone()));break;case 2:a=null!=a?a:new Array,d||(h=t[i].clone(),l=o(h,t[i+1]),c=o(h,t[i+2]),a.push(h),a.push(l),a.push(c)),_||(h=t[i+1].clone(),l=o(h,t[i+2]),c=o(h,t[i]),a.push(h),a.push(l),a.push(c)),m||(h=t[i+2].clone(),l=o(h,t[i]),c=o(h,t[i+1]),a.push(h),a.push(l),a.push(c))}}return a},W=new Array(3);for(let t=0;t<g.length;t+=3){let e=W;if(e[0]=j(t),x&&y?(e[1]=j(t+2),e[2]=j(t+1)):(e[1]=j(t+1),e[2]=j(t+2)),!(s.cullBackFaces&&-e[0].normal.z<=0&&-e[1].normal.z<=0&&-e[2].normal.z<=0)&&(e=K(e,l),e&&(e=K(e,c),e&&(e=K(e,u),e&&(e=K(e,d),e&&(e=K(e,_),e&&(e=K(e,m),e)))))))for(let t=0;t<e.length;t++){const r=e[t];if(U.indices.push(B),y?(r.localPositionOverride?(U.positions[3*B]=r.localPositionOverride[0],U.positions[3*B+1]=r.localPositionOverride[1],U.positions[3*B+2]=r.localPositionOverride[2]):P&&(U.positions[3*B]=P[r.vertexIdx],U.positions[3*B+1]=P[r.vertexIdx+1],U.positions[3*B+2]=P[r.vertexIdx+2]),r.localNormalOverride?(U.normals[3*B]=r.localNormalOverride[0],U.normals[3*B+1]=r.localNormalOverride[1],U.normals[3*B+2]=r.localNormalOverride[2]):M&&(U.normals[3*B]=M[r.vertexIdx],U.normals[3*B+1]=M[r.vertexIdx+1],U.normals[3*B+2]=M[r.vertexIdx+2])):(r.position.toArray(U.positions,3*B),r.normal.toArray(U.normals,3*B)),U.matricesIndices&&U.matricesWeights&&(r.matrixIndicesOverride?(U.matricesIndices[4*B]=r.matrixIndicesOverride[0],U.matricesIndices[4*B+1]=r.matrixIndicesOverride[1],U.matricesIndices[4*B+2]=r.matrixIndicesOverride[2],U.matricesIndices[4*B+3]=r.matrixIndicesOverride[3]):(w&&(U.matricesIndices[4*B]=w[r.vertexIdxForBones],U.matricesIndices[4*B+1]=w[r.vertexIdxForBones+1],U.matricesIndices[4*B+2]=w[r.vertexIdxForBones+2],U.matricesIndices[4*B+3]=w[r.vertexIdxForBones+3]),A&&U.matricesIndicesExtra&&(U.matricesIndicesExtra[4*B]=A[r.vertexIdxForBones],U.matricesIndicesExtra[4*B+1]=A[r.vertexIdxForBones+1],U.matricesIndicesExtra[4*B+2]=A[r.vertexIdxForBones+2],U.matricesIndicesExtra[4*B+3]=A[r.vertexIdxForBones+3])),r.matrixWeightsOverride?(U.matricesWeights[4*B]=r.matrixWeightsOverride[0],U.matricesWeights[4*B+1]=r.matrixWeightsOverride[1],U.matricesWeights[4*B+2]=r.matrixWeightsOverride[2],U.matricesWeights[4*B+3]=r.matrixWeightsOverride[3]):(I&&(U.matricesWeights[4*B]=I[r.vertexIdxForBones],U.matricesWeights[4*B+1]=I[r.vertexIdxForBones+1],U.matricesWeights[4*B+2]=I[r.vertexIdxForBones+2],U.matricesWeights[4*B+3]=I[r.vertexIdxForBones+3]),z&&U.matricesWeightsExtra&&(U.matricesWeightsExtra[4*B]=z[r.vertexIdxForBones],U.matricesWeightsExtra[4*B+1]=z[r.vertexIdxForBones+1],U.matricesWeightsExtra[4*B+2]=z[r.vertexIdxForBones+2],U.matricesWeightsExtra[4*B+3]=z[r.vertexIdxForBones+3]))),s.captureUVS)r.uv.toArray(U.uvs,2*B);else{U.uvs.push(.5+r.position.x/v.x);const t=.5+r.position.y/v.y;U.uvs.push(h.e.UseOpenGLOrientationForUV?1-t:t)}B++}}const H=new n.Kj(t,e.getScene());return U.applyToMesh(H),y?(H.skeleton=e.skeleton,H.parent=e):(H.position=F.clone(),H.rotation=new r.P(L,C,O)),H.computeWorldMatrix(!0),H.refreshBoundingInfo(!0,!0),H}n.Kj.CreateDecal=(t,e,s,r,i,n)=>p(t,e,{position:s,normal:r,size:i,angle:n})},42620:(t,e,s)=>{s.d(e,{uH:()=>a});var r=s(91243),i=s(89209),n=s(47884);function o(t){const e=new Array,s=new Array,r=new Array,o=new Array,a=t.radius||.5,h=t.tessellation||64,l=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1,c=0===t.sideOrientation?0:t.sideOrientation||i.x.DEFAULTSIDE;e.push(0,0,0),o.push(.5,.5);const u=2*Math.PI*l,d=1===l?u/h:u/(h-1);let _=0;for(let t=0;t<h;t++){const t=Math.cos(_),s=Math.sin(_),r=(t+1)/2,i=(1-s)/2;e.push(a*t,a*s,0),o.push(r,n.e.UseOpenGLOrientationForUV?1-i:i),_+=d}1===l&&(e.push(e[3],e[4],e[5]),o.push(o[2],n.e.UseOpenGLOrientationForUV?1-o[3]:o[3]));const m=e.length/3;for(let t=1;t<m-1;t++)s.push(t+1,0,t);i.x.ComputeNormals(e,s,r),i.x._ComputeSides(c,e,s,r,o,t.frontUVs,t.backUVs);const f=new i.x;return f.indices=s,f.positions=e,f.normals=r,f.uvs=o,f}function a(t,e={},s=null){const i=new r.Kj(t,s);e.sideOrientation=r.Kj._GetDefaultSideOrientation(e.sideOrientation),i._originalBuilderSideOrientation=e.sideOrientation;return o(e).applyToMesh(i,e.updatable),i}i.x.CreateDisc=o,r.Kj.CreateDisc=(t,e,s,r=null,i,n)=>a(t,{radius:e,tessellation:s,sideOrientation:n,updatable:i},r)},76926:(t,e,s)=>{s.d(e,{M:()=>o});var r=s(57891),i=s(84318),n=s(28674);function o(t,e,s=null){let o=e.m||1;o!==Math.floor(o)&&(Math.floor(o),i.Y.Warn("m not an integer only floor(m) used"));let a=e.n||0;if(a!==Math.floor(a)&&(Math.floor(a),i.Y.Warn("n not an integer only floor(n) used")),a>o){const t=a;a=o,o=t,i.Y.Warn("n > m therefore m and n swapped")}const h=new n.Bn;h.build(o,a);const l={custom:n.zz.BuildGeodesicData(h),size:e.size,sizeX:e.sizeX,sizeY:e.sizeY,sizeZ:e.sizeZ,faceUV:e.faceUV,faceColors:e.faceColors,flat:e.flat,updatable:e.updatable,sideOrientation:e.sideOrientation,frontUVs:e.frontUVs,backUVs:e.backUVs};return(0,r.sh)(t,l,s)}},21784:(t,e,s)=>{s.d(e,{_:()=>u});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(84318),h=s(28674),l=s(41234),c=s(47884);function u(t,e,s=null){const u=e.size,d=e.sizeX||u||1,_=e.sizeY||u||1,m=e.sizeZ||u||1;let f=e.m||1;f!==Math.floor(f)&&(Math.floor(f),a.Y.Warn("m not an integer only floor(m) used"));let p=e.n||0;if(p!==Math.floor(p)&&(Math.floor(p),a.Y.Warn("n not an integer only floor(n) used")),p>f){const t=p;p=f,f=t,a.Y.Warn("n > m therefore m and n swapped")}const y=new h.Bn;y.build(f,p);const x=h.zz.BuildGeodesicData(y),g=x.toGoldbergPolyhedronData(),b=new l.R(t,s);e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),b._originalBuilderSideOrientation=e.sideOrientation;const R=function(t,e){const s=t.size,i=t.sizeX||s||1,n=t.sizeY||s||1,a=t.sizeZ||s||1,h=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,l=new Array,u=new Array,d=new Array,_=new Array;let m=1/0,f=-1/0,p=1/0,y=-1/0;for(let t=0;t<e.vertex.length;t++)m=Math.min(m,e.vertex[t][0]*i),f=Math.max(f,e.vertex[t][0]*i),p=Math.min(p,e.vertex[t][1]*n),y=Math.max(y,e.vertex[t][1]*n);let x=0;for(let t=0;t<e.face.length;t++){const s=e.face[t],o=r.P.FromArray(e.vertex[s[0]]),h=r.P.FromArray(e.vertex[s[2]]),g=r.P.FromArray(e.vertex[s[1]]),b=h.subtract(o),R=g.subtract(o),P=r.P.Cross(R,b).normalize();for(let t=0;t<s.length;t++){d.push(P.x,P.y,P.z);const r=e.vertex[s[t]];l.push(r[0]*i,r[1]*n,r[2]*a);const o=(r[1]*n-p)/(y-p);_.push((r[0]*i-m)/(f-m),c.e.UseOpenGLOrientationForUV?1-o:o)}for(let t=0;t<s.length-2;t++)u.push(x,x+t+2,x+t+1);x+=s.length}o.x._ComputeSides(h,l,u,d,_);const g=new o.x;return g.positions=l,g.indices=u,g.normals=d,g.uvs=_,g}(e,g);R.applyToMesh(b,e.updatable),b.goldbergData.nbSharedFaces=x.sharedNodes,b.goldbergData.nbUnsharedFaces=x.poleNodes,b.goldbergData.adjacentFaces=x.adjacentFaces,b.goldbergData.nbFaces=b.goldbergData.nbSharedFaces+b.goldbergData.nbUnsharedFaces,b.goldbergData.nbFacesAtPole=(b.goldbergData.nbUnsharedFaces-12)/12;for(let t=0;t<x.vertex.length;t++)b.goldbergData.faceCenters.push(r.P.FromArray(x.vertex[t])),b.goldbergData.faceCenters[t].x*=d,b.goldbergData.faceCenters[t].y*=_,b.goldbergData.faceCenters[t].z*=m,b.goldbergData.faceColors.push(new i.HE(1,1,1,1));for(let t=0;t<g.face.length;t++){const e=g.face[t],s=r.P.FromArray(g.vertex[e[0]]),i=r.P.FromArray(g.vertex[e[2]]),n=r.P.FromArray(g.vertex[e[1]]),o=i.subtract(s),a=n.subtract(s),h=r.P.Cross(a,o).normalize(),l=r.P.Cross(a,h).normalize();b.goldbergData.faceXaxis.push(a.normalize()),b.goldbergData.faceYaxis.push(h),b.goldbergData.faceZaxis.push(l)}return b}n.Kj.CreateGoldberg=u},41525:(t,e,s)=>{s.d(e,{$6:()=>f,DG:()=>p,W:()=>y,kt:()=>d});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(66378),h=s(13514),l=s(15210),c=s(48154),u=s(47884);function d(t){const e=[],s=[],i=[],n=[];let a,h;const l=t.width||1,c=t.height||1,d=t.subdivisionsX||t.subdivisions||1,_=t.subdivisionsY||t.subdivisions||1;for(a=0;a<=_;a++)for(h=0;h<=d;h++){const t=new r.P(h*l/d-l/2,0,(_-a)*c/_-c/2),e=new r.P(0,1,0);s.push(t.x,t.y,t.z),i.push(e.x,e.y,e.z),n.push(h/d,u.e.UseOpenGLOrientationForUV?a/_:1-a/_)}for(a=0;a<_;a++)for(h=0;h<d;h++)e.push(h+1+(a+1)*(d+1)),e.push(h+1+a*(d+1)),e.push(h+a*(d+1)),e.push(h+(a+1)*(d+1)),e.push(h+1+(a+1)*(d+1)),e.push(h+a*(d+1));const m=new o.x;return m.indices=e,m.positions=s,m.normals=i,m.uvs=n,m}function _(t){const e=void 0!==t.xmin&&null!==t.xmin?t.xmin:-1,s=void 0!==t.zmin&&null!==t.zmin?t.zmin:-1,i=void 0!==t.xmax&&null!==t.xmax?t.xmax:1,n=void 0!==t.zmax&&null!==t.zmax?t.zmax:1,a=t.subdivisions||{w:1,h:1},h=t.precision||{w:1,h:1},l=new Array,c=new Array,u=new Array,d=new Array;let _,m,f,p;a.h=a.h<1?1:a.h,a.w=a.w<1?1:a.w,h.w=h.w<1?1:h.w,h.h=h.h<1?1:h.h;const y=(i-e)/a.w,x=(n-s)/a.h;function g(t,e,s,i){const n=c.length/3,o=h.w+1;for(_=0;_<h.h;_++)for(m=0;m<h.w;m++){const t=[n+m+_*o,n+(m+1)+_*o,n+(m+1)+(_+1)*o,n+m+(_+1)*o];l.push(t[1]),l.push(t[2]),l.push(t[3]),l.push(t[0]),l.push(t[1]),l.push(t[3])}const a=r.P.Zero(),f=new r.P(0,1,0);for(_=0;_<=h.h;_++)for(a.z=_*(i-e)/h.h+e,m=0;m<=h.w;m++)a.x=m*(s-t)/h.w+t,a.y=0,c.push(a.x,a.y,a.z),u.push(f.x,f.y,f.z),d.push(m/h.w,_/h.h)}for(f=0;f<a.h;f++)for(p=0;p<a.w;p++)g(e+p*y,s+f*x,e+(p+1)*y,s+(f+1)*x);const b=new o.x;return b.indices=l,b.positions=c,b.normals=u,b.uvs=d,b}function m(t){const e=[],s=[],n=[],a=[];let h,l;const u=t.colorFilter||new i.Wo(.3,.59,.11),d=t.alphaFilter||0;let _=!1;if(t.minHeight>t.maxHeight){_=!0;const e=t.maxHeight;t.maxHeight=t.minHeight,t.minHeight=e}for(h=0;h<=t.subdivisions;h++)for(l=0;l<=t.subdivisions;l++){const e=new r.P(l*t.width/t.subdivisions-t.width/2,0,(t.subdivisions-h)*t.height/t.subdivisions-t.height/2),i=4*(((e.x+t.width/2)/t.width*(t.bufferWidth-1)|0)+((1-(e.z+t.height/2)/t.height)*(t.bufferHeight-1)|0)*t.bufferWidth);let o=t.buffer[i]/255,m=t.buffer[i+1]/255,f=t.buffer[i+2]/255;const p=t.buffer[i+3]/255;_&&(o=1-o,m=1-m,f=1-f);const y=o*u.r+m*u.g+f*u.b;e.y=p>=d?t.minHeight+(t.maxHeight-t.minHeight)*y:t.minHeight-c.kn,s.push(e.x,e.y,e.z),n.push(0,0,0),a.push(l/t.subdivisions,1-h/t.subdivisions)}for(h=0;h<t.subdivisions;h++)for(l=0;l<t.subdivisions;l++){const r=l+1+(h+1)*(t.subdivisions+1),i=l+1+h*(t.subdivisions+1),n=l+h*(t.subdivisions+1),o=l+(h+1)*(t.subdivisions+1),a=s[3*r+1]>=t.minHeight,c=s[3*i+1]>=t.minHeight,u=s[3*n+1]>=t.minHeight;a&&c&&u&&(e.push(r),e.push(i),e.push(n));s[3*o+1]>=t.minHeight&&a&&u&&(e.push(o),e.push(r),e.push(n))}o.x.ComputeNormals(s,e,n);const m=new o.x;return m.indices=e,m.positions=s,m.normals=n,m.uvs=a,m}function f(t,e={},s){const r=new a.E(t,s);r._setReady(!1),r._subdivisionsX=e.subdivisionsX||e.subdivisions||1,r._subdivisionsY=e.subdivisionsY||e.subdivisions||1,r._width=e.width||1,r._height=e.height||1,r._maxX=r._width/2,r._maxZ=r._height/2,r._minX=-r._maxX,r._minZ=-r._maxZ;return d(e).applyToMesh(r,e.updatable),r._setReady(!0),r}function p(t,e,s=null){const r=new n.Kj(t,s);return _(e).applyToMesh(r,e.updatable),r}function y(t,e,s={},r=null){const n=s.width||10,o=s.height||10,c=s.subdivisions||1,u=s.minHeight||0,d=s.maxHeight||1,_=s.colorFilter||new i.Wo(.3,.59,.11),f=s.alphaFilter||0,p=s.updatable,y=s.onReady;r=r||l.l.LastCreatedScene;const x=new a.E(t,r);x._subdivisionsX=c,x._subdivisionsY=c,x._width=n,x._height=o,x._maxX=x._width/2,x._maxZ=x._height/2,x._minX=-x._maxX,x._minZ=-x._maxZ,x._setReady(!1);return h.w1.LoadImage(e,(t=>{const e=t.width,s=t.height;if(r.isDisposed)return;const i=null==r?void 0:r.getEngine().resizeImageBitmap(t,e,s);m({width:n,height:o,subdivisions:c,minHeight:u,maxHeight:d,colorFilter:_,buffer:i,bufferWidth:e,bufferHeight:s,alphaFilter:f}).applyToMesh(x,p),y&&y(x),x._setReady(!0)}),(()=>{}),r.offlineProvider),x}o.x.CreateGround=d,o.x.CreateTiledGround=_,o.x.CreateGroundFromHeightMap=m,n.Kj.CreateGround=(t,e,s,r,i,n)=>f(t,{width:e,height:s,subdivisions:r,updatable:n},i),n.Kj.CreateTiledGround=(t,e,s,r,i,n,o,a,h)=>p(t,{xmin:e,zmin:s,xmax:r,zmax:i,subdivisions:n,precision:o,updatable:h},a),n.Kj.CreateGroundFromHeightMap=(t,e,s,r,i,n,o,a,h,l,c)=>y(t,e,{width:s,height:r,subdivisions:i,minHeight:n,maxHeight:o,updatable:h,onReady:l,alphaFilter:c},a)},54557:(t,e,s)=>{s.d(e,{q:()=>o});var r=s(91243),i=s(48087),n=s(42620);function o(t,e={},s){e.diameter||(e.diameter=1),e.segments||(e.segments=16);const o=(0,i.Qk)("",{slice:.5,diameter:e.diameter,segments:e.segments},s),a=(0,n.uH)("",{radius:e.diameter/2,tessellation:3*e.segments+(4-e.segments)},s);a.rotation.x=-Math.PI/2,a.parent=o;const h=r.Kj.MergeMeshes([a,o],!0);return h.name=t,h}r.Kj.CreateHemisphere=(t,e,s,r)=>o(t,{segments:e,diameter:s},r)},75298:(t,e,s)=>{s.d(e,{Au:()=>h});var r=s(58095),i=s(91243),n=s(89209),o=s(47884);function a(t){const e=t.sideOrientation||n.x.DEFAULTSIDE,s=t.radius||1,i=void 0===t.flat||t.flat,a=t.subdivisions||4,h=t.radiusX||s,l=t.radiusY||s,c=t.radiusZ||s,u=(1+Math.sqrt(5))/2,d=[-1,u,-0,1,u,0,-1,-u,0,1,-u,0,0,-1,-u,0,1,-u,0,-1,u,0,1,u,u,0,1,u,0,-1,-u,0,1,-u,0,-1],_=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],m=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],f=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],p=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],y=new Array,x=new Array,g=new Array,b=new Array;let R=0;const P=new Array(3),M=new Array(3);let T;for(T=0;T<3;T++)P[T]=r.P.Zero(),M[T]=r.FM.Zero();for(let t=0;t<20;t++){for(T=0;T<3;T++){const e=_[3*t+T];P[T].copyFromFloats(d[3*m[e]],d[3*m[e]+1],d[3*m[e]+2]),P[T].normalize(),M[T].copyFromFloats(.134765625*f[2*e]+.05859375+-.0390625*p[t],.2333984375*f[2*e+1]+.025390625+.01953125*p[t])}const e=(t,e,s,n)=>{const u=r.P.Lerp(P[0],P[2],e/a),d=r.P.Lerp(P[1],P[2],e/a),_=a===e?P[2]:r.P.Lerp(u,d,t/(a-e));let m;if(_.normalize(),i){const t=r.P.Lerp(P[0],P[2],n/a),e=r.P.Lerp(P[1],P[2],n/a);m=r.P.Lerp(t,e,s/(a-n))}else m=new r.P(_.x,_.y,_.z);m.x/=h,m.y/=l,m.z/=c,m.normalize();const f=r.FM.Lerp(M[0],M[2],e/a),p=r.FM.Lerp(M[1],M[2],e/a),T=a===e?M[2]:r.FM.Lerp(f,p,t/(a-e));x.push(_.x*h,_.y*l,_.z*c),g.push(m.x,m.y,m.z),b.push(T.x,o.e.UseOpenGLOrientationForUV?1-T.y:T.y),y.push(R),R++};for(let t=0;t<a;t++)for(let s=0;s+t<a;s++)e(s,t,s+1/3,t+1/3),e(s+1,t,s+1/3,t+1/3),e(s,t+1,s+1/3,t+1/3),s+t+1<a&&(e(s+1,t,s+2/3,t+2/3),e(s+1,t+1,s+2/3,t+2/3),e(s,t+1,s+2/3,t+2/3))}n.x._ComputeSides(e,x,y,g,b,t.frontUVs,t.backUVs);const w=new n.x;return w.indices=y,w.positions=x,w.normals=g,w.uvs=b,w}function h(t,e={},s=null){const r=new i.Kj(t,s);e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return a(e).applyToMesh(r,e.updatable),r}n.x.CreateIcoSphere=a,i.Kj.CreateIcoSphere=(t,e,s)=>h(t,e,s)},42080:(t,e,s)=>{s.d(e,{eW:()=>r.eW});s(8451),s(10149),s(42620),s(48236),s(48087),s(54557),s(62845),s(49353),s(93471);var r=s(9866);s(52590),s(75159),s(89202),s(46719),s(89234),s(41525),s(42387),s(57891),s(76926),s(21784),s(96907),s(75298),s(6588)},89202:(t,e,s)=>{s.d(e,{O:()=>o});var r=s(58095),i=s(91243),n=s(48236);function o(t,e,s=null){const o=e.arc?e.arc<=0||e.arc>1?1:e.arc:1,a=void 0===e.closed||e.closed,h=e.shape,l=e.radius||1,c=e.tessellation||64,u=e.clip||0,d=e.updatable,_=i.Kj._GetDefaultSideOrientation(e.sideOrientation),m=e.cap||i.Kj.NO_CAP,f=2*Math.PI,p=new Array,y=e.invertUV||!1;let x=0,g=0;const b=f/c*o;let R,P;for(x=0;x<=c-u;x++){for(P=[],m!=i.Kj.CAP_START&&m!=i.Kj.CAP_ALL||(P.push(new r.P(0,h[0].y,0)),P.push(new r.P(Math.cos(x*b)*h[0].x*l,h[0].y,Math.sin(x*b)*h[0].x*l))),g=0;g<h.length;g++)R=new r.P(Math.cos(x*b)*h[g].x*l,h[g].y,Math.sin(x*b)*h[g].x*l),P.push(R);m!=i.Kj.CAP_END&&m!=i.Kj.CAP_ALL||(P.push(new r.P(Math.cos(x*b)*h[h.length-1].x*l,h[h.length-1].y,Math.sin(x*b)*h[h.length-1].x*l)),P.push(new r.P(0,h[h.length-1].y,0))),p.push(P)}return(0,n.LY)(t,{pathArray:p,closeArray:a,sideOrientation:_,updatable:d,invertUV:y,frontUVs:e.frontUVs,backUVs:e.backUVs},s)}i.Kj.CreateLathe=(t,e,s,r,i,n,a)=>o(t,{shape:e,radius:s,tessellation:r,sideOrientation:a,updatable:n},i)},9866:(t,e,s)=>{s.d(e,{Gz:()=>_,eW:()=>l,nL:()=>d,xW:()=>u});var r=s(58095),i=s(91243),n=s(89209),o=s(37852),a=s(72208),h=s(84318);function l(t){const e=[],s=[],r=t.lines,i=t.colors,o=[];let a=0;for(let t=0;t<r.length;t++){const n=r[t];for(let r=0;r<n.length;r++){if(s.push(n[r].x,n[r].y,n[r].z),i){const e=i[t];o.push(e[r].r,e[r].g,e[r].b,e[r].a)}r>0&&(e.push(a-1),e.push(a)),a++}}const h=new n.x;return h.indices=e,h.positions=s,i&&(h.colors=o),h}function c(t){const e=t.dashSize||3,s=t.gapSize||1,i=t.dashNb||200,o=t.points,a=new Array,h=new Array,l=r.P.Zero();let c=0,u=0,d=0,_=0,m=0,f=0,p=0;for(p=0;p<o.length-1;p++)o[p+1].subtractToRef(o[p],l),c+=l.length();for(d=c/i,_=e*d/(e+s),p=0;p<o.length-1;p++){o[p+1].subtractToRef(o[p],l),u=Math.floor(l.length()/d),l.normalize();for(let t=0;t<u;t++)m=d*t,a.push(o[p].x+m*l.x,o[p].y+m*l.y,o[p].z+m*l.z),a.push(o[p].x+(m+_)*l.x,o[p].y+(m+_)*l.y,o[p].z+(m+_)*l.z),h.push(f,f+1),f+=2}const y=new n.x;return y.positions=a,y.indices=h,y}function u(t,e,s){const r=e.instance,i=e.lines,n=e.colors;if(r){const t=r.getVerticesData(a.o.PositionKind);let e,s;n&&(e=r.getVerticesData(a.o.ColorKind));let o=0,h=0;for(let r=0;r<i.length;r++){const a=i[r];for(let i=0;i<a.length;i++)t[o]=a[i].x,t[o+1]=a[i].y,t[o+2]=a[i].z,n&&e&&(s=n[r],e[h]=s[i].r,e[h+1]=s[i].g,e[h+2]=s[i].b,e[h+3]=s[i].a,h+=4),o+=3}return r.updateVerticesData(a.o.PositionKind,t,!1,!1),n&&e&&r.updateVerticesData(a.o.ColorKind,e,!1,!1),r}const h=!!n,c=new o._(t,s,null,void 0,void 0,h,e.useVertexAlpha,e.material);return l(e).applyToMesh(c,e.updatable),c}function d(t,e,s=null){const r=e.colors?[e.colors]:null;return u(t,{lines:[e.points],updatable:e.updatable,instance:e.instance,colors:r,useVertexAlpha:e.useVertexAlpha,material:e.material},s)}function _(t,e,s=null){const n=e.points,a=e.instance,l=e.gapSize||1,u=e.dashSize||3;if(a){const t=t=>{const e=r.P.Zero(),s=t.length/6;let i=0,o=0,h=0,l=0,c=0,u=0,d=0,_=0;for(d=0;d<n.length-1;d++)n[d+1].subtractToRef(n[d],e),i+=e.length();h=i/s;const m=a._creationDataStorage.dashSize;for(l=m*h/(m+a._creationDataStorage.gapSize),d=0;d<n.length-1;d++)for(n[d+1].subtractToRef(n[d],e),o=Math.floor(e.length()/h),e.normalize(),_=0;_<o&&u<t.length;)c=h*_,t[u]=n[d].x+c*e.x,t[u+1]=n[d].y+c*e.y,t[u+2]=n[d].z+c*e.z,t[u+3]=n[d].x+(c+l)*e.x,t[u+4]=n[d].y+(c+l)*e.y,t[u+5]=n[d].z+(c+l)*e.z,u+=6,_++;for(;u<t.length;)t[u]=n[d].x,t[u+1]=n[d].y,t[u+2]=n[d].z,u+=3};return(e.dashNb||e.dashSize||e.gapSize||e.useVertexAlpha||e.material)&&h.Y.Warn("You have used an option other than points with the instance option. Please be aware that these other options will be ignored."),a.updateMeshPositions(t,!1),a}const d=new o._(t,s,null,void 0,void 0,void 0,e.useVertexAlpha,e.material);return c(e).applyToMesh(d,e.updatable),d._creationDataStorage=new i.gW,d._creationDataStorage.dashSize=u,d._creationDataStorage.gapSize=l,d}n.x.CreateLineSystem=l,n.x.CreateDashedLines=c,i.Kj.CreateLines=(t,e,s=null,r=!1,i=null)=>d(t,{points:e,updatable:r,instance:i},s),i.Kj.CreateDashedLines=(t,e,s,r,i,n=null,o,a)=>_(t,{points:e,dashSize:s,gapSize:r,dashNb:i,updatable:o,instance:a},n)},46719:(t,e,s)=>{s.d(e,{Hq:()=>o,pT:()=>a});var r=s(91243),i=s(89209),n=s(47884);function o(t){const e=[],s=[],r=[],o=[],a=t.width||t.size||1,h=t.height||t.size||1,l=0===t.sideOrientation?0:t.sideOrientation||i.x.DEFAULTSIDE,c=a/2,u=h/2;s.push(-c,-u,0),r.push(0,0,-1),o.push(0,n.e.UseOpenGLOrientationForUV?1:0),s.push(c,-u,0),r.push(0,0,-1),o.push(1,n.e.UseOpenGLOrientationForUV?1:0),s.push(c,u,0),r.push(0,0,-1),o.push(1,n.e.UseOpenGLOrientationForUV?0:1),s.push(-c,u,0),r.push(0,0,-1),o.push(0,n.e.UseOpenGLOrientationForUV?0:1),e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),i.x._ComputeSides(l,s,e,r,o,t.frontUVs,t.backUVs);const d=new i.x;return d.indices=e,d.positions=s,d.normals=r,d.uvs=o,d}function a(t,e={},s=null){const i=new r.Kj(t,s);e.sideOrientation=r.Kj._GetDefaultSideOrientation(e.sideOrientation),i._originalBuilderSideOrientation=e.sideOrientation;return o(e).applyToMesh(i,e.updatable),e.sourcePlane&&(i.translate(e.sourcePlane.normal,-e.sourcePlane.d),i.setDirection(e.sourcePlane.normal.scale(-1))),i}i.x.CreatePlane=o,r.Kj.CreatePlane=(t,e,s,r,i)=>a(t,{size:e,width:e,height:e,sideOrientation:i,updatable:r},s)},52590:(t,e,s)=>{s.d(e,{Yo:()=>_,a4:()=>d});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(86230),h=s(72208),l=s(15210),c=s(47884);function u(t,e,s,n,a,l,u){const d=s||new Array(3),_=n,m=[],f=u||!1;for(let t=0;t<3;t++)void 0===d[t]&&(d[t]=new r.Lt(0,0,1,1)),_&&void 0===_[t]&&(_[t]=new i.HE(1,1,1,1));const p=t.getVerticesData(h.o.PositionKind),y=t.getVerticesData(h.o.NormalKind),x=t.getVerticesData(h.o.UVKind),g=t.getIndices(),b=p.length/9;let R=0,P=0,M=0,T=0,w=0;const I=[0];if(f)for(let t=b;t<p.length/3;t+=4)P=p[3*(t+2)]-p[3*t],M=p[3*(t+2)+2]-p[3*t+2],T=Math.sqrt(P*P+M*M),w+=T,I.push(w);let A=0,z=0;for(let t=0;t<y.length;t+=3)Math.abs(y[t+1])<.001&&(z=1),Math.abs(y[t+1]-1)<.001&&(z=0),Math.abs(y[t+1]+1)<.001&&(z=2),A=t/3,1===z?(R=A-b,x[2*A]=R%4<1.5?f?d[z].x+(d[z].z-d[z].x)*I[Math.floor(R/4)]/w:d[z].x:f?d[z].x+(d[z].z-d[z].x)*I[Math.floor(R/4)+1]/w:d[z].z,x[2*A+1]=R%2==0?c.e.UseOpenGLOrientationForUV?1-d[z].w:d[z].w:c.e.UseOpenGLOrientationForUV?1-d[z].y:d[z].y):(x[2*A]=(1-x[2*A])*d[z].x+x[2*A]*d[z].z,x[2*A+1]=(1-x[2*A+1])*d[z].y+x[2*A+1]*d[z].w,c.e.UseOpenGLOrientationForUV&&(x[2*A+1]=1-x[2*A+1])),_&&m.push(_[z].r,_[z].g,_[z].b,_[z].a);o.x._ComputeSides(e,p,g,y,x,a,l);const F=new o.x;if(F.indices=g,F.positions=p,F.normals=y,F.uvs=x,_){const t=e===o.x.DOUBLESIDE?m.concat(m):m;F.colors=t}return F}function d(t,e,s=null,i=earcut){e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation);const o=e.shape,h=e.holes||[],c=e.depth||0,d=e.smoothingThreshold||2,_=[];let m=[];for(let t=0;t<o.length;t++)_[t]=new r.FM(o[t].x,o[t].z);_[0].equalsWithEpsilon(_[_.length-1],1e-8)&&_.pop();const f=new a.z(t,_,s||l.l.LastCreatedScene,i);for(let t=0;t<h.length;t++){m=[];for(let e=0;e<h[t].length;e++)m.push(new r.FM(h[t][e].x,h[t][e].z));f.addHole(m)}const p=f.build(!1,c,d);p._originalBuilderSideOrientation=e.sideOrientation;return u(p,e.sideOrientation,e.faceUV,e.faceColors,e.frontUVs,e.backUVs,e.wrap).applyToMesh(p,e.updatable),p}function _(t,e,s=null,r=earcut){return d(t,e,s,r)}o.x.CreatePolygon=u,n.Kj.CreatePolygon=(t,e,s,r,i,n,o=earcut)=>d(t,{shape:e,holes:r,updatable:i,sideOrientation:n},s,o),n.Kj.ExtrudePolygon=(t,e,s,r,i,n,o,a=earcut)=>_(t,{shape:e,holes:i,depth:s,updatable:n,sideOrientation:o},r,a)},57891:(t,e,s)=>{s.d(e,{sh:()=>l});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(47884);function h(t){const e=[];e[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},e[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},e[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},e[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},e[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},e[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},e[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},e[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},e[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},e[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},e[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},e[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},e[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},e[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},e[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};const s=t.type&&(t.type<0||t.type>=e.length)?0:t.type||0,n=t.size,h=t.sizeX||n||1,l=t.sizeY||n||1,c=t.sizeZ||n||1,u=t.custom||e[s],d=u.face.length,_=t.faceUV||new Array(d),m=t.faceColors,f=void 0===t.flat||t.flat,p=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,y=new Array,x=new Array,g=new Array,b=new Array,R=new Array;let P=0,M=0;const T=new Array;let w,I,A,z,F,D,v=0,O=0;if(f)for(O=0;O<d;O++)m&&void 0===m[O]&&(m[O]=new i.HE(1,1,1,1)),_&&void 0===_[O]&&(_[O]=new r.Lt(0,0,1,1));if(f)for(O=0;O<d;O++){const t=u.face[O].length;for(A=2*Math.PI/t,z=.5*Math.tan(A/2),F=.5,v=0;v<t;v++)y.push(u.vertex[u.face[O][v]][0]*h,u.vertex[u.face[O][v]][1]*l,u.vertex[u.face[O][v]][2]*c),T.push(P),P++,w=_[O].x+(_[O].z-_[O].x)*(.5+z),I=_[O].y+(_[O].w-_[O].y)*(F-.5),b.push(w,a.e.UseOpenGLOrientationForUV?1-I:I),D=z*Math.cos(A)-F*Math.sin(A),F=z*Math.sin(A)+F*Math.cos(A),z=D,m&&R.push(m[O].r,m[O].g,m[O].b,m[O].a);for(v=0;v<t-2;v++)x.push(T[0+M],T[v+2+M],T[v+1+M]);M+=t}else{for(v=0;v<u.vertex.length;v++)y.push(u.vertex[v][0]*h,u.vertex[v][1]*l,u.vertex[v][2]*c),b.push(0,a.e.UseOpenGLOrientationForUV?1:0);for(O=0;O<d;O++)for(v=0;v<u.face[O].length-2;v++)x.push(u.face[O][0],u.face[O][v+2],u.face[O][v+1])}o.x.ComputeNormals(y,x,g),o.x._ComputeSides(p,y,x,g,b,t.frontUVs,t.backUVs);const C=new o.x;return C.positions=y,C.indices=x,C.normals=g,C.uvs=b,m&&f&&(C.colors=R),C}function l(t,e={},s=null){const r=new n.Kj(t,s);e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return h(e).applyToMesh(r,e.updatable),r}o.x.CreatePolyhedron=h,n.Kj.CreatePolyhedron=(t,e,s)=>l(t,e,s)},48236:(t,e,s)=>{s.d(e,{LY:()=>l});var r=s(58095),i=s(91243),n=s(72208),o=s(89209),a=s(47884);function h(t){let e=t.pathArray;const s=t.closeArray||!1,r=t.closePath||!1,i=t.invertUV||!1,h=Math.floor(e[0].length/2);let l=t.offset||h;l=l>h?h:Math.floor(l);const c=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,u=t.uvs,d=t.colors,_=[],m=[],f=[],p=[],y=[],x=[],g=[],b=[];let R;const P=[],M=[];let T,w,I;if(e.length<2){const t=[],s=[];for(w=0;w<e[0].length-l;w++)t.push(e[0][w]),s.push(e[0][w+l]);e=[t,s]}let A=0;const z=r?1:0;let F,D,v,O,C,S;for(R=e[0].length,T=0;T<e.length;T++){for(g[T]=0,y[T]=[0],F=e[T],D=F.length,R=R<D?R:D,I=0;I<D;)_.push(F[I].x,F[I].y,F[I].z),I>0&&(v=F[I].subtract(F[I-1]).length(),O=v+g[T],y[T].push(O),g[T]=O),I++;r&&(I--,_.push(F[0].x,F[0].y,F[0].z),v=F[I].subtract(F[0]).length(),O=v+g[T],y[T].push(O),g[T]=O),P[T]=D+z,M[T]=A,A+=D+z}let L,V,E=null,N=null;for(w=0;w<R+z;w++){for(b[w]=0,x[w]=[0],T=0;T<e.length-1;T++)C=e[T],S=e[T+1],w===R?(E=C[0],N=S[0]):(E=C[w],N=S[w]),v=N.subtract(E).length(),O=v+b[w],x[w].push(O),b[w]=O;s&&N&&E&&(C=e[T],S=e[0],w===R&&(N=S[0]),v=N.subtract(E).length(),O=v+b[w],b[w]=O)}if(u)for(T=0;T<u.length;T++)p.push(u[T].x,a.e.UseOpenGLOrientationForUV?1-u[T].y:u[T].y);else for(T=0;T<e.length;T++)for(w=0;w<R+z;w++)L=0!=g[T]?y[T][w]/g[T]:0,V=0!=b[w]?x[w][T]/b[w]:0,i?p.push(V,L):p.push(L,a.e.UseOpenGLOrientationForUV?1-V:V);T=0;let U=0,B=P[T]-1,j=P[T+1]-1,k=B<j?B:j,K=M[1]-M[0];const W=s?P.length:P.length-1;for(;U<=k&&T<W;)m.push(U,U+K,U+1),m.push(U+K+1,U+1,U+K),U+=1,U===k&&(T++,T===P.length-1?(K=M[0]-M[T],B=P[T]-1,j=P[0]-1):(K=M[T+1]-M[T],B=P[T]-1,j=P[T+1]-1),U=M[T],k=B<j?B+U:j+U);if(o.x.ComputeNormals(_,m,f),r){let t=0,s=0;for(T=0;T<e.length;T++)t=3*M[T],s=T+1<e.length?3*(M[T+1]-1):f.length-3,f[t]=.5*(f[t]+f[s]),f[t+1]=.5*(f[t+1]+f[s+1]),f[t+2]=.5*(f[t+2]+f[s+2]),f[s]=f[t],f[s+1]=f[t+1],f[s+2]=f[t+2]}o.x._ComputeSides(c,_,m,f,p,t.frontUVs,t.backUVs);let H=null;if(d){H=new Float32Array(4*d.length);for(let t=0;t<d.length;t++)H[4*t]=d[t].r,H[4*t+1]=d[t].g,H[4*t+2]=d[t].b,H[4*t+3]=d[t].a}const G=new o.x,Z=new Float32Array(_),Y=new Float32Array(f),q=new Float32Array(p);return G.indices=m,G.positions=Z,G.normals=Y,G.uvs=q,H&&G.set(H,n.o.ColorKind),r&&(G._idx=M),G}function l(t,e,s=null){const l=e.pathArray,c=e.closeArray,u=e.closePath,d=i.Kj._GetDefaultSideOrientation(e.sideOrientation),_=e.instance,m=e.updatable;if(_){const t=r.jp.Vector3[0].setAll(Number.MAX_VALUE),s=r.jp.Vector3[1].setAll(-Number.MAX_VALUE),h=e=>{let r=l[0].length;const n=_;let o=0;const a=n._originalBuilderSideOrientation===i.Kj.DOUBLESIDE?2:1;for(let i=1;i<=a;++i)for(let i=0;i<l.length;++i){const a=l[i],h=a.length;r=r<h?r:h;for(let i=0;i<r;++i){const r=a[i];e[o]=r.x,e[o+1]=r.y,e[o+2]=r.z,t.minimizeInPlaceFromFloats(r.x,r.y,r.z),s.maximizeInPlaceFromFloats(r.x,r.y,r.z),o+=3}if(n._creationDataStorage&&n._creationDataStorage.closePath){const t=a[0];e[o]=t.x,e[o+1]=t.y,e[o+2]=t.z,o+=3}}},c=_.getVerticesData(n.o.PositionKind);if(h(c),_.hasBoundingInfo?_.getBoundingInfo().reConstruct(t,s,_._worldMatrix):_.buildBoundingInfo(t,s,_._worldMatrix),_.updateVerticesData(n.o.PositionKind,c,!1,!1),e.colors){const t=_.getVerticesData(n.o.ColorKind);for(let s=0,r=0;s<e.colors.length;s++,r+=4){const i=e.colors[s];t[r]=i.r,t[r+1]=i.g,t[r+2]=i.b,t[r+3]=i.a}_.updateVerticesData(n.o.ColorKind,t,!1,!1)}if(e.uvs){const t=_.getVerticesData(n.o.UVKind);for(let s=0;s<e.uvs.length;s++)t[2*s]=e.uvs[s].x,t[2*s+1]=a.e.UseOpenGLOrientationForUV?1-e.uvs[s].y:e.uvs[s].y;_.updateVerticesData(n.o.UVKind,t,!1,!1)}if(!_.areNormalsFrozen||_.isFacetDataEnabled){const t=_.getIndices(),e=_.getVerticesData(n.o.NormalKind),s=_.isFacetDataEnabled?_.getFacetDataParameters():null;if(o.x.ComputeNormals(c,t,e,s),_._creationDataStorage&&_._creationDataStorage.closePath){let t=0,s=0;for(let r=0;r<l.length;r++)t=3*_._creationDataStorage.idx[r],s=r+1<l.length?3*(_._creationDataStorage.idx[r+1]-1):e.length-3,e[t]=.5*(e[t]+e[s]),e[t+1]=.5*(e[t+1]+e[s+1]),e[t+2]=.5*(e[t+2]+e[s+2]),e[s]=e[t],e[s+1]=e[t+1],e[s+2]=e[t+2]}_.areNormalsFrozen||_.updateVerticesData(n.o.NormalKind,e,!1,!1)}return _}{const r=new i.Kj(t,s);r._originalBuilderSideOrientation=d,r._creationDataStorage=new i.gW;const n=h(e);return u&&(r._creationDataStorage.idx=n._idx),r._creationDataStorage.closePath=u,r._creationDataStorage.closeArray=c,n.applyToMesh(r,m),r}}o.x.CreateRibbon=h,i.Kj.CreateRibbon=(t,e,s=!1,r,i,n,o=!1,a,h)=>l(t,{pathArray:e,closeArray:s,closePath:r,offset:i,updatable:o,sideOrientation:a,instance:h},n)},75159:(t,e,s)=>{s.d(e,{Gc:()=>a,bC:()=>h});var r=s(58095),i=s(91243),n=s(48236),o=s(74742);function a(t,e,s=null){const r=e.path,n=e.shape,o=e.scale||1,a=e.rotation||0,h=0===e.cap?0:e.cap||i.Kj.NO_CAP,c=e.updatable,u=i.Kj._GetDefaultSideOrientation(e.sideOrientation),d=e.instance||null,_=e.invertUV||!1,m=e.closeShape||!1;return l(t,n,r,o,a,null,null,e.closePath||!1,m,h,!1,s,!!c,u,d,_,e.frontUVs||null,e.backUVs||null,e.firstNormal||null,!!e.adjustFrame)}function h(t,e,s=null){const r=e.path,n=e.shape,o=e.scaleFunction||(()=>1),a=e.rotationFunction||(()=>0),h=e.closePath||e.ribbonCloseArray||!1,c=e.closeShape||e.ribbonClosePath||!1,u=0===e.cap?0:e.cap||i.Kj.NO_CAP,d=e.updatable,_=e.firstNormal||null,m=e.adjustFrame||!1;return l(t,n,r,null,null,o,a,h,c,u,!0,s,!!d,i.Kj._GetDefaultSideOrientation(e.sideOrientation),e.instance||null,e.invertUV||!1,e.frontUVs||null,e.backUVs||null,_,m)}function l(t,e,s,a,h,l,c,u,d,_,m,f,p,y,x,g,b,R,P,M){const T=(t,e,s,n,o,a,h,l,c,u,d)=>{const _=s.getTangents(),m=s.getNormals(),f=s.getBinormals(),p=s.getDistances();if(d)for(let t=0;t<_.length;t++)if(0==_[t].x&&0==_[t].y&&0==_[t].z&&_[t].copyFrom(_[t-1]),0==m[t].x&&0==m[t].y&&0==m[t].z&&m[t].copyFrom(m[t-1]),0==f[t].x&&0==f[t].y&&0==f[t].z&&f[t].copyFrom(f[t-1]),t>0){let e=_[t-1];r.P.Dot(e,_[t])<0&&_[t].scaleInPlace(-1),e=m[t-1],r.P.Dot(e,m[t])<0&&m[t].scaleInPlace(-1),e=f[t-1],r.P.Dot(e,f[t])<0&&f[t].scaleInPlace(-1)}let y=0;const x=u&&l?l:()=>null!==a?a:0,g=u&&h?h:()=>null!==o?o:1;let b=c===i.Kj.NO_CAP||c===i.Kj.CAP_END?0:2;const R=r.jp.Matrix[0];for(let s=0;s<e.length;s++){const i=new Array,o=x(s,p[s]),a=g(s,p[s]);r.y3.RotationAxisToRef(_[s],y,R);for(let n=0;n<t.length;n++){const o=_[s].scale(t[n].z).add(m[s].scale(t[n].x)).add(f[s].scale(t[n].y)),h=r.P.Zero();r.P.TransformCoordinatesToRef(o,R,h),h.scaleInPlace(a).addInPlace(e[s]),i[n]=h}n[b]=i,y+=o,b++}const P=t=>{const e=Array(),s=r.P.Zero();let i;for(i=0;i<t.length;i++)s.addInPlace(t[i]);for(s.scaleInPlace(1/t.length),i=0;i<t.length;i++)e.push(s);return e};switch(c){case i.Kj.NO_CAP:break;case i.Kj.CAP_START:n[0]=P(n[2]),n[1]=n[2];break;case i.Kj.CAP_END:n[b]=n[b-1],n[b+1]=P(n[b-1]);break;case i.Kj.CAP_ALL:n[0]=P(n[2]),n[1]=n[2],n[b]=n[b-1],n[b+1]=P(n[b-1])}return n};let w,I;if(x){const t=x._creationDataStorage;return w=P?t.path3D.update(s,P):t.path3D.update(s),I=T(e,s,t.path3D,t.pathArray,a,h,l,c,t.cap,m,M),x=(0,n.LY)("",{pathArray:I,closeArray:!1,closePath:!1,offset:0,updatable:!1,sideOrientation:0,instance:x},f||void 0)}w=P?new o.$B(s,P):new o.$B(s);I=T(e,s,w,new Array,a,h,l,c,_=_<0||_>3?0:_,m,M);const A=(0,n.LY)(t,{pathArray:I,closeArray:u,closePath:d,updatable:p,sideOrientation:y,invertUV:g,frontUVs:b||void 0,backUVs:R||void 0},f);return A._creationDataStorage.pathArray=I,A._creationDataStorage.path3D=w,A._creationDataStorage.cap=_,A}i.Kj.ExtrudeShape=(t,e,s,r,n,o,h=null,l,c,u)=>a(t,{shape:e,path:s,scale:r,rotation:n,cap:0===o?0:o||i.Kj.NO_CAP,sideOrientation:c,instance:u,updatable:l},h),i.Kj.ExtrudeShapeCustom=(t,e,s,r,n,o,a,l,c,u,d,_)=>h(t,{shape:e,path:s,scaleFunction:r,rotationFunction:n,ribbonCloseArray:o,ribbonClosePath:a,cap:0===l?0:l||i.Kj.NO_CAP,sideOrientation:d,instance:_,updatable:u},c)},48087:(t,e,s)=>{s.d(e,{Qk:()=>h,jY:()=>a});var r=s(58095),i=s(91243),n=s(89209),o=s(47884);function a(t){const e=t.segments||32,s=t.diameterX||t.diameter||1,i=t.diameterY||t.diameter||1,a=t.diameterZ||t.diameter||1,h=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1,l=t.slice&&t.slice<=0?1:t.slice||1,c=0===t.sideOrientation?0:t.sideOrientation||n.x.DEFAULTSIDE,u=!!t.dedupTopBottomIndices,d=new r.P(s/2,i/2,a/2),_=2+e,m=2*_,f=[],p=[],y=[],x=[];for(let t=0;t<=_;t++){const e=t/_,s=e*Math.PI*l;for(let t=0;t<=m;t++){const i=t/m,n=i*Math.PI*2*h,a=r.y3.RotationZ(-s),l=r.y3.RotationY(n),c=r.P.TransformCoordinates(r.P.Up(),a),u=r.P.TransformCoordinates(c,l),_=u.multiply(d),f=u.divide(d).normalize();p.push(_.x,_.y,_.z),y.push(f.x,f.y,f.z),x.push(i,o.e.UseOpenGLOrientationForUV?1-e:e)}if(t>0){const e=p.length/3;for(let s=e-2*(m+1);s+m+2<e;s++)u?(t>1&&(f.push(s),f.push(s+1),f.push(s+m+1)),(t<_||l<1)&&(f.push(s+m+1),f.push(s+1),f.push(s+m+2))):(f.push(s),f.push(s+1),f.push(s+m+1),f.push(s+m+1),f.push(s+1),f.push(s+m+2))}}n.x._ComputeSides(c,p,f,y,x,t.frontUVs,t.backUVs);const g=new n.x;return g.indices=f,g.positions=p,g.normals=y,g.uvs=x,g}function h(t,e={},s=null){const r=new i.Kj(t,s);e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return a(e).applyToMesh(r,e.updatable),r}n.x.CreateSphere=a,i.Kj.CreateSphere=(t,e,s,r,i,n)=>h(t,{segments:e,diameterX:s,diameterY:s,diameterZ:s,sideOrientation:n,updatable:i},r)},10149:(t,e,s)=>{s.d(e,{cQ:()=>c});var r=s(58095),i=s(15631),n=s(91243),o=s(89209),a=s(89234),h=s(47884);function l(t){const e=t.faceUV||new Array(6),s=t.faceColors,l=t.pattern||n.Kj.NO_FLIP,c=t.width||t.size||1,u=t.height||t.size||1,d=t.depth||t.size||1,_=t.tileWidth||t.tileSize||1,m=t.tileHeight||t.tileSize||1,f=t.alignHorizontal||0,p=t.alignVertical||0,y=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE;for(let t=0;t<6;t++)void 0===e[t]&&(e[t]=new r.Lt(0,0,1,1)),s&&void 0===s[t]&&(s[t]=new i.HE(1,1,1,1));const x=c/2,g=u/2,b=d/2,R=[];for(let t=0;t<2;t++)R[t]=(0,a.mm)({pattern:l,tileWidth:_,tileHeight:m,width:c,height:u,alignVertical:p,alignHorizontal:f,sideOrientation:y});for(let t=2;t<4;t++)R[t]=(0,a.mm)({pattern:l,tileWidth:_,tileHeight:m,width:d,height:u,alignVertical:p,alignHorizontal:f,sideOrientation:y});let P=p;p===n.Kj.BOTTOM?P=n.Kj.TOP:p===n.Kj.TOP&&(P=n.Kj.BOTTOM);for(let t=4;t<6;t++)R[t]=(0,a.mm)({pattern:l,tileWidth:_,tileHeight:m,width:c,height:d,alignVertical:P,alignHorizontal:f,sideOrientation:y});let M=[],T=[],w=[],I=[];const A=[],z=[],F=[],D=[];let v=0,O=0;for(let t=0;t<6;t++){const i=R[t].positions.length;z[t]=[],F[t]=[];for(let e=0;e<i/3;e++)z[t].push(new r.P(R[t].positions[3*e],R[t].positions[3*e+1],R[t].positions[3*e+2])),F[t].push(new r.P(R[t].normals[3*e],R[t].normals[3*e+1],R[t].normals[3*e+2]));v=R[t].uvs.length,D[t]=[];for(let s=0;s<v;s+=2)D[t][s]=e[t].x+(e[t].z-e[t].x)*R[t].uvs[s],D[t][s+1]=e[t].y+(e[t].w-e[t].y)*R[t].uvs[s+1],h.e.UseOpenGLOrientationForUV&&(D[t][s+1]=1-D[t][s+1]);if(w=w.concat(D[t]),I=I.concat(R[t].indices.map((t=>t+O))),O+=z[t].length,s)for(let e=0;e<4;e++)A.push(s[t].r,s[t].g,s[t].b,s[t].a)}const C=new r.P(0,0,b),S=r.y3.RotationY(Math.PI);M=z[0].map((t=>r.P.TransformNormal(t,S).add(C))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[]),T=F[0].map((t=>r.P.TransformNormal(t,S))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[]),M=M.concat(z[1].map((t=>t.subtract(C))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[])),T=T.concat(F[1].map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[]));const L=new r.P(x,0,0),V=r.y3.RotationY(-Math.PI/2);M=M.concat(z[2].map((t=>r.P.TransformNormal(t,V).add(L))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[])),T=T.concat(F[2].map((t=>r.P.TransformNormal(t,V))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[]));const E=r.y3.RotationY(Math.PI/2);M=M.concat(z[3].map((t=>r.P.TransformNormal(t,E).subtract(L))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[])),T=T.concat(F[3].map((t=>r.P.TransformNormal(t,E))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[]));const N=new r.P(0,g,0),U=r.y3.RotationX(Math.PI/2);M=M.concat(z[4].map((t=>r.P.TransformNormal(t,U).add(N))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[])),T=T.concat(F[4].map((t=>r.P.TransformNormal(t,U))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[]));const B=r.y3.RotationX(-Math.PI/2);M=M.concat(z[5].map((t=>r.P.TransformNormal(t,B).subtract(N))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[])),T=T.concat(F[5].map((t=>r.P.TransformNormal(t,B))).map((t=>[t.x,t.y,t.z])).reduce(((t,e)=>t.concat(e)),[])),o.x._ComputeSides(y,M,I,T,w);const j=new o.x;if(j.indices=I,j.positions=M,j.normals=T,j.uvs=w,s){const t=y===o.x.DOUBLESIDE?A.concat(A):A;j.colors=t}return j}function c(t,e,s=null){const r=new n.Kj(t,s);e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return l(e).applyToMesh(r,e.updatable),r}o.x.CreateTiledBox=l},89234:(t,e,s)=>{s.d(e,{KA:()=>o,mm:()=>n});var r=s(91243),i=s(89209);function n(t){const e=t.pattern||r.Kj.NO_FLIP,s=t.tileWidth||t.tileSize||1,n=t.tileHeight||t.tileSize||1,o=t.alignHorizontal||0,a=t.alignVertical||0,h=t.width||t.size||1,l=Math.floor(h/s);let c=h-l*s;const u=t.height||t.size||1,d=Math.floor(u/n);let _=u-d*n;const m=s*l/2,f=n*d/2;let p=0,y=0,x=0,g=0,b=0,R=0;if(c>0||_>0){switch(x=-m,g=-f,b=m,R=f,o){case r.Kj.CENTER:c/=2,x-=c,b+=c;break;case r.Kj.LEFT:b+=c,p=-c/2;break;case r.Kj.RIGHT:x-=c,p=c/2}switch(a){case r.Kj.CENTER:_/=2,g-=_,R+=_;break;case r.Kj.BOTTOM:R+=_,y=-_/2;break;case r.Kj.TOP:g-=_,y=_/2}}const P=[],M=[],T=[];T[0]=[0,0,1,0,1,1,0,1],T[1]=[0,0,1,0,1,1,0,1],e!==r.Kj.ROTATE_TILE&&e!==r.Kj.ROTATE_ROW||(T[1]=[1,1,0,1,0,0,1,0]),e!==r.Kj.FLIP_TILE&&e!==r.Kj.FLIP_ROW||(T[1]=[1,0,0,0,0,1,1,1]),e!==r.Kj.FLIP_N_ROTATE_TILE&&e!==r.Kj.FLIP_N_ROTATE_ROW||(T[1]=[0,1,1,1,1,0,0,0]);let w=[];const I=[],A=[];let z=0;for(let t=0;t<d;t++)for(let i=0;i<l;i++)P.push(i*s-m+p,t*n-f+y,0),P.push((i+1)*s-m+p,t*n-f+y,0),P.push((i+1)*s-m+p,(t+1)*n-f+y,0),P.push(i*s-m+p,(t+1)*n-f+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),w=e===r.Kj.FLIP_TILE||e===r.Kj.ROTATE_TILE||e===r.Kj.FLIP_N_ROTATE_TILE?w.concat(T[(i%2+t%2)%2]):e===r.Kj.FLIP_ROW||e===r.Kj.ROTATE_ROW||e===r.Kj.FLIP_N_ROTATE_ROW?w.concat(T[t%2]):w.concat(T[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1),z+=4;if(c>0||_>0){const t=_>0&&(a===r.Kj.CENTER||a===r.Kj.TOP),i=_>0&&(a===r.Kj.CENTER||a===r.Kj.BOTTOM),h=c>0&&(o===r.Kj.CENTER||o===r.Kj.RIGHT),u=c>0&&(o===r.Kj.CENTER||o===r.Kj.LEFT);let T,F,D,v,O=[];if(t&&h&&(P.push(x+p,g+y,0),P.push(-m+p,g+y,0),P.push(-m+p,g+_+y,0),P.push(x+p,g+_+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,T=1-c/s,F=1-_/n,D=1,v=1,O=[T,F,D,F,D,v,T,v],e===r.Kj.ROTATE_ROW&&(O=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),e===r.Kj.FLIP_ROW&&(O=[1-T,F,1-D,F,1-D,v,1-T,v]),e===r.Kj.FLIP_N_ROTATE_ROW&&(O=[T,1-F,D,1-F,D,1-v,T,1-v]),w=w.concat(O),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),t&&u&&(P.push(m+p,g+y,0),P.push(b+p,g+y,0),P.push(b+p,g+_+y,0),P.push(m+p,g+_+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,T=0,F=1-_/n,D=c/s,v=1,O=[T,F,D,F,D,v,T,v],(e===r.Kj.ROTATE_ROW||e===r.Kj.ROTATE_TILE&&l%2==0)&&(O=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),(e===r.Kj.FLIP_ROW||e===r.Kj.FLIP_TILE&&l%2==0)&&(O=[1-T,F,1-D,F,1-D,v,1-T,v]),(e===r.Kj.FLIP_N_ROTATE_ROW||e===r.Kj.FLIP_N_ROTATE_TILE&&l%2==0)&&(O=[T,1-F,D,1-F,D,1-v,T,1-v]),w=w.concat(O),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),i&&h&&(P.push(x+p,f+y,0),P.push(-m+p,f+y,0),P.push(-m+p,R+y,0),P.push(x+p,R+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,T=1-c/s,F=0,D=1,v=_/n,O=[T,F,D,F,D,v,T,v],(e===r.Kj.ROTATE_ROW&&d%2==1||e===r.Kj.ROTATE_TILE&&d%1==0)&&(O=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),(e===r.Kj.FLIP_ROW&&d%2==1||e===r.Kj.FLIP_TILE&&d%2==0)&&(O=[1-T,F,1-D,F,1-D,v,1-T,v]),(e===r.Kj.FLIP_N_ROTATE_ROW&&d%2==1||e===r.Kj.FLIP_N_ROTATE_TILE&&d%2==0)&&(O=[T,1-F,D,1-F,D,1-v,T,1-v]),w=w.concat(O),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),i&&u&&(P.push(m+p,f+y,0),P.push(b+p,f+y,0),P.push(b+p,R+y,0),P.push(m+p,R+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,T=0,F=0,D=c/s,v=_/n,O=[T,F,D,F,D,v,T,v],(e===r.Kj.ROTATE_ROW&&d%2==1||e===r.Kj.ROTATE_TILE&&(d+l)%2==1)&&(O=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),(e===r.Kj.FLIP_ROW&&d%2==1||e===r.Kj.FLIP_TILE&&(d+l)%2==1)&&(O=[1-T,F,1-D,F,1-D,v,1-T,v]),(e===r.Kj.FLIP_N_ROTATE_ROW&&d%2==1||e===r.Kj.FLIP_N_ROTATE_TILE&&(d+l)%2==1)&&(O=[T,1-F,D,1-F,D,1-v,T,1-v]),w=w.concat(O),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),t){const t=[];T=0,F=1-_/n,D=1,v=1,t[0]=[T,F,D,F,D,v,T,v],t[1]=[T,F,D,F,D,v,T,v],e!==r.Kj.ROTATE_TILE&&e!==r.Kj.ROTATE_ROW||(t[1]=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),e!==r.Kj.FLIP_TILE&&e!==r.Kj.FLIP_ROW||(t[1]=[1-T,F,1-D,F,1-D,v,1-T,v]),e!==r.Kj.FLIP_N_ROTATE_TILE&&e!==r.Kj.FLIP_N_ROTATE_ROW||(t[1]=[T,1-F,D,1-F,D,1-v,T,1-v]);for(let i=0;i<l;i++)P.push(i*s-m+p,g+y,0),P.push((i+1)*s-m+p,g+y,0),P.push((i+1)*s-m+p,g+_+y,0),P.push(i*s-m+p,g+_+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,w=e===r.Kj.FLIP_TILE||e===r.Kj.ROTATE_TILE||e===r.Kj.FLIP_N_ROTATE_TILE?w.concat(t[(i+1)%2]):e===r.Kj.FLIP_ROW||e===r.Kj.ROTATE_ROW||e===r.Kj.FLIP_N_ROTATE_ROW?w.concat(t[1]):w.concat(t[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(i){const t=[];T=0,F=0,D=1,v=_/n,t[0]=[T,F,D,F,D,v,T,v],t[1]=[T,F,D,F,D,v,T,v],e!==r.Kj.ROTATE_TILE&&e!==r.Kj.ROTATE_ROW||(t[1]=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),e!==r.Kj.FLIP_TILE&&e!==r.Kj.FLIP_ROW||(t[1]=[1-T,F,1-D,F,1-D,v,1-T,v]),e!==r.Kj.FLIP_N_ROTATE_TILE&&e!==r.Kj.FLIP_N_ROTATE_ROW||(t[1]=[T,1-F,D,1-F,D,1-v,T,1-v]);for(let i=0;i<l;i++)P.push(i*s-m+p,R-_+y,0),P.push((i+1)*s-m+p,R-_+y,0),P.push((i+1)*s-m+p,R+y,0),P.push(i*s-m+p,R+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,w=e===r.Kj.FLIP_TILE||e===r.Kj.ROTATE_TILE||e===r.Kj.FLIP_N_ROTATE_TILE?w.concat(t[(i+d)%2]):e===r.Kj.FLIP_ROW||e===r.Kj.ROTATE_ROW||e===r.Kj.FLIP_N_ROTATE_ROW?w.concat(t[d%2]):w.concat(t[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(h){const t=[];T=1-c/s,F=0,D=1,v=1,t[0]=[T,F,D,F,D,v,T,v],t[1]=[T,F,D,F,D,v,T,v],e!==r.Kj.ROTATE_TILE&&e!==r.Kj.ROTATE_ROW||(t[1]=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),e!==r.Kj.FLIP_TILE&&e!==r.Kj.FLIP_ROW||(t[1]=[1-T,F,1-D,F,1-D,v,1-T,v]),e!==r.Kj.FLIP_N_ROTATE_TILE&&e!==r.Kj.FLIP_N_ROTATE_ROW||(t[1]=[T,1-F,D,1-F,D,1-v,T,1-v]);for(let s=0;s<d;s++)P.push(x+p,s*n-f+y,0),P.push(x+c+p,s*n-f+y,0),P.push(x+c+p,(s+1)*n-f+y,0),P.push(x+p,(s+1)*n-f+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,w=e===r.Kj.FLIP_TILE||e===r.Kj.ROTATE_TILE||e===r.Kj.FLIP_N_ROTATE_TILE?w.concat(t[(s+1)%2]):e===r.Kj.FLIP_ROW||e===r.Kj.ROTATE_ROW||e===r.Kj.FLIP_N_ROTATE_ROW?w.concat(t[s%2]):w.concat(t[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(u){const t=[];T=0,F=0,D=c/n,v=1,t[0]=[T,F,D,F,D,v,T,v],t[1]=[T,F,D,F,D,v,T,v],e!==r.Kj.ROTATE_TILE&&e!==r.Kj.ROTATE_ROW||(t[1]=[1-T,1-F,1-D,1-F,1-D,1-v,1-T,1-v]),e!==r.Kj.FLIP_TILE&&e!==r.Kj.FLIP_ROW||(t[1]=[1-T,F,1-D,F,1-D,v,1-T,v]),e!==r.Kj.FLIP_N_ROTATE_TILE&&e!==r.Kj.FLIP_N_ROTATE_ROW||(t[1]=[T,1-F,D,1-F,D,1-v,T,1-v]);for(let s=0;s<d;s++)P.push(b-c+p,s*n-f+y,0),P.push(b+p,s*n-f+y,0),P.push(b+p,(s+1)*n-f+y,0),P.push(b-c+p,(s+1)*n-f+y,0),A.push(z,z+1,z+3,z+1,z+2,z+3),z+=4,w=e===r.Kj.FLIP_TILE||e===r.Kj.ROTATE_TILE||e===r.Kj.FLIP_N_ROTATE_TILE?w.concat(t[(s+l)%2]):e===r.Kj.FLIP_ROW||e===r.Kj.ROTATE_ROW||e===r.Kj.FLIP_N_ROTATE_ROW?w.concat(t[s%2]):w.concat(t[0]),I.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),M.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}}const F=0===t.sideOrientation?0:t.sideOrientation||i.x.DEFAULTSIDE;i.x._ComputeSides(F,P,A,M,w,t.frontUVs,t.backUVs);const D=new i.x;D.indices=A,D.positions=P,D.normals=M,D.uvs=w;const v=F===i.x.DOUBLESIDE?I.concat(I):I;return D.colors=v,D}function o(t,e,s=null){const i=new r.Kj(t,s);e.sideOrientation=r.Kj._GetDefaultSideOrientation(e.sideOrientation),i._originalBuilderSideOrientation=e.sideOrientation;return n(e).applyToMesh(i,e.updatable),i}i.x.CreateTiledPlane=n},49353:(t,e,s)=>{s.d(e,{eu:()=>h,h5:()=>a});var r=s(58095),i=s(91243),n=s(89209),o=s(47884);function a(t){const e=[],s=[],i=[],a=[],h=t.diameter||1,l=t.thickness||.5,c=t.tessellation||16,u=0===t.sideOrientation?0:t.sideOrientation||n.x.DEFAULTSIDE,d=c+1;for(let t=0;t<=c;t++){const n=t/c,u=t*Math.PI*2/c-Math.PI/2,_=r.y3.Translation(h/2,0,0).multiply(r.y3.RotationY(u));for(let h=0;h<=c;h++){const u=1-h/c,m=h*Math.PI*2/c+Math.PI,f=Math.cos(m),p=Math.sin(m);let y=new r.P(f,p,0),x=y.scale(l/2);const g=new r.FM(n,u);x=r.P.TransformCoordinates(x,_),y=r.P.TransformNormal(y,_),s.push(x.x,x.y,x.z),i.push(y.x,y.y,y.z),a.push(g.x,o.e.UseOpenGLOrientationForUV?1-g.y:g.y);const b=(t+1)%d,R=(h+1)%d;e.push(t*d+h),e.push(t*d+R),e.push(b*d+h),e.push(t*d+R),e.push(b*d+R),e.push(b*d+h)}}n.x._ComputeSides(u,s,e,i,a,t.frontUVs,t.backUVs);const _=new n.x;return _.indices=e,_.positions=s,_.normals=i,_.uvs=a,_}function h(t,e={},s){const r=new i.Kj(t,s);e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return a(e).applyToMesh(r,e.updatable),r}n.x.CreateTorus=a,i.Kj.CreateTorus=(t,e,s,r,i,n,o)=>h(t,{diameter:e,thickness:s,tessellation:r,sideOrientation:o,updatable:n},i)},93471:(t,e,s)=>{s.d(e,{eB:()=>h});var r=s(58095),i=s(91243),n=s(89209),o=s(47884);function a(t){const e=new Array,s=new Array,i=new Array,a=new Array,h=t.radius||2,l=t.tube||.5,c=t.radialSegments||32,u=t.tubularSegments||32,d=t.p||2,_=t.q||3,m=0===t.sideOrientation?0:t.sideOrientation||n.x.DEFAULTSIDE,f=t=>{const e=Math.cos(t),s=Math.sin(t),i=_/d*t,n=Math.cos(i),o=h*(2+n)*.5*e,a=h*(2+n)*s*.5,l=h*Math.sin(i)*.5;return new r.P(o,a,l)};let p,y;for(p=0;p<=c;p++){const t=p%c/c*2*d*Math.PI,e=f(t),i=f(t+.01),n=i.subtract(e);let h=i.add(e);const _=r.P.Cross(n,h);for(h=r.P.Cross(_,n),_.normalize(),h.normalize(),y=0;y<u;y++){const t=y%u/u*2*Math.PI,r=-l*Math.cos(t),i=l*Math.sin(t);s.push(e.x+r*h.x+i*_.x),s.push(e.y+r*h.y+i*_.y),s.push(e.z+r*h.z+i*_.z),a.push(p/c),a.push(o.e.UseOpenGLOrientationForUV?1-y/u:y/u)}}for(p=0;p<c;p++)for(y=0;y<u;y++){const t=(y+1)%u,s=p*u+y,r=(p+1)*u+y,i=(p+1)*u+t,n=p*u+t;e.push(n),e.push(r),e.push(s),e.push(n),e.push(i),e.push(r)}n.x.ComputeNormals(s,e,i),n.x._ComputeSides(m,s,e,i,a,t.frontUVs,t.backUVs);const x=new n.x;return x.indices=e,x.positions=s,x.normals=i,x.uvs=a,x}function h(t,e={},s){const r=new i.Kj(t,s);e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),r._originalBuilderSideOrientation=e.sideOrientation;return a(e).applyToMesh(r,e.updatable),r}n.x.CreateTorusKnot=a,i.Kj.CreateTorusKnot=(t,e,s,r,i,n,o,a,l,c)=>h(t,{radius:e,tube:s,radialSegments:r,tubularSegments:i,p:n,q:o,sideOrientation:c,updatable:l},a)},42387:(t,e,s)=>{s.d(e,{_:()=>a});var r=s(58095),i=s(91243),n=s(48236),o=s(74742);function a(t,e,s=null){const a=e.path;let h=e.instance,l=1;void 0!==e.radius?l=e.radius:h&&(l=h._creationDataStorage.radius);const c=e.tessellation||64,u=e.radiusFunction||null;let d=e.cap||i.Kj.NO_CAP;const _=e.invertUV||!1,m=e.updatable,f=i.Kj._GetDefaultSideOrientation(e.sideOrientation);e.arc=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1;const p=(t,e,s,n,o,a,h,l)=>{const c=e.getTangents(),u=e.getNormals(),d=e.getDistances(),_=2*Math.PI/o*l,m=a||(()=>n);let f,p,y,x;const g=r.jp.Matrix[0];let b=h===i.Kj.NO_CAP||h===i.Kj.CAP_END?0:2;for(let e=0;e<t.length;e++){p=m(e,d[e]),f=Array(),y=u[e];for(let s=0;s<o;s++)r.y3.RotationAxisToRef(c[e],_*s,g),x=f[s]?f[s]:r.P.Zero(),r.P.TransformCoordinatesToRef(y,g,x),x.scaleInPlace(p).addInPlace(t[e]),f[s]=x;s[b]=f,b++}const R=(e,s)=>{const r=Array();for(let i=0;i<e;i++)r.push(t[s]);return r};switch(h){case i.Kj.NO_CAP:break;case i.Kj.CAP_START:s[0]=R(o,0),s[1]=s[2].slice(0);break;case i.Kj.CAP_END:s[b]=s[b-1].slice(0),s[b+1]=R(o,t.length-1);break;case i.Kj.CAP_ALL:s[0]=R(o,0),s[1]=s[2].slice(0),s[b]=s[b-1].slice(0),s[b+1]=R(o,t.length-1)}return s};let y,x;if(h){const t=h._creationDataStorage,s=e.arc||t.arc;return y=t.path3D.update(a),x=p(a,y,t.pathArray,l,t.tessellation,u,t.cap,s),h=(0,n.LY)("",{pathArray:x,instance:h}),t.path3D=y,t.pathArray=x,t.arc=s,t.radius=l,h}y=new o.$B(a);d=d<0||d>3?0:d,x=p(a,y,new Array,l,c,u,d,e.arc);const g=(0,n.LY)(t,{pathArray:x,closePath:!0,closeArray:!1,updatable:m,sideOrientation:f,invertUV:_,frontUVs:e.frontUVs,backUVs:e.backUVs},s);return g._creationDataStorage.pathArray=x,g._creationDataStorage.path3D=y,g._creationDataStorage.tessellation=c,g._creationDataStorage.cap=d,g._creationDataStorage.arc=e.arc,g._creationDataStorage.radius=l,g}i.Kj.CreateTube=(t,e,s,r,i,n,o,h,l,c)=>a(t,{path:e,radius:s,tessellation:r,radiusFunction:i,arc:1,cap:n,updatable:h,sideOrientation:l,instance:c},o)},73848:(t,e,s)=>{s.d(e,{J:()=>h});var r=s(13514),i=s(11758),n=s(89209);function o(t,e,s,r,i,n){const o=new t.DecoderBuffer;o.Init(e,e.byteLength);const a=new t.Decoder;let h,l;try{const e=a.GetEncodedGeometryType(o);switch(e){case t.TRIANGULAR_MESH:h=new t.Mesh,l=a.DecodeBufferToMesh(o,h);break;case t.POINT_CLOUD:h=new t.PointCloud,l=a.DecodeBufferToPointCloud(o,h);break;default:throw new Error(`Invalid geometry type ${e}`)}if(!l.ok()||!h.ptr)throw new Error(l.error_msg());if(e===t.TRIANGULAR_MESH){const e=3*h.num_faces(),s=4*e,i=t._malloc(s);try{a.GetTrianglesUInt32Array(h,s,i);const n=new Uint32Array(e);n.set(new Uint32Array(t.HEAPF32.buffer,i,e)),r(n)}finally{t._free(i)}}const c=(e,s,r=1)=>{const n=s.num_components(),o=h.num_points(),l=o*n,c=l*Float32Array.BYTES_PER_ELEMENT,u=t._malloc(c);try{a.GetAttributeDataArrayForAllPoints(h,s,t.DT_FLOAT32,c,u);const d=new Float32Array(t.HEAPF32.buffer,u,l);if("color"===e&&3===n){const t=new Float32Array(4*o);for(let e=0,s=0;e<t.length;e+=4,s+=n)t[e+0]=d[s+0],t[e+1]=d[s+1],t[e+2]=d[s+2],t[e+3]=1;i(e,t)}else{const s=new Float32Array(l);if(s.set(new Float32Array(t.HEAPF32.buffer,u,l)),1!==r)for(let t=0;t<s.length;t++)s[t]=s[t]/r;i(e,s)}}finally{t._free(u)}};if(s)for(const t in s){const e=s[t],r=a.GetAttributeByUniqueId(h,e);c(t,r,n&&n[t]||1)}else{const e={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"};for(const s in e){const r=a.GetAttributeId(h,t[e[s]]);if(-1!==r){c(s,a.GetAttribute(h,r))}}}}finally{h&&t.destroy(h),t.destroy(a),t.destroy(o)}}function a(){let t;onmessage=e=>{const s=e.data;switch(s.id){case"init":{const e=s.decoder;e.url&&(importScripts(e.url),t=DracoDecoderModule({wasmBinary:e.wasmBinary})),postMessage("done");break}case"decodeMesh":if(!t)throw new Error("Draco decoder module is not available");t.then((t=>{o(t,s.dataView,s.attributes,(t=>{postMessage({id:"indices",value:t},[t.buffer])}),((t,e)=>{postMessage({id:t,value:e},[e.buffer])})),postMessage("done")}))}}}class h{static get DecoderAvailable(){const t=h.Configuration.decoder;return!!(t.wasmUrl&&t.wasmBinaryUrl&&"object"==typeof WebAssembly||t.fallbackUrl)}static GetDefaultNumWorkers(){return"object"==typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),4):1}static get Default(){return h._Default||(h._Default=new h),h._Default}constructor(t=h.DefaultNumWorkers){const e=h.Configuration.decoder,s=e.wasmUrl&&e.wasmBinaryUrl&&"object"==typeof WebAssembly?{url:r.w1.GetAbsoluteUrl(e.wasmUrl),wasmBinaryPromise:r.w1.LoadFileAsync(r.w1.GetAbsoluteUrl(e.wasmBinaryUrl))}:{url:r.w1.GetAbsoluteUrl(e.fallbackUrl),wasmBinaryPromise:Promise.resolve(void 0)};t&&"function"==typeof Worker&&"function"==typeof URL?this._workerPoolPromise=s.wasmBinaryPromise.then((e=>{const r=`${o}(${a})()`,n=URL.createObjectURL(new Blob([r],{type:"application/javascript"}));return new i.v(t,(()=>new Promise(((t,r)=>{const i=new Worker(n),o=t=>{i.removeEventListener("error",o),i.removeEventListener("message",a),r(t)},a=e=>{"done"===e.data&&(i.removeEventListener("error",o),i.removeEventListener("message",a),t(i))};i.addEventListener("error",o),i.addEventListener("message",a),i.postMessage({id:"init",decoder:{url:s.url,wasmBinary:e}})}))))})):this._decoderModulePromise=s.wasmBinaryPromise.then((t=>{if(!s.url)throw new Error("Draco decoder module is not available");return r.w1.LoadScriptAsync(s.url).then((()=>{return e=t,new Promise((t=>{DracoDecoderModule({wasmBinary:e}).then((e=>{t({module:e})}))}));var e}))}))}dispose(){this._workerPoolPromise&&this._workerPoolPromise.then((t=>{t.dispose()})),delete this._workerPoolPromise,delete this._decoderModulePromise}whenReadyAsync(){return this._workerPoolPromise?this._workerPoolPromise.then((()=>{})):this._decoderModulePromise?this._decoderModulePromise.then((()=>{})):Promise.resolve()}decodeMeshAsync(t,e,s){const r=t instanceof ArrayBuffer?new Uint8Array(t):t;if(this._workerPoolPromise)return this._workerPoolPromise.then((t=>new Promise(((i,o)=>{t.push(((t,a)=>{const h=new n.x,l=e=>{t.removeEventListener("error",l),t.removeEventListener("message",c),o(e),a()},c=e=>{if("done"===e.data)t.removeEventListener("error",l),t.removeEventListener("message",c),i(h),a();else if("indices"===e.data.id)h.indices=e.data.value;else{const t=s&&s[e.data.id]?s[e.data.id]:1;if(1!==t)for(let s=0;s<e.data.value.length;s++)e.data.value[s]=e.data.value[s]/t;h.set(e.data.value,e.data.id)}};t.addEventListener("error",l),t.addEventListener("message",c);const u=new Uint8Array(r.byteLength);u.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),t.postMessage({id:"decodeMesh",dataView:u,attributes:e},[u.buffer])}))}))));if(this._decoderModulePromise)return this._decoderModulePromise.then((t=>{const i=new n.x;return o(t.module,r,e,(t=>{i.indices=t}),((t,e)=>{i.set(e,t)}),s),i}));throw new Error("Draco decoder module is not available")}}h.Configuration={decoder:{wasmUrl:"https://preview.babylonjs.com/draco_wasm_wrapper_gltf.js",wasmBinaryUrl:"https://preview.babylonjs.com/draco_decoder_gltf.wasm",fallbackUrl:"https://preview.babylonjs.com/draco_decoder_gltf.js"}},h.DefaultNumWorkers=h.GetDefaultNumWorkers(),h._Default=null},19488:(t,e,s)=>{s.d(e,{J:()=>r.J});var r=s(73848);s(76304)},76304:(t,e,s)=>{s.d(e,{K:()=>i});var r=s(13514);class i{static get Default(){return i._Default||(i._Default=new i),i._Default}constructor(){const t=i.Configuration.decoder;this._decoderModulePromise=r.w1.LoadScriptAsync(r.w1.GetAbsoluteUrl(t.url)).then((()=>MeshoptDecoder.ready))}dispose(){delete this._decoderModulePromise}decodeGltfBufferAsync(t,e,s,r,i){return this._decoderModulePromise.then((()=>{const n=new Uint8Array(e*s);return MeshoptDecoder.decodeGltfBuffer(n,e,s,t,r,i),n}))}}i.Configuration={decoder:{url:"https://preview.babylonjs.com/meshopt_decoder.js"}},i._Default=null},21254:(t,e,s)=>{s.d(e,{M:()=>i});var r=s(23582);class i extends r.h{constructor(t){super(),this._buffer=t}get underlyingResource(){return this._buffer}}},84157:(t,e,s)=>{s.d(e,{C:()=>i});var r=s(23582);class i extends r.h{constructor(t){super(),this._buffer=t}get underlyingResource(){return this._buffer}}},71419:(t,e,s)=>{s.d(e,{x:()=>P});var r=s(62897),i=s(65273),n=s(58095),o=s(37290),a=s(72208),h=s(89209),l=s(30700),c=s(5292),u=s(91859),d=s(83353),_=s(72521),m=s(77851),f=s(93701),p=s(15631),y=s(48154),x=s(43048),g=s(48620);class b{constructor(){this.facetNb=0,this.partitioningSubdivisions=10,this.partitioningBBoxRatio=1.01,this.facetDataEnabled=!1,this.facetParameters={},this.bbSize=n.P.Zero(),this.subDiv={max:1,X:1,Y:1,Z:1},this.facetDepthSort=!1,this.facetDepthSortEnabled=!1}}class R{constructor(){this._hasVertexAlpha=!1,this._useVertexColors=!0,this._numBoneInfluencers=4,this._applyFog=!0,this._receiveShadows=!1,this._facetData=new b,this._visibility=1,this._skeleton=null,this._layerMask=268435455,this._computeBonesUsingShaders=!0,this._isActive=!1,this._onlyForInstances=!1,this._isActiveIntermediate=!1,this._onlyForInstancesIntermediate=!1,this._actAsRegularMesh=!1,this._currentLOD=null,this._currentLODIsUpToDate=!1,this._collisionRetryCount=3,this._morphTargetManager=null,this._renderingGroupId=0,this._bakedVertexAnimationManager=null,this._material=null,this._positions=null,this._pointerOverDisableMeshTesting=!1,this._meshCollisionData=new _.a,this._enableDistantPicking=!1}}class P extends l.Y{static get BILLBOARDMODE_NONE(){return l.Y.BILLBOARDMODE_NONE}static get BILLBOARDMODE_X(){return l.Y.BILLBOARDMODE_X}static get BILLBOARDMODE_Y(){return l.Y.BILLBOARDMODE_Y}static get BILLBOARDMODE_Z(){return l.Y.BILLBOARDMODE_Z}static get BILLBOARDMODE_ALL(){return l.Y.BILLBOARDMODE_ALL}static get BILLBOARDMODE_USE_POSITION(){return l.Y.BILLBOARDMODE_USE_POSITION}get facetNb(){return this._internalAbstractMeshDataInfo._facetData.facetNb}get partitioningSubdivisions(){return this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions}set partitioningSubdivisions(t){this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions=t}get partitioningBBoxRatio(){return this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio}set partitioningBBoxRatio(t){this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio=t}get mustDepthSortFacets(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSort}set mustDepthSortFacets(t){this._internalAbstractMeshDataInfo._facetData.facetDepthSort=t}get facetDepthSortFrom(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom}set facetDepthSortFrom(t){this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom=t}get collisionRetryCount(){return this._internalAbstractMeshDataInfo._collisionRetryCount}set collisionRetryCount(t){this._internalAbstractMeshDataInfo._collisionRetryCount=t}get isFacetDataEnabled(){return this._internalAbstractMeshDataInfo._facetData.facetDataEnabled}get morphTargetManager(){return this._internalAbstractMeshDataInfo._morphTargetManager}set morphTargetManager(t){this._internalAbstractMeshDataInfo._morphTargetManager!==t&&(this._internalAbstractMeshDataInfo._morphTargetManager=t,this._syncGeometryWithMorphTargetManager())}get bakedVertexAnimationManager(){return this._internalAbstractMeshDataInfo._bakedVertexAnimationManager}set bakedVertexAnimationManager(t){this._internalAbstractMeshDataInfo._bakedVertexAnimationManager!==t&&(this._internalAbstractMeshDataInfo._bakedVertexAnimationManager=t,this._markSubMeshesAsAttributesDirty())}_syncGeometryWithMorphTargetManager(){}_updateNonUniformScalingState(t){return!!super._updateNonUniformScalingState(t)&&(this._markSubMeshesAsMiscDirty(),!0)}set onCollide(t){this._internalAbstractMeshDataInfo._meshCollisionData._onCollideObserver&&this.onCollideObservable.remove(this._internalAbstractMeshDataInfo._meshCollisionData._onCollideObserver),this._internalAbstractMeshDataInfo._meshCollisionData._onCollideObserver=this.onCollideObservable.add(t)}set onCollisionPositionChange(t){this._internalAbstractMeshDataInfo._meshCollisionData._onCollisionPositionChangeObserver&&this.onCollisionPositionChangeObservable.remove(this._internalAbstractMeshDataInfo._meshCollisionData._onCollisionPositionChangeObserver),this._internalAbstractMeshDataInfo._meshCollisionData._onCollisionPositionChangeObserver=this.onCollisionPositionChangeObservable.add(t)}get visibility(){return this._internalAbstractMeshDataInfo._visibility}set visibility(t){if(this._internalAbstractMeshDataInfo._visibility===t)return;const e=this._internalAbstractMeshDataInfo._visibility;this._internalAbstractMeshDataInfo._visibility=t,(1===e&&1!==t||1!==e&&1===t)&&this._markSubMeshesAsMiscDirty()}get pointerOverDisableMeshTesting(){return this._internalAbstractMeshDataInfo._pointerOverDisableMeshTesting}set pointerOverDisableMeshTesting(t){this._internalAbstractMeshDataInfo._pointerOverDisableMeshTesting=t}get renderingGroupId(){return this._internalAbstractMeshDataInfo._renderingGroupId}set renderingGroupId(t){this._internalAbstractMeshDataInfo._renderingGroupId=t}get material(){return this._internalAbstractMeshDataInfo._material}set material(t){this._internalAbstractMeshDataInfo._material!==t&&(this._internalAbstractMeshDataInfo._material&&this._internalAbstractMeshDataInfo._material.meshMap&&(this._internalAbstractMeshDataInfo._material.meshMap[this.uniqueId]=void 0),this._internalAbstractMeshDataInfo._material=t,t&&t.meshMap&&(t.meshMap[this.uniqueId]=this),this.onMaterialChangedObservable.hasObservers()&&this.onMaterialChangedObservable.notifyObservers(this),this.subMeshes&&(this.resetDrawCache(),this._unBindEffect()))}getMaterialForRenderPass(t){var e;return null===(e=this._internalAbstractMeshDataInfo._materialForRenderPass)||void 0===e?void 0:e[t]}setMaterialForRenderPass(t,e){this.resetDrawCache(t),this._internalAbstractMeshDataInfo._materialForRenderPass||(this._internalAbstractMeshDataInfo._materialForRenderPass=[]),this._internalAbstractMeshDataInfo._materialForRenderPass[t]=e}get receiveShadows(){return this._internalAbstractMeshDataInfo._receiveShadows}set receiveShadows(t){this._internalAbstractMeshDataInfo._receiveShadows!==t&&(this._internalAbstractMeshDataInfo._receiveShadows=t,this._markSubMeshesAsLightDirty())}get hasVertexAlpha(){return this._internalAbstractMeshDataInfo._hasVertexAlpha}set hasVertexAlpha(t){this._internalAbstractMeshDataInfo._hasVertexAlpha!==t&&(this._internalAbstractMeshDataInfo._hasVertexAlpha=t,this._markSubMeshesAsAttributesDirty(),this._markSubMeshesAsMiscDirty())}get useVertexColors(){return this._internalAbstractMeshDataInfo._useVertexColors}set useVertexColors(t){this._internalAbstractMeshDataInfo._useVertexColors!==t&&(this._internalAbstractMeshDataInfo._useVertexColors=t,this._markSubMeshesAsAttributesDirty())}get computeBonesUsingShaders(){return this._internalAbstractMeshDataInfo._computeBonesUsingShaders}set computeBonesUsingShaders(t){this._internalAbstractMeshDataInfo._computeBonesUsingShaders!==t&&(this._internalAbstractMeshDataInfo._computeBonesUsingShaders=t,this._markSubMeshesAsAttributesDirty())}get numBoneInfluencers(){return this._internalAbstractMeshDataInfo._numBoneInfluencers}set numBoneInfluencers(t){this._internalAbstractMeshDataInfo._numBoneInfluencers!==t&&(this._internalAbstractMeshDataInfo._numBoneInfluencers=t,this._markSubMeshesAsAttributesDirty())}get applyFog(){return this._internalAbstractMeshDataInfo._applyFog}set applyFog(t){this._internalAbstractMeshDataInfo._applyFog!==t&&(this._internalAbstractMeshDataInfo._applyFog=t,this._markSubMeshesAsMiscDirty())}get enableDistantPicking(){return this._internalAbstractMeshDataInfo._enableDistantPicking}set enableDistantPicking(t){this._internalAbstractMeshDataInfo._enableDistantPicking=t}get layerMask(){return this._internalAbstractMeshDataInfo._layerMask}set layerMask(t){t!==this._internalAbstractMeshDataInfo._layerMask&&(this._internalAbstractMeshDataInfo._layerMask=t,this._resyncLightSources())}get collisionMask(){return this._internalAbstractMeshDataInfo._meshCollisionData._collisionMask}set collisionMask(t){this._internalAbstractMeshDataInfo._meshCollisionData._collisionMask=isNaN(t)?-1:t}get collisionResponse(){return this._internalAbstractMeshDataInfo._meshCollisionData._collisionResponse}set collisionResponse(t){this._internalAbstractMeshDataInfo._meshCollisionData._collisionResponse=t}get collisionGroup(){return this._internalAbstractMeshDataInfo._meshCollisionData._collisionGroup}set collisionGroup(t){this._internalAbstractMeshDataInfo._meshCollisionData._collisionGroup=isNaN(t)?-1:t}get surroundingMeshes(){return this._internalAbstractMeshDataInfo._meshCollisionData._surroundingMeshes}set surroundingMeshes(t){this._internalAbstractMeshDataInfo._meshCollisionData._surroundingMeshes=t}get lightSources(){return this._lightSources}get _positions(){return null}set skeleton(t){const e=this._internalAbstractMeshDataInfo._skeleton;e&&e.needInitialSkinMatrix&&e._unregisterMeshWithPoseMatrix(this),t&&t.needInitialSkinMatrix&&t._registerMeshWithPoseMatrix(this),this._internalAbstractMeshDataInfo._skeleton=t,this._internalAbstractMeshDataInfo._skeleton||(this._bonesTransformMatrices=null),this._markSubMeshesAsAttributesDirty()}get skeleton(){return this._internalAbstractMeshDataInfo._skeleton}constructor(t,e=null){switch(super(t,e,!1),this._internalAbstractMeshDataInfo=new R,this._waitingMaterialId=null,this.cullingStrategy=P.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,this.onCollideObservable=new r.y$,this.onCollisionPositionChangeObservable=new r.y$,this.onMaterialChangedObservable=new r.y$,this.definedFacingForward=!0,this._occlusionQuery=null,this._renderingGroup=null,this.alphaIndex=Number.MAX_VALUE,this.isVisible=!0,this.isPickable=!0,this.isNearPickable=!1,this.isNearGrabbable=!1,this.showSubMeshesBoundingBox=!1,this.isBlocker=!1,this.enablePointerMoveEvents=!1,this.outlineColor=p.Wo.Red(),this.outlineWidth=.02,this.overlayColor=p.Wo.Red(),this.overlayAlpha=.5,this.useOctreeForRenderingSelection=!0,this.useOctreeForPicking=!0,this.useOctreeForCollisions=!0,this.alwaysSelectAsActiveMesh=!1,this.doNotSyncBoundingInfo=!1,this.actionManager=null,this.ellipsoid=new n.P(.5,1,.5),this.ellipsoidOffset=new n.P(0,0,0),this.edgesWidth=1,this.edgesColor=new p.HE(1,0,0,1),this._edgesRenderer=null,this._masterMesh=null,this._boundingInfo=null,this._boundingInfoIsDirty=!0,this._renderId=0,this._intersectionsInProgress=new Array,this._unIndexed=!1,this._lightSources=new Array,this._waitingData={lods:null,actions:null,freezeWorldMatrix:null},this._bonesTransformMatrices=null,this._transformMatrixTexture=null,this.onRebuildObservable=new r.y$,this._onCollisionPositionChange=(t,e,s=null)=>{e.subtractToRef(this._internalAbstractMeshDataInfo._meshCollisionData._oldPositionForCollisions,this._internalAbstractMeshDataInfo._meshCollisionData._diffPositionForCollisions),this._internalAbstractMeshDataInfo._meshCollisionData._diffPositionForCollisions.length()>o.D.CollisionsEpsilon&&this.position.addInPlace(this._internalAbstractMeshDataInfo._meshCollisionData._diffPositionForCollisions),s&&this.onCollideObservable.notifyObservers(s),this.onCollisionPositionChangeObservable.notifyObservers(this.position)},(e=this.getScene()).addMesh(this),this._resyncLightSources(),this._uniformBuffer=new d.M(this.getScene().getEngine(),void 0,void 0,t,!this.getScene().getEngine().isWebGPU),this._buildUniformLayout(),e.performancePriority){case i.a.Aggressive:this.doNotSyncBoundingInfo=!0;case i.a.Intermediate:this.alwaysSelectAsActiveMesh=!0,this.isPickable=!1}}_buildUniformLayout(){this._uniformBuffer.addUniform("world",16),this._uniformBuffer.addUniform("visibility",1),this._uniformBuffer.create()}transferToEffect(t){const e=this._uniformBuffer;e.updateMatrix("world",t),e.updateFloat("visibility",this._internalAbstractMeshDataInfo._visibility),e.update()}getMeshUniformBuffer(){return this._uniformBuffer}getClassName(){return"AbstractMesh"}toString(t){let e="Name: "+this.name+", isInstance: "+("InstancedMesh"!==this.getClassName()?"YES":"NO");e+=", # of submeshes: "+(this.subMeshes?this.subMeshes.length:0);const s=this._internalAbstractMeshDataInfo._skeleton;return s&&(e+=", skeleton: "+s.name),t&&(e+=", billboard mode: "+["NONE","X","Y",null,"Z",null,null,"ALL"][this.billboardMode],e+=", freeze wrld mat: "+(this._isWorldMatrixFrozen||this._waitingData.freezeWorldMatrix?"YES":"NO")),e}_getEffectiveParent(){return this._masterMesh&&this.billboardMode!==l.Y.BILLBOARDMODE_NONE?this._masterMesh:super._getEffectiveParent()}_getActionManagerForTrigger(t,e=!0){if(this.actionManager&&(e||this.actionManager.isRecursive)){if(!t)return this.actionManager;if(this.actionManager.hasSpecificTrigger(t))return this.actionManager}return this.parent?this.parent._getActionManagerForTrigger(t,!1):null}_rebuild(t=!1){if(this.onRebuildObservable.notifyObservers(this),null!==this._occlusionQuery&&(this._occlusionQuery=null),this.subMeshes)for(const t of this.subMeshes)t._rebuild()}_resyncLightSources(){this._lightSources.length=0;for(const t of this.getScene().lights)t.isEnabled()&&t.canAffectMesh(this)&&this._lightSources.push(t);this._markSubMeshesAsLightDirty()}_resyncLightSource(t){const e=t.isEnabled()&&t.canAffectMesh(this),s=this._lightSources.indexOf(t);let r=!1;if(-1===s){if(!e)return;this._lightSources.push(t)}else{if(e)return;r=!0,this._lightSources.splice(s,1)}this._markSubMeshesAsLightDirty(r)}_unBindEffect(){for(const t of this.subMeshes)t.setEffect(null)}_removeLightSource(t,e){const s=this._lightSources.indexOf(t);-1!==s&&(this._lightSources.splice(s,1),this._markSubMeshesAsLightDirty(e))}_markSubMeshesAsDirty(t){if(this.subMeshes)for(const e of this.subMeshes)for(let s=0;s<e._drawWrappers.length;++s){const r=e._drawWrappers[s];r&&r.defines&&r.defines.markAllAsDirty&&t(r.defines)}}_markSubMeshesAsLightDirty(t=!1){this._markSubMeshesAsDirty((e=>e.markAsLightDirty(t)))}_markSubMeshesAsAttributesDirty(){this._markSubMeshesAsDirty((t=>t.markAsAttributesDirty()))}_markSubMeshesAsMiscDirty(){this._markSubMeshesAsDirty((t=>t.markAsMiscDirty()))}markAsDirty(t){return this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this}resetDrawCache(t){if(this.subMeshes)for(const e of this.subMeshes)e.resetDrawCache(t)}get isBlocked(){return!1}getLOD(t){return this}getTotalVertices(){return 0}getTotalIndices(){return 0}getIndices(){return null}getVerticesData(t){return null}setVerticesData(t,e,s,r){return this}updateVerticesData(t,e,s,r){return this}setIndices(t,e){return this}isVerticesDataPresent(t){return!1}getBoundingInfo(){return this._masterMesh?this._masterMesh.getBoundingInfo():(this._boundingInfoIsDirty&&(this._boundingInfoIsDirty=!1,this._updateBoundingInfo()),this._boundingInfo)}setBoundingInfo(t){return this._boundingInfo=t,this}get hasBoundingInfo(){return null!==this._boundingInfo}buildBoundingInfo(t,e,s){return this._boundingInfo=new u.j(t,e,s),this._boundingInfo}normalizeToUnitCube(t=!0,e=!1,s){return super.normalizeToUnitCube(t,e,s)}get useBones(){return this.skeleton&&this.getScene().skeletonsEnabled&&this.isVerticesDataPresent(a.o.MatricesIndicesKind)&&this.isVerticesDataPresent(a.o.MatricesWeightsKind)}_preActivate(){}_preActivateForIntermediateRendering(t){}_activate(t,e){return this._renderId=t,!0}_postActivate(){}_freeze(){}_unFreeze(){}getWorldMatrix(){return this._masterMesh&&this.billboardMode===l.Y.BILLBOARDMODE_NONE?this._masterMesh.getWorldMatrix():super.getWorldMatrix()}_getWorldMatrixDeterminant(){return this._masterMesh?this._masterMesh._getWorldMatrixDeterminant():super._getWorldMatrixDeterminant()}get isAnInstance(){return!1}get hasInstances(){return!1}get hasThinInstances(){return!1}movePOV(t,e,s){return this.position.addInPlace(this.calcMovePOV(t,e,s)),this}calcMovePOV(t,e,s){const r=new n.y3;(this.rotationQuaternion?this.rotationQuaternion:n._f.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z)).toRotationMatrix(r);const i=n.P.Zero(),o=this.definedFacingForward?-1:1;return n.P.TransformCoordinatesFromFloatsToRef(t*o,e,s*o,r,i),i}rotatePOV(t,e,s){return this.rotation.addInPlace(this.calcRotatePOV(t,e,s)),this}calcRotatePOV(t,e,s){const r=this.definedFacingForward?1:-1;return new n.P(t*r,e,s*r)}refreshBoundingInfo(t=!1,e=!1){return this._boundingInfo&&this._boundingInfo.isLocked||this._refreshBoundingInfo(this._getPositionData(t,e),null),this}_refreshBoundingInfo(t,e){if(t){const s=(0,f.k)(t,0,this.getTotalVertices(),e);this._boundingInfo?this._boundingInfo.reConstruct(s.minimum,s.maximum):this._boundingInfo=new u.j(s.minimum,s.maximum)}if(this.subMeshes)for(let e=0;e<this.subMeshes.length;e++)this.subMeshes[e].refreshBoundingInfo(t);this._updateBoundingInfo()}_getData(t=!1,e=!1,s,r=a.o.PositionKind){if((s=null!=s?s:this.getVerticesData(r).slice())&&e&&this.morphTargetManager){let t=0,e=0;for(let i=0;i<s.length;i++){for(let t=0;t<this.morphTargetManager.numTargets;t++){const e=this.morphTargetManager.getTarget(t),r=e.influence;if(r>0){const t=e.getPositions();t&&(s[i]+=(t[i]-s[i])*r)}}if(t++,r===a.o.PositionKind&&this._positions&&3===t){t=0;const r=3*e;this._positions[e++].copyFromFloats(s[r],s[r+1],s[r+2])}}}if(s&&t&&this.skeleton){const t=this.getVerticesData(a.o.MatricesIndicesKind),e=this.getVerticesData(a.o.MatricesWeightsKind);if(e&&t){const i=this.numBoneInfluencers>4,o=i?this.getVerticesData(a.o.MatricesIndicesExtraKind):null,h=i?this.getVerticesData(a.o.MatricesWeightsExtraKind):null,l=this.skeleton.getTransformMatrices(this),c=n.jp.Vector3[0],u=n.jp.Matrix[0],d=n.jp.Matrix[1];let _=0;for(let m=0;m<s.length;m+=3,_+=4){let f,p;for(u.reset(),f=0;f<4;f++)p=e[_+f],p>0&&(n.y3.FromFloat32ArrayToRefScaled(l,Math.floor(16*t[_+f]),p,d),u.addToSelf(d));if(i)for(f=0;f<4;f++)p=h[_+f],p>0&&(n.y3.FromFloat32ArrayToRefScaled(l,Math.floor(16*o[_+f]),p,d),u.addToSelf(d));r===a.o.NormalKind?n.P.TransformNormalFromFloatsToRef(s[m],s[m+1],s[m+2],u,c):n.P.TransformCoordinatesFromFloatsToRef(s[m],s[m+1],s[m+2],u,c),c.toArray(s,m),r===a.o.PositionKind&&this._positions&&this._positions[m/3].copyFrom(c)}}}return s}getNormalsData(t=!1,e=!1){return this._getData(t,e,null,a.o.NormalKind)}getPositionData(t=!1,e=!1,s){return this._getData(t,e,s,a.o.PositionKind)}_getPositionData(t,e){var s;let r=this.getVerticesData(a.o.PositionKind);if(this._internalAbstractMeshDataInfo._positions&&(this._internalAbstractMeshDataInfo._positions=null),r&&(t&&this.skeleton||e&&this.morphTargetManager)){if(r=r.slice(),this._generatePointsArray(),this._positions){const t=this._positions;this._internalAbstractMeshDataInfo._positions=new Array(t.length);for(let e=0;e<t.length;e++)this._internalAbstractMeshDataInfo._positions[e]=(null===(s=t[e])||void 0===s?void 0:s.clone())||new n.P}return this.getPositionData(t,e,r)}return r}_updateBoundingInfo(){return this._boundingInfo?this._boundingInfo.update(this.worldMatrixFromCache):this._boundingInfo=new u.j(n.P.Zero(),n.P.Zero(),this.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(this.worldMatrixFromCache),this}_updateSubMeshesBoundingInfo(t){if(!this.subMeshes)return this;const e=this.subMeshes.length;for(let s=0;s<e;s++){const r=this.subMeshes[s];(e>1||!r.IsGlobal)&&r.updateBoundingInfo(t)}return this}_afterComputeWorldMatrix(){this.doNotSyncBoundingInfo||(this._boundingInfoIsDirty=!0)}isInFrustum(t){return this.getBoundingInfo().isInFrustum(t,this.cullingStrategy)}isCompletelyInFrustum(t){return this.getBoundingInfo().isCompletelyInFrustum(t)}intersectsMesh(t,e=!1,s){const r=this.getBoundingInfo(),i=t.getBoundingInfo();if(r.intersects(i,e))return!0;if(s)for(const s of this.getChildMeshes())if(s.intersectsMesh(t,e,!0))return!0;return!1}intersectsPoint(t){return this.getBoundingInfo().intersectsPoint(t)}get checkCollisions(){return this._internalAbstractMeshDataInfo._meshCollisionData._checkCollisions}set checkCollisions(t){this._internalAbstractMeshDataInfo._meshCollisionData._checkCollisions=t}get collider(){return this._internalAbstractMeshDataInfo._meshCollisionData._collider}moveWithCollisions(t){this.getAbsolutePosition().addToRef(this.ellipsoidOffset,this._internalAbstractMeshDataInfo._meshCollisionData._oldPositionForCollisions);const e=this.getScene().collisionCoordinator;return this._internalAbstractMeshDataInfo._meshCollisionData._collider||(this._internalAbstractMeshDataInfo._meshCollisionData._collider=e.createCollider()),this._internalAbstractMeshDataInfo._meshCollisionData._collider._radius=this.ellipsoid,e.getNewPosition(this._internalAbstractMeshDataInfo._meshCollisionData._oldPositionForCollisions,t,this._internalAbstractMeshDataInfo._meshCollisionData._collider,this.collisionRetryCount,this,this._onCollisionPositionChange,this.uniqueId),this}_collideForSubMesh(t,e,s){var r;if(this._generatePointsArray(),!this._positions)return this;if(!t._lastColliderWorldVertices||!t._lastColliderTransformMatrix.equals(e)){t._lastColliderTransformMatrix=e.clone(),t._lastColliderWorldVertices=[],t._trianglePlanes=[];const s=t.verticesStart,r=t.verticesStart+t.verticesCount;for(let i=s;i<r;i++)t._lastColliderWorldVertices.push(n.P.TransformCoordinates(this._positions[i],e))}return s._collide(t._trianglePlanes,t._lastColliderWorldVertices,this.getIndices(),t.indexStart,t.indexStart+t.indexCount,t.verticesStart,!!t.getMaterial(),this,this._shouldConvertRHS(),7===(null===(r=t.getMaterial())||void 0===r?void 0:r.fillMode)),this}_processCollisionsForSubMeshes(t,e){const s=this._scene.getCollidingSubMeshCandidates(this,t),r=s.length;for(let i=0;i<r;i++){const n=s.data[i];r>1&&!n._checkCollision(t)||this._collideForSubMesh(n,e,t)}return this}_shouldConvertRHS(){return!1}_checkCollision(t){if(!this.getBoundingInfo()._checkCollision(t))return this;const e=n.jp.Matrix[0],s=n.jp.Matrix[1];return n.y3.ScalingToRef(1/t._radius.x,1/t._radius.y,1/t._radius.z,e),this.worldMatrixFromCache.multiplyToRef(e,s),this._processCollisionsForSubMeshes(t,s),this}_generatePointsArray(){return!1}intersects(t,e,s,r=!1,i,o=!1){const a=new c.p,h="InstancedLinesMesh"===this.getClassName()||"LinesMesh"===this.getClassName()?this.intersectionThreshold:0,l=this.getBoundingInfo();if(!this.subMeshes)return a;if(!(o||t.intersectsSphere(l.boundingSphere,h)&&t.intersectsBox(l.boundingBox,h)))return a;if(r)return a.hit=!o,a.pickedMesh=o?null:this,a.distance=o?0:n.P.Distance(t.origin,l.boundingSphere.center),a.subMeshId=0,a;if(!this._generatePointsArray())return a;let u=null;const d=this._scene.getIntersectingSubMeshCandidates(this,t),_=d.length;let m=!1;for(let t=0;t<_;t++){const e=d.data[t].getMaterial();if(e&&(7==e.fillMode||0==e.fillMode||1==e.fillMode||2==e.fillMode||4==e.fillMode)){m=!0;break}}if(!m)return a.hit=!0,a.pickedMesh=this,a.distance=n.P.Distance(t.origin,l.boundingSphere.center),a.subMeshId=-1,a;for(let r=0;r<_;r++){const i=d.data[r];if(_>1&&!i.canIntersects(t))continue;const n=i.intersects(t,this._positions,this.getIndices(),e,s);if(n&&(e||!u||n.distance<u.distance)&&(u=n,u.subMeshId=r,e))break}if(u){const e=null!=i?i:this.getWorldMatrix(),s=n.jp.Vector3[0],r=n.jp.Vector3[1];n.P.TransformCoordinatesToRef(t.origin,e,s),t.direction.scaleToRef(u.distance,r);const o=n.P.TransformNormal(r,e).addInPlace(s);return a.hit=!0,a.distance=n.P.Distance(s,o),a.pickedPoint=o,a.pickedMesh=this,a.bu=u.bu||0,a.bv=u.bv||0,a.subMeshFaceId=u.faceId,a.faceId=u.faceId+d.data[u.subMeshId].indexStart/(-1!==this.getClassName().indexOf("LinesMesh")?2:3),a.subMeshId=u.subMeshId,a}return a}clone(t,e,s){return null}releaseSubMeshes(){if(this.subMeshes)for(;this.subMeshes.length;)this.subMeshes[0].dispose();else this.subMeshes=new Array;return this}dispose(t,e=!1){let s;for(this._scene.useMaterialMeshMap&&this._internalAbstractMeshDataInfo._material&&this._internalAbstractMeshDataInfo._material.meshMap&&(this._internalAbstractMeshDataInfo._material.meshMap[this.uniqueId]=void 0),this.getScene().freeActiveMeshes(),this.getScene().freeRenderingGroups(),void 0!==this.actionManager&&null!==this.actionManager&&(this.actionManager.dispose(),this.actionManager=null),this._internalAbstractMeshDataInfo._skeleton=null,this._transformMatrixTexture&&(this._transformMatrixTexture.dispose(),this._transformMatrixTexture=null),s=0;s<this._intersectionsInProgress.length;s++){const t=this._intersectionsInProgress[s],e=t._intersectionsInProgress.indexOf(this);t._intersectionsInProgress.splice(e,1)}this._intersectionsInProgress.length=0;this.getScene().lights.forEach((t=>{let e=t.includedOnlyMeshes.indexOf(this);-1!==e&&t.includedOnlyMeshes.splice(e,1),e=t.excludedMeshes.indexOf(this),-1!==e&&t.excludedMeshes.splice(e,1);const s=t.getShadowGenerators();if(s){const t=s.values();for(let s=t.next();!0!==s.done;s=t.next()){const t=s.value.getShadowMap();t&&t.renderList&&(e=t.renderList.indexOf(this),-1!==e&&t.renderList.splice(e,1))}}})),"InstancedMesh"===this.getClassName()&&"InstancedLinesMesh"===this.getClassName()||this.releaseSubMeshes();const r=this.getScene().getEngine();if(null!==this._occlusionQuery&&(this.isOcclusionQueryInProgress=!1,r.deleteQuery(this._occlusionQuery),this._occlusionQuery=null),r.wipeCaches(),this.getScene().removeMesh(this),this._parentContainer){const t=this._parentContainer.meshes.indexOf(this);t>-1&&this._parentContainer.meshes.splice(t,1),this._parentContainer=null}if(e&&this.material&&("MultiMaterial"===this.material.getClassName()?this.material.dispose(!1,!0,!0):this.material.dispose(!1,!0)),!t)for(s=0;s<this.getScene().particleSystems.length;s++)this.getScene().particleSystems[s].emitter===this&&(this.getScene().particleSystems[s].dispose(),s--);this._internalAbstractMeshDataInfo._facetData.facetDataEnabled&&this.disableFacetData(),this._uniformBuffer.dispose(),this.onAfterWorldMatrixUpdateObservable.clear(),this.onCollideObservable.clear(),this.onCollisionPositionChangeObservable.clear(),this.onRebuildObservable.clear(),super.dispose(t,e)}addChild(t,e=!1){return t.setParent(this,e),this}removeChild(t,e=!1){return t.setParent(null,e),this}_initFacetData(){const t=this._internalAbstractMeshDataInfo._facetData;t.facetNormals||(t.facetNormals=new Array),t.facetPositions||(t.facetPositions=new Array),t.facetPartitioning||(t.facetPartitioning=new Array),t.facetNb=this.getIndices().length/3|0,t.partitioningSubdivisions=t.partitioningSubdivisions?t.partitioningSubdivisions:10,t.partitioningBBoxRatio=t.partitioningBBoxRatio?t.partitioningBBoxRatio:1.01;for(let e=0;e<t.facetNb;e++)t.facetNormals[e]=n.P.Zero(),t.facetPositions[e]=n.P.Zero();return t.facetDataEnabled=!0,this}updateFacetData(){const t=this._internalAbstractMeshDataInfo._facetData;t.facetDataEnabled||this._initFacetData();const e=this.getVerticesData(a.o.PositionKind),s=this.getIndices(),r=this.getVerticesData(a.o.NormalKind),i=this.getBoundingInfo();if(t.facetDepthSort&&!t.facetDepthSortEnabled){if(t.facetDepthSortEnabled=!0,s instanceof Uint16Array)t.depthSortedIndices=new Uint16Array(s);else if(s instanceof Uint32Array)t.depthSortedIndices=new Uint32Array(s);else{let e=!1;for(let t=0;t<s.length;t++)if(s[t]>65535){e=!0;break}t.depthSortedIndices=e?new Uint32Array(s):new Uint16Array(s)}if(t.facetDepthSortFunction=function(t,e){return e.sqDistance-t.sqDistance},!t.facetDepthSortFrom){const e=this.getScene().activeCamera;t.facetDepthSortFrom=e?e.position:n.P.Zero()}t.depthSortedFacets=[];for(let e=0;e<t.facetNb;e++){const s={ind:3*e,sqDistance:0};t.depthSortedFacets.push(s)}t.invertedMatrix=n.y3.Identity(),t.facetDepthSortOrigin=n.P.Zero()}t.bbSize.x=i.maximum.x-i.minimum.x>y.kn?i.maximum.x-i.minimum.x:y.kn,t.bbSize.y=i.maximum.y-i.minimum.y>y.kn?i.maximum.y-i.minimum.y:y.kn,t.bbSize.z=i.maximum.z-i.minimum.z>y.kn?i.maximum.z-i.minimum.z:y.kn;let o=t.bbSize.x>t.bbSize.y?t.bbSize.x:t.bbSize.y;if(o=o>t.bbSize.z?o:t.bbSize.z,t.subDiv.max=t.partitioningSubdivisions,t.subDiv.X=Math.floor(t.subDiv.max*t.bbSize.x/o),t.subDiv.Y=Math.floor(t.subDiv.max*t.bbSize.y/o),t.subDiv.Z=Math.floor(t.subDiv.max*t.bbSize.z/o),t.subDiv.X=t.subDiv.X<1?1:t.subDiv.X,t.subDiv.Y=t.subDiv.Y<1?1:t.subDiv.Y,t.subDiv.Z=t.subDiv.Z<1?1:t.subDiv.Z,t.facetParameters.facetNormals=this.getFacetLocalNormals(),t.facetParameters.facetPositions=this.getFacetLocalPositions(),t.facetParameters.facetPartitioning=this.getFacetLocalPartitioning(),t.facetParameters.bInfo=i,t.facetParameters.bbSize=t.bbSize,t.facetParameters.subDiv=t.subDiv,t.facetParameters.ratio=this.partitioningBBoxRatio,t.facetParameters.depthSort=t.facetDepthSort,t.facetDepthSort&&t.facetDepthSortEnabled&&(this.computeWorldMatrix(!0),this._worldMatrix.invertToRef(t.invertedMatrix),n.P.TransformCoordinatesToRef(t.facetDepthSortFrom,t.invertedMatrix,t.facetDepthSortOrigin),t.facetParameters.distanceTo=t.facetDepthSortOrigin),t.facetParameters.depthSortedFacets=t.depthSortedFacets,r&&h.x.ComputeNormals(e,s,r,t.facetParameters),t.facetDepthSort&&t.facetDepthSortEnabled){t.depthSortedFacets.sort(t.facetDepthSortFunction);const e=t.depthSortedIndices.length/3|0;for(let r=0;r<e;r++){const e=t.depthSortedFacets[r].ind;t.depthSortedIndices[3*r]=s[e],t.depthSortedIndices[3*r+1]=s[e+1],t.depthSortedIndices[3*r+2]=s[e+2]}this.updateIndices(t.depthSortedIndices,void 0,!0)}return this}getFacetLocalNormals(){const t=this._internalAbstractMeshDataInfo._facetData;return t.facetNormals||this.updateFacetData(),t.facetNormals}getFacetLocalPositions(){const t=this._internalAbstractMeshDataInfo._facetData;return t.facetPositions||this.updateFacetData(),t.facetPositions}getFacetLocalPartitioning(){const t=this._internalAbstractMeshDataInfo._facetData;return t.facetPartitioning||this.updateFacetData(),t.facetPartitioning}getFacetPosition(t){const e=n.P.Zero();return this.getFacetPositionToRef(t,e),e}getFacetPositionToRef(t,e){const s=this.getFacetLocalPositions()[t],r=this.getWorldMatrix();return n.P.TransformCoordinatesToRef(s,r,e),this}getFacetNormal(t){const e=n.P.Zero();return this.getFacetNormalToRef(t,e),e}getFacetNormalToRef(t,e){const s=this.getFacetLocalNormals()[t];return n.P.TransformNormalToRef(s,this.getWorldMatrix(),e),this}getFacetsAtLocalCoordinates(t,e,s){const r=this.getBoundingInfo(),i=this._internalAbstractMeshDataInfo._facetData,n=Math.floor((t-r.minimum.x*i.partitioningBBoxRatio)*i.subDiv.X*i.partitioningBBoxRatio/i.bbSize.x),o=Math.floor((e-r.minimum.y*i.partitioningBBoxRatio)*i.subDiv.Y*i.partitioningBBoxRatio/i.bbSize.y),a=Math.floor((s-r.minimum.z*i.partitioningBBoxRatio)*i.subDiv.Z*i.partitioningBBoxRatio/i.bbSize.z);return n<0||n>i.subDiv.max||o<0||o>i.subDiv.max||a<0||a>i.subDiv.max?null:i.facetPartitioning[n+i.subDiv.max*o+i.subDiv.max*i.subDiv.max*a]}getClosestFacetAtCoordinates(t,e,s,r,i=!1,o=!0){const a=this.getWorldMatrix(),h=n.jp.Matrix[5];a.invertToRef(h);const l=n.jp.Vector3[8];n.P.TransformCoordinatesFromFloatsToRef(t,e,s,h,l);const c=this.getClosestFacetAtLocalCoordinates(l.x,l.y,l.z,r,i,o);return r&&n.P.TransformCoordinatesFromFloatsToRef(r.x,r.y,r.z,a,r),c}getClosestFacetAtLocalCoordinates(t,e,s,r,i=!1,n=!0){let o=null,a=0,h=0,l=0,c=0,u=0,d=0,_=0,m=0;const f=this.getFacetLocalPositions(),p=this.getFacetLocalNormals(),y=this.getFacetsAtLocalCoordinates(t,e,s);if(!y)return null;let x,g,b,R=Number.MAX_VALUE,P=R;for(let M=0;M<y.length;M++)x=y[M],g=p[x],b=f[x],c=(t-b.x)*g.x+(e-b.y)*g.y+(s-b.z)*g.z,(!i||i&&n&&c>=0||i&&!n&&c<=0)&&(c=g.x*b.x+g.y*b.y+g.z*b.z,u=-(g.x*t+g.y*e+g.z*s-c)/(g.x*g.x+g.y*g.y+g.z*g.z),d=t+g.x*u,_=e+g.y*u,m=s+g.z*u,a=d-t,h=_-e,l=m-s,P=a*a+h*h+l*l,P<R&&(R=P,o=x,r&&(r.x=d,r.y=_,r.z=m)));return o}getFacetDataParameters(){return this._internalAbstractMeshDataInfo._facetData.facetParameters}disableFacetData(){const t=this._internalAbstractMeshDataInfo._facetData;return t.facetDataEnabled&&(t.facetDataEnabled=!1,t.facetPositions=new Array,t.facetNormals=new Array,t.facetPartitioning=new Array,t.facetParameters=null,t.depthSortedIndices=new Uint32Array(0)),this}updateIndices(t,e,s=!1){return this}createNormals(t){const e=this.getVerticesData(a.o.PositionKind),s=this.getIndices();let r;return r=this.isVerticesDataPresent(a.o.NormalKind)?this.getVerticesData(a.o.NormalKind):[],h.x.ComputeNormals(e,s,r,{useRightHandedSystem:this.getScene().useRightHandedSystem}),this.setVerticesData(a.o.NormalKind,r,t),this}alignWithNormal(t,e){e||(e=x.RD.Y);const s=n.jp.Vector3[0],r=n.jp.Vector3[1];return n.P.CrossToRef(e,t,r),n.P.CrossToRef(t,r,s),this.rotationQuaternion?n._f.RotationQuaternionFromAxisToRef(s,t,r,this.rotationQuaternion):n.P.RotationFromAxisToRef(s,t,r,this.rotation),this}_checkOcclusionQuery(){return!1}disableEdgesRendering(){throw(0,m.S)("EdgesRenderer")}enableEdgesRendering(t,e,s){throw(0,m.S)("EdgesRenderer")}getConnectedParticleSystems(){return this._scene.particleSystems.filter((t=>t.emitter===this))}}P.OCCLUSION_TYPE_NONE=0,P.OCCLUSION_TYPE_OPTIMISTIC=1,P.OCCLUSION_TYPE_STRICT=2,P.OCCLUSION_ALGORITHM_TYPE_ACCURATE=0,P.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE=1,P.CULLINGSTRATEGY_STANDARD=0,P.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=1,P.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=2,P.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=3,(0,g.H)("BABYLON.AbstractMesh",P)}}]);